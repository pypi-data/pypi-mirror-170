import{d as C,u as R,c as l,a as x,U as A,V as S,e as B,r as c,o as r,f as u,w as o,g as e,W as V,h as f,X as w,k as p,Y as N,Z as P,$ as U,t as W,C as I}from"./index.9f3175f1.js";import{u as O}from"./useRouteParam.59edeb60.js";import{u as T}from"./useSubscriptionWithDependencies.763b6591.js";const q=C({__name:"Flow",setup(X){const n=O("id"),m=R(),_=l(()=>{const t=["Deployments","Runs"];return I.xl||t.unshift("Details"),t}),d={interval:3e5},y=x(A.getFlow,[n.value],d),s=l(()=>y.response),v=S({flows:[n.value]}),b=l(()=>n.value?[{flows:{id:{any_:[n.value]}}}]:null),i=T(U.getDeployments,b),D=l(()=>{var t;return(t=i.response)!=null?t:[]});function F(){m.push(W.flows())}const $=l(()=>s.value?`Flow: ${s.value.name}`:"Flow");return B($),(t,a)=>{const k=c("p-tabs"),g=c("p-layout-well");return r(),u(g,{class:"flow"},{header:o(()=>[e(s)?(r(),u(e(V),{key:0,flow:e(s),onDelete:F},null,8,["flow"])):f("",!0)]),well:o(()=>[e(s)?(r(),u(e(w),{key:0,flow:e(s)},null,8,["flow"])):f("",!0)]),default:o(()=>[p(k,{tabs:e(_)},{details:o(()=>[e(s)?(r(),u(e(w),{key:0,flow:e(s)},null,8,["flow"])):f("",!0)]),deployments:o(()=>[p(e(N),{deployments:e(D),onUpdate:a[0]||(a[0]=h=>e(i).refresh()),onDelete:a[1]||(a[1]=h=>e(i).refresh())},null,8,["deployments"])]),runs:o(()=>[p(e(P),{"flow-run-filter":e(v)},null,8,["flow-run-filter"])]),_:1},8,["tabs"])]),_:1})}}});export{q as default};
