import{a9 as d,d as u,_ as r,a as o,p as _,C as v,b as l,aa as f,m as b,a7 as g,ab as k}from"./submit-footer.8cc090e5.js";import{b as C,e as s,r as m,n as c,f as h,g as A,d as I}from"./main.5420b138.js";import{_ as p}from"./button.b4863304.js";import{c as S}from"./confirm-footer.7e19fa4d.js";import{_ as i}from"./index.3483e550.js";import"./VInput.3d834aae.js";import"./VItemGroup.767bf148.js";import"./change-password-dialog.c7914e45.js";import"./index.e8047975.js";const T={name:"AdminStatusList",data(){return{mdiCloseCircleOutline:d}},computed:{...C(s,{librarianStatuses:t=>t.librarianStatuses,show:t=>t.librarianStatuses.length>0})},created(){this.load()},methods:{...m(s,["loadTable","librarianTask"]),indeterminate:t=>!t.preactive&&+t.total==0,progress(t){return t.preactive||+t.total==0?0:100*+t.complete/+t.total},load(){this.loadTable("LibrarianStatus")},clear(){this.librarianTask("librarian_clear_status","")}}};var L=function(){var e=this,a=e._self._c;return a(p,[e.show?a(u):e._e(),a(r,{attrs:{ripple:""},on:{click:e.load}},[a(o,[a(_,[e.show?a("div",[a(S,{attrs:{id:"clearButton",small:"",ripple:"",icon:"",title:"Clear Librarian Statuses"},on:{click:e.clear}},[a(i,[e._v(e._s(e.mdiCloseCircleOutline))])],1),a("h4",[e._v("Librarian Tasks")]),e._l(e.librarianStatuses,function(n){return a(_,{key:`${n.type} ${n.name}`},[a("div",{staticClass:"statusItem",attrs:{nav:""}},[a("div",{staticClass:"statusItemTitle"},[e._v(" "+e._s(n.type)+" "+e._s(n.name)+" "),+n.total?a("span",[e._v(" "+e._s(n.complete)+"/"+e._s(n.total)+" ")]):e._e()]),a(v,{attrs:{color:"#cc7b19",indeterminate:e.indeterminate(n),value:e.progress(n),bottom:""}})],1)])})],2):a(l,{attrs:{id:"noTasksRunning"}},[e._v(" No librarian tasks running ")])],1)],1)],1)],1)},$=[],y=c(T,L,$,!1,null,"a614adc7",null,null);const F=y.exports;const O={name:"AdminMenu",components:{AdminStatusList:F},props:{menu:{type:Boolean,default:!0}},data(){return{mdiBookAlert:f,mdiOpenInNew:b,mdiDatabaseClockOutline:g,mdiCogOutline:k}},computed:{...h(A,["isUserAdmin"]),...I(s,{unseenFailedImports:t=>t.unseenFailedImports})},methods:{...m(s,["clearFailedImports","librarianTask"])}};var x=function(){var e=this,a=e._self._c;return e.isUserAdmin?a("div",[e.menu?a(p,[a(r,{attrs:{ripple:""},on:{click:function(n){return e.librarianTask("poll")}}},[a(o,[a(l,[a(i,[e._v(e._s(e.mdiDatabaseClockOutline))]),e._v("Poll All Libraries")],1)],1)],1),a(r,{attrs:{to:{name:"admin"},ripple:""},on:{click:function(n){e.unseenFailedImports=!1}}},[a(o,[a(l,[a(i,[e._v(e._s(e.mdiCogOutline))]),e._v("Admin Panel "),e.unseenFailedImports?a(i,{attrs:{id:"failedImportsIcon",title:"New Failed Imports"}},[e._v(" "+e._s(e.mdiBookAlert)+" ")]):e._e()],1)],1)],1)],1):e._e(),a("AdminStatusList")],1):e._e()},w=[],B=c(O,x,w,!1,null,"7fa13de5",null,null);const G=B.exports;export{G as default};
