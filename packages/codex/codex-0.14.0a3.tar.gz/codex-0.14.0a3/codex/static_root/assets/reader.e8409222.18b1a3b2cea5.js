import{_ as U,S as H,a as x,b as T,c as R,e as D,d as Y,g as b,f as k,V as X}from"./button.ab3d7704.js";import{O as j,T as z,_ as w,a as S,b as $,U as Z,W as J,X as Q,Y as ee,d,s as te,Z as se,$ as oe,a0 as ae,a1 as ne}from"./submit-footer.5dbadeb7.js";import{m as B,h as re,T as ie,f as u,a2 as a,b as r,a3 as p,Z as ce,u as L,r as l,q as le,n,g,d as I,R as ue,s as de,_ as _e}from"./main.02d1fcad.js";import{_ as i,C as pe,B as me}from"./index.a3d5c760.js";import{S as m,p as he,R as ge}from"./index.780c894b.js";import{V as c,b as fe,c as ve}from"./VInput.494c9a91.js";import{B as F}from"./VItemGroup.822bd558.js";import{f as be,c as _}from"./confirm-footer.b147af84.js";import{_ as ke}from"./VCheckbox.6942b5b2.js";import{_ as A,a as G}from"./metadata-dialog.2a6580dc.js";import{_ as we}from"./lodash.6839f78c.js";import{_ as N,a as E}from"./VWindowItem.f106c34c.js";import"./change-password-dialog.2e50211d.js";import"./VSubheader.f9544886.js";import"./VSimpleTable.a8d899a4.js";import"./datetime.5fb8de45.js";const Se=B(F,c),C=Se.extend({name:"v-radio-group",provide(){return{radioGroup:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},name:String,row:Boolean,value:null},computed:{classes(){return{...c.options.computed.classes.call(this),"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row}}},methods:{genDefaultSlot(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{id:this.id,role:"radiogroup","aria-labelledby":this.computedId}},c.options.methods.genDefaultSlot.call(this))},genInputSlot(){const t=c.options.methods.genInputSlot.call(this);return delete t.data.on.click,t},genLabel(){const t=c.options.methods.genLabel.call(this);return t?(t.data.attrs.id=this.computedId,delete t.data.attrs.for,t.tag="legend",t):null},onClick:F.options.methods.onClick},render(t){const e=c.options.render.call(this,t);return this._b(e.data,"div",this.attrs$),e}});const $e=B(me,pe,ge,be("radioGroup"),ie),h=$e.extend().extend({name:"v-radio",inheritAttrs:!1,props:{disabled:Boolean,id:String,label:String,name:String,offIcon:{type:String,default:"$radioOff"},onIcon:{type:String,default:"$radioOn"},readonly:Boolean,value:{default:null}},data:()=>({isFocused:!1}),computed:{classes(){return{"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused,...this.themeClasses,...this.groupClasses}},computedColor(){if(!this.isDisabled)return m.options.computed.computedColor.call(this)},computedIcon(){return this.isActive?this.onIcon:this.offIcon},computedId(){return c.options.computed.computedId.call(this)},hasLabel:c.options.computed.hasLabel,hasState(){return(this.radioGroup||{}).hasState},isDisabled(){return this.disabled||!!this.radioGroup&&this.radioGroup.isDisabled},isReadonly(){return this.readonly||!!this.radioGroup&&this.radioGroup.isReadonly},computedName(){return this.name||!this.radioGroup?this.name:this.radioGroup.name||`radio-${this.radioGroup._uid}`},rippleState(){return m.options.computed.rippleState.call(this)},validationState(){return(this.radioGroup||{}).validationState||this.computedColor}},methods:{genInput(t){return m.options.methods.genInput.call(this,"radio",t)},genLabel(){return this.hasLabel?this.$createElement(fe,{on:{click:he},attrs:{for:this.computedId},props:{color:this.validationState,focused:this.hasState}},re(this,"label")||this.label):null},genRadio(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(i,this.setTextColor(this.validationState,{props:{dense:this.radioGroup&&this.radioGroup.dense}}),this.computedIcon),this.genInput({name:this.computedName,value:this.value,...e}),this.genRipple(this.setTextColor(this.rippleState))])},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onChange(){this.isDisabled||this.isReadonly||this.isActive||this.toggle()},onKeydown:()=>{}},render(t){const e={staticClass:"v-radio",class:this.classes,on:ve({click:this.onChange},this.listeners$),attrs:{title:this.attrs$.title}};return t("div",e,[this.genRadio(),this.genLabel()])}}),Ce={name:"DownloadPanel",data(){return{mdiDownload:j,mdiFileImage:z}},computed:{...u(a,["title"]),...r(L,{downloadFileName:t=>t.title+".cbz",timestamp:t=>t.timestamp,pageSrc:function(t){return p(this.$route.params,t.timestamp)},pageName:function(t){const e=this.$route.params.page;return`${t.title} - page ${e}.jpg`},downloadURL:function(t){return ce(this.$route.params.pk,t.timestamp)}})},methods:{...l(le,["downloadIOSPWAFix"]),downloadPage(){this.downloadIOSPWAFix(this.pageSrc,this.pageName)},downloadBook(){this.downloadIOSPWAFix(this.downloadURL,this.downloadFileName)}}};var Pe=function(){var e=this,s=e._self._c;return s(U,[s(w,{attrs:{ripple:""},on:{click:e.downloadPage}},[s(S,[s($,[s(i,[e._v(e._s(e.mdiFileImage))]),e._v(" Download Page "+e._s(e.$route.params.page)+" ")],1)],1)],1),s(w,{attrs:{ripple:""},on:{click:e.downloadBook}},[s(S,[s($,[s(i,[e._v(e._s(e.mdiDownload))]),e._v(" Download Book ")],1)],1)],1)],1)},ye=[],xe=n(Ce,Pe,ye,!1,null,null,null,null);const V=xe.exports;const Te=["fitTo","twoPages"],Re={name:"ReaderSettingsPanel",data(){return{isGlobalScope:!1}},computed:{...r(a,{fitToChoices:t=>t.choices.fitTo,settingsScope:function(t){const e=this.isGlobalScope?"globl":"local";return t.settings[e]},nullValues:t=>t.nullValues,isClearSettingsButtonDisabled:function(t){if(this.isGlobalScope)return!0;for(const e of Te)if(!t.nullValues.has(t.settings.local[e]))return!1;return!0}})},mounted(){window.addEventListener("keyup",this._keyListener)},unmounted:function(){window.removeEventListener("keyup",this._keyListener)},methods:{...l(a,["clearSettingsLocal","setSettingsGlobal","setSettingsLocal"]),settingsDialogChanged:function(t){this.isGlobalScope?this.setSettingsGlobal(t):this.setSettingsLocal(t)},_keyListener:function(t){switch(t.stopPropagation(),t.key){case"w":this.setSettingsLocal({fitTo:"WIDTH"});break;case"h":this.setSettingsLocal({fitTo:"HEIGHT"});break;case"s":this.setSettingsLocal({fitTo:"SCREEN"});break;case"o":this.setSettingsLocal({fitTo:"ORIG"});break;case"2":this.setSettingsLocal({twoPages:!this.settingsScope.twoPages});break}}}};var De=function(){var e=this,s=e._self._c;return s("div",{attrs:{id:"readerSettings"}},[s("h3",[e._v("Reader Settings")]),s(C,{attrs:{label:"Scope"},model:{value:e.isGlobalScope,callback:function(o){e.isGlobalScope=o},expression:"isGlobalScope"}},[s(h,{attrs:{label:"Only this comic",value:!1}}),s(h,{attrs:{label:"Default for all comics",value:!0}})],1),s(C,{staticClass:"displayRadioGroup",attrs:{label:"Display",value:e.settingsScope.fitTo},on:{change:function(o){return e.settingsDialogChanged({fitTo:o})}}},e._l(e.fitToChoices,function(o){return s(h,{key:o.value,attrs:{label:o.text,value:o.value}})}),1),s(ke,{staticClass:"displayTwoPages",attrs:{label:"Two pages","input-value":e.settingsScope.twoPages,indeterminate:e.settingsScope.twoPages===null||e.settingsScope.twoPages===void 0,ripple:""},on:{change:function(o){return e.settingsDialogChanged({twoPages:o===!0})}}}),s(_,{class:{invisible:e.isGlobalScope},attrs:{id:"clearSettingsButton",disabled:e.isClearSettingsButtonDisabled,title:"Use the default settings for all comics for this comic"},on:{click:e.clearSettingsLocal}},[e._v(" Clear Comic Settings ")])],1)},Be=[],Le=n(Re,De,Be,!1,null,"c2df8f6f",null,null);const O=Le.exports;const Ie={data(){return{mdiMenuLeft:Z,mdiMenuRight:J,mdiKeyboardSpace:Q,mdiAppleKeyboardShift:ee}},methods:{isMobile:function(){return typeof window.orientation<"u"||navigator.userAgent.includes("IEMobile")}}};var Fe=function(){var e=this,s=e._self._c;return e.isMobile()?e._e():s("div",{attrs:{id:"readerKeyboardShortcutsDialog"}},[s("h3",[e._v("Keyboard Shortcuts")]),s("table",{staticClass:"highlight-table",attrs:{id:"readerKeyboardShortcutsTable"}},[s("tbody",[s("tr",[s("td",[s(i,{staticClass:"keyIcon"},[e._v(" "+e._s(e.mdiMenuLeft)+" ")]),e._v(", j, "),s("div",[s(i,{staticClass:"keyIcon",attrs:{dense:""}},[e._v(" "+e._s(e.mdiAppleKeyboardShift)+" ")]),s(i,{staticClass:"keyIcon",attrs:{dense:""}},[e._v(" "+e._s(e.mdiKeyboardSpace)+" ")])],1)],1),s("td",[e._v("Previous page")])]),s("tr",[s("td",[s(i,{staticClass:"keyIcon"},[e._v(" "+e._s(e.mdiMenuRight)+" ")]),e._v(", k, "),s(i,{staticClass:"keyIcon",attrs:{dense:""}},[e._v(" "+e._s(e.mdiKeyboardSpace)+" ")])],1),s("td",[e._v("Next page")])]),e._m(0),e._m(1),e._m(2),e._m(3),e._m(4),e._m(5),e._m(6)])])])},Ae=[function(){var t=this,e=t._self._c;return e("tr",[e("td",[t._v("h")]),e("td",[t._v("Fit page to screen height")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",[t._v("w")]),e("td",[t._v("Fit page to screen width")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",[t._v("s")]),e("td",[t._v("Fit page to screen")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",[t._v("o")]),e("td",[t._v("Show page at original size")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",[t._v("2")]),e("td",[t._v("Toggle two page view")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",[t._v("m")]),e("td",[t._v("Show comic's metadata")])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",[t._v("esc")]),e("td",[t._v("Close book")])])}],Ge=n(Ie,Fe,Ae,!1,null,"f37f94e1",null,null);const Ne=Ge.exports,Ee={name:"ReaderSettingsPanel",components:{ReaderKeyboardShortcutsPanel:Ne,ReaderSettingsPanel:O,SettingsCommonPanel:H,DownloadPanel:V,SettingsFooter:x,VersionFooter:T},computed:{...u(g,["isCodexViewable"]),...I(a,["isSettingsDrawerOpen"])}};var Ve=function(){var e=this,s=e._self._c;return s(R,{staticClass:"settingsDrawer",attrs:{id:"readerSettingsDrawer",app:"",right:"",temporary:"",touchless:""},scopedSlots:e._u([{key:"append",fn:function(){return[s(T)]},proxy:!0}]),model:{value:e.isSettingsDrawerOpen,callback:function(o){e.isSettingsDrawerOpen=o},expression:"isSettingsDrawerOpen"}},[e.isCodexViewable?s("div",{staticClass:"settingsDrawerContainer"},[s("div",{attrs:{id:"topBlock"}},[s(O),s(d),s("ReaderKeyboardShortcutsPanel"),s(d),s(V),s(d),s("SettingsCommonPanel"),s(d)],1),s(x)],1):e._e()])},Oe=[],We=n(Ee,Ve,Oe,!1,null,null,null,null);const W=We.exports,Me={name:"ReaderNavButton",props:{value:{type:Number,required:!0}},computed:{toRoute:function(){const t={...this.$route.params};return t.page=this.value,{name:this.$route.name,params:t}},disabled:function(){return this.$route.params.page===this.value}}};var Ke=function(){var e=this,s=e._self._c;return s(_,{staticClass:"readerNavButton",attrs:{disabled:e.disabled,to:e.toRoute,ripple:"",large:""}},[e._v(" "+e._s(e.value)+" ")])},qe=[],Ue=n(Me,Ke,qe,!1,null,null,null,null);const f=Ue.exports;const He={name:"ReaderNavToolbar",components:{PaginationSlider:A,ReaderNavButton:f},computed:{...r(a,{maxPage:t=>t.comic?t.comic.maxPage:0,comicLoaded:t=>t.comicLoaded})},methods:{...l(a,["routeToPage"])}};var Ye=function(){var e=this,s=e._self._c;return e.maxPage?s(D,{staticClass:"readerNavToolbar codexToolbar",attrs:{dense:"",transform:"center bottom"}},[s(f,{attrs:{value:0}}),s(A,{key:e.comicLoaded,attrs:{value:+e.$route.params.page,min:0,max:e.maxPage},on:{change:function(o){return e.routeToPage(o)}}}),s(f,{attrs:{value:e.maxPage}})],1):e._e()},Xe=[],je=n(He,Ye,Xe,!1,null,"4486fd87",null,null);const M=je.exports;const P="prev",y="next",ze={name:"ReaderTitleToolbar",components:{MetadataDialog:G,SettingsDrawerButton:Y},data(){return{mdiClose:te}},head(){const t=this.$route.params.page,e=`read ${this.title} page ${t}`;return{meta:[{hid:"description",name:"description",content:e}]}},computed:{...u(a,["computedSettings","title"]),...r(a,{routes:t=>t.routes,timestamp:t=>t.timestamp,seriesPosition:function(t){const e=t.routes;if(e.seriesCount>1)return`${e.seriesIndex}/${e.seriesCount}`}}),...r(L,{lastRoute:t=>t.page.routes.last}),...I(a,["isSettingsDrawerOpen"]),closeBookRoute:function(){const t={name:"browser",params:this.lastRoute};return t.params?t.hash=`#card-${this.$route.params.pk}`:t.params=window.CODEX.LAST_ROUTE||ue.browser.route,t}},mounted(){window.addEventListener("keyup",this._keyListener)},unmounted:function(){window.removeEventListener("keyup",this._keyListener)},methods:{...l(a,["routeToDirection"]),openMetadata:function(){this.$refs.metadataDialog.dialog=!0},_keyListener:function(t){switch(t.stopPropagation(),t.key){case" ":!t.shiftKey&&window.innerHeight+window.scrollY>=document.body.scrollHeight&&this.routes.next?this.routeToDirection(y):!!t.shiftKey&&window.scrollY===0&&this.routes.prev&&this.routeToDirection(P);break;case"j":case"ArrowRight":this.routeToDirection(y);break;case"k":case"ArrowLeft":this.routeToDirection(P);break;case"Escape":this.$refs.closeBook.$el.click();break;case"m":this.openMetadata();break}}}};var Ze=function(){var e=this,s=e._self._c;return s(D,{staticClass:"codexToolbar",attrs:{id:"readerTopToolbar",dense:""}},[s(b,[s(_,{ref:"closeBook",attrs:{id:"closeBook",to:e.closeBookRoute,large:"",ripple:""}},[e.$vuetify.breakpoint.mobile?s(i,{attrs:{title:"Close Book"}},[e._v(" "+e._s(e.mdiClose)+" ")]):s("span",[e._v("close book")])],1)],1),s(k),s(X,{attrs:{id:"toolbarTitle"}},[e._v(" "+e._s(e.title)+" ")]),s(k),e.seriesPosition?s("span",{attrs:{id:"seriesPosition",title:"Series Position"}},[e._v(e._s(e.seriesPosition))]):e._e(),s(b,[s(_,{attrs:{id:"tagButton"},on:{click:function(o){return o.stopPropagation(),e.openMetadata.apply(null,arguments)}}},[s(G,{ref:"metadataDialog",attrs:{group:"c",pk:Number(e.$route.params.pk)}})],1),s("SettingsDrawerButton",{attrs:{id:"settingsButton"},on:{click:function(o){o.stopPropagation(),e.isSettingsDrawerOpen=!0}}})],1)],1)},Je=[],Qe=n(ze,Ze,Je,!1,null,"dbddf492",null,null);const K=Qe.exports;const et={name:"ChangeBookDrawer",props:{direction:{type:String,required:!0}},data(){return{icon:this.direction==="next"?se:oe,classes:{[this.direction]:!0}}},head(){if(this.prefetchSrc)return{link:{rel:"prefetch",as:"image",href:this.prefetchSrc}}},computed:{...r(a,{isDrawerOpen(t){return t.bookChange===this.direction},series:t=>t.comic.series,prefetchSrc(t){if(this.isDrawerOpen)return p(this.params,t.timestamp)}}),params(){return this.series[this.direction]},route(){return this.series&&this.series[this.direction]?{params:this.params}:{}},label(){return`${this.direction==="prev"?"Previous":"Next"} Book`}}};var tt=function(){var e=this,s=e._self._c;return s(R,{staticClass:"changeBookDrawer",class:e.classes,attrs:{absolute:"",left:e.direction==="prev",right:e.direction==="next",temporarary:"",value:e.isDrawerOpen,width:"33%"}},[s("router-link",{staticClass:"navLink",attrs:{to:e.route,"aria-label":e.label,title:e.label}},[s(i,{staticClass:"bookChangeIcon"},[e._v(" "+e._s(e.icon)+" ")])],1)],1)},st=[],ot=n(et,tt,st,!1,null,"0604851d",null,null);const v=ot.exports;const at={name:"PageChangeLink",props:{direction:{type:String,required:!0}},head(){if(this.prefetchSrc)return{link:{rel:"prefetch",as:"image",href:this.prefetchSrc}}},computed:{...r(a,{route(t){return t.routes&&t.routes[this.direction]?{params:t.routes[this.direction]}:{}},prefetchSrc(t){const e=t.routes;return e[this.direction]?p(e[this.direction],t.timestamp):!1}}),label(){return`${this.direction==="prev"?"Previous":"Next"} Page`}}};var nt=function(){var e=this,s=e._self._c;return s("router-link",{staticClass:"pageChangeColumn",class:{leftArrow:e.direction==="prev",rightArrow:e.direction==="next"},attrs:{to:e.route,"aria-label":e.label}})},rt=[],it=n(at,nt,rt,!1,null,"81e89536",null,null);const ct=it.exports;const lt={name:"ComicPage",props:{pk:{type:Number,required:!0},page:{type:Number,required:!0}},computed:{...u(a,["fitToClass"]),...r(a,{src(t){const e={pk:this.pk,page:this.page};return p(e,t.timestamp)}})},methods:{changeSrcToError(t){t.target.src=window.CODEX.MISSING_PAGE}}};var ut=function(){var e=this,s=e._self._c;return s("img",{class:e.fitToClass,attrs:{src:e.src,alt:`Page ${e.page}`},on:{error:e.changeSrcToError}})},dt=[],_t=n(lt,ut,dt,!1,null,"ca2a70a7",null,null);const pt=_t.exports;const mt=()=>de(()=>import("./pdf.0dada9e1.js"),["assets/pdf.0dada9e1.js","assets/pdf.059305b5.css","assets/submit-footer.5dbadeb7.js","assets/submit-footer.339fc0bc.css","assets/main.02d1fcad.js","assets/main.8be8cc93.css","assets/index.a3d5c760.js","assets/index.e21e5da2.css","assets/confirm-footer.b147af84.js","assets/confirm-footer.c0d1779e.css","assets/VInput.494c9a91.js","assets/VInput.ad5269aa.css","assets/placeholder-loading.cc6901b8.js"]),ht={name:"PagesWindow",components:{PDFPage:mt,ComicPage:pt,PageChangeLink:ct},props:{pk:{type:Number,required:!0}},data(){return{activePage:void 0}},computed:{...u(a,["computedSettings"]),...r(a,{pages(t){const e=t.comic?t.comic.maxPage+1:0;return we.range(e)},maxPage:t=>t.comic.maxPage||0,isPDF:t=>t.comic?t.comic.fileFormat==="pdf":!1,secondPage(t){return t.computedSettings.twoPages&&+this.activePage+1<=t.comic.maxPage},comicLoaded:t=>t.comicLoaded,bookChange:t=>t.bookChange,comicPk:t=>t.comic.pk,series:t=>t.comic.series})},watch:{$route(t){+t.params.pk===this.pk&&this.comicLoaded&&(this.setRoutesAndBookmarkPage(),this.setActivePage())},comicLoaded(t){t&&this.setActivePage()}},created(){this.pk===+this.$route.params.pk?this.activePage=+this.$route.params.page:this.bookChange==="prev"?this.activePage=+this.series.prev.page:this.activePage=0},mounted(){this.$refs.pagesWindow.$el.children[0].addEventListener("click",this.click)},unmounted(){this.$refs.pagesWindow.$el.children[0].removeEventListener("click",this.click)},methods:{...l(a,["loadBook","routeToPage","setBookChangeFlag","setRoutesAndBookmarkPage"]),setActivePage(){if(!this.comicLoaded||this.pk!==+this.$route.params.pk||this.pk!==this.comicPk)return;const t=+this.$route.params.page||0;if(t<0)return console.warn("Page out of bounds. Redirecting to 0."),this.routeToPage(0);if(t>this.maxPage)return console.warn(`Page out of bounds. Redirecting to ${this.maxPage}.`),this.routeToPage(this.maxPage);this.activePage=t,window.scrollTo(0,0)},setBookChange(t){this.series[t]&&this.setBookChangeFlag(t)}}};var gt=function(){var e=this,s=e._self._c;return s(N,{ref:"pagesWindow",attrs:{id:"pagesWindow","show-arrows":"",value:e.activePage},scopedSlots:e._u([{key:"prev",fn:function(){return[s("PageChangeLink",{attrs:{direction:"prev"}})]},proxy:!0},{key:"next",fn:function(){return[s("PageChangeLink",{attrs:{direction:"next"}})]},proxy:!0}])},[s("div",{staticClass:"bookChangeActivatorColumn",class:{upArrow:e.series.prev},attrs:{id:"bookChangeActivatorPrev"},on:{click:function(o){return o.stopPropagation(),e.setBookChange("prev")}}}),s("div",{staticClass:"bookChangeActivatorColumn",class:{downArrow:e.series.next},attrs:{id:"bookChangeActivatorNext"},on:{click:function(o){return o.stopPropagation(),e.setBookChange("next")}}}),e._l(e.pages,function(o){return s(E,{key:`c/${e.pk}/${o}`,staticClass:"windowItem",attrs:{disabled:"",eager:o>=e.activePage-1&&o<=e.activePage+2}},[e.isPDF?s("PDFPage",{attrs:{pk:e.pk,page:o}}):s("ComicPage",{attrs:{pk:e.pk,page:o}}),e.secondPage&&e.isPDF?s("PDFPage",{attrs:{pk:e.pk,page:o+1}}):e.secondPage?s("ComicPage",{attrs:{pk:e.pk,page:o+1}}):e._e()],1)})],2)},ft=[],vt=n(ht,gt,ft,!1,null,"433391cb",null,null);const q=vt.exports;const bt={name:"BooksWindow",components:{ChangeBookDrawer:v},emits:["click"],data(){return{windowBook:+this.$route.params.pk}},computed:{...r(a,{books:function(t){const e=[],s=t.routes,o=t.comic.series;return!s.prev&&o.prev&&e.push(o.prev.pk),e.includes(+this.$route.params.pk)||e.push(+this.$route.params.pk),!s.next&&o.next&&!e.includes(o.next.pk)&&e.push(o.next.pk),e},bookChange:t=>t.bookChange,series:t=>t.comic.series})},watch:{$route(t,e){(!e||!e.params||+t.params.pk!=+e.params.pk)&&(this.loadBook(),this.windowBook=+t.params.pk)}},mounted(){this.$refs.booksWindow.$el.children[0].addEventListener("click",this.click)},unmounted(){this.$refs.booksWindow.$el.children[0].removeEventListener("click",this.click)},methods:{...l(a,["routeToDirection","setBookChangeFlag","loadBook"]),click(){this.setBookChangeFlag(),this.$emit("click")},eager(t){return this.series.next&&this.series.next.pk===t&&this.bookChange==="next"||this.series.prev&&this.series.prev.pk===t&&this.bookChange==="prev"}}};var kt=function(){var e=this,s=e._self._c;return s(N,{ref:"booksWindow",attrs:{id:"booksWindow",value:e.windowBook,vertical:"",touchless:""}},[s(v,{attrs:{direction:"prev"}}),e._l(e.books,function(o){return s(E,{key:`c/${o}`,staticClass:"windowItem",attrs:{disabled:"",eager:e.eager(o),value:o}},[s(q,{attrs:{pk:o}})],1)}),s(v,{attrs:{direction:"next"}})],2)},wt=[],St=n(bt,kt,wt,!1,null,"66be633f",null,null);const $t=St.exports;const Ct={name:"MainReader",components:{BooksWindow:q,ReaderNavToolbar:M,ReaderTitleToolbar:K,ReaderSettingsDrawer:W},data(){return{showToolbars:!1}},computed:{...u(g,["isCodexViewable"]),...r(g,{user:t=>t.user})},watch:{user:function(){this.loadReaderSettings()},isCodexViewable:function(){this.loadReaderSettings()}},created(){this.loadReaderSettings(),this.loadBook()},methods:{...l(a,["loadReaderSettings","loadBook"]),toggleToolbars:function(){this.showToolbars=!this.showToolbars}}};var Pt=function(){var e=this,s=e._self._c;return s("div",[s(_e,{attrs:{id:"readerWrapper"}},[e.isCodexViewable?s("div",{attrs:{id:"readerContainer"}},[s($t,{on:{click:e.toggleToolbars}}),s(ae,[s(K,{directives:[{name:"show",rawName:"v-show",value:e.showToolbars,expression:"showToolbars"}]})],1),s(ne,[s(M,{directives:[{name:"show",rawName:"v-show",value:e.showToolbars,expression:"showToolbars"}]})],1)],1):s("div",{attrs:{id:"announcement"}},[s("h1",[s("router-link",{attrs:{to:{name:"home"}}},[e._v(" Log in ")]),e._v(" to read comics ")],1)])]),s(W)],1)},yt=[],xt=n(Ct,Pt,yt,!1,null,"7564d54d",null,null);const qt=xt.exports;export{qt as default};
