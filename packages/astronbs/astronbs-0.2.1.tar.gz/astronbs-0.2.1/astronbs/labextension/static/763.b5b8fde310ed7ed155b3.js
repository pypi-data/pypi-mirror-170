"use strict";(self.webpackChunkastronbs=self.webpackChunkastronbs||[]).push([[763],{763:(e,o,t)=>{t.r(o),t.d(o,{default:()=>p});var n=t(829),a=t(306),r=t(194),s=t(512),c=t(655),l=t(12),i=t(322);async function d(e="",o={}){const t=i.ServerConnection.makeSettings(),n=l.URLExt.join(t.baseUrl,"astronbs",e);let a;try{a=await i.ServerConnection.makeRequest(n,o,t)}catch(e){throw new i.ServerConnection.NetworkError(e)}let r=await a.text();if(r.length>0)try{r=JSON.parse(r)}catch(e){console.log("Not a JSON response body.",a)}if(!a.ok)throw new i.ServerConnection.ResponseError(a,r.message||r);return r}const m={id:"astronbs:plugin",autoStart:!0,optional:[n.ISettingRegistry,s.ILauncher,a.IFileBrowserFactory,r.IDocumentManager],activate:(e,o,t,n,a)=>{console.log("JupyterLab extension astronbs is activated!"),o&&o.load(m.id).then((e=>{console.log("astronbs settings loaded:",e.composite)})).catch((e=>{console.error("Failed to load settings for astronbs.",e)})),e.commands.addCommand("astronbs:reduction_template",{execute:()=>{const e=d("reduction_template",{body:JSON.stringify({path:n.defaultBrowser.model.path}),method:"POST"});console.log("I am back in open2"),console.log(e),e.then((e=>{console.log(e),a&&a.open(e.path)}))},icon:c.imageIcon,label:"Reduction Template"}),e.commands.addCommand("astronbs:reprojection_template",{execute:()=>{const e=d("reprojection_template",{body:JSON.stringify({path:n.defaultBrowser.model.path}),method:"POST"});console.log("I am back in open2"),console.log(e),e.then((e=>{console.log(e),a&&a.open(e.path)}))},icon:c.imageIcon,label:"Reprojection Template"}),t&&(t.add({command:"astronbs:reduction_template",category:"Astro",rank:0}),t.add({command:"astronbs:reprojection_template",category:"Astro",rank:10})),d("get_example").then((e=>{console.log(e)})).catch((e=>{console.error(`The astronbs server extension appears to be missing.\n${e}`)}))}},p=m}}]);