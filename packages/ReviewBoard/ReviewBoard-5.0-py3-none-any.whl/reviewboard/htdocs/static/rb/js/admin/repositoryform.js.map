{"version":3,"file":"repositoryform.js","names":["prevTypes","origRepoTypes","powerPackTemplate","gerritPluginRequiredTemplate","interpolate","MANUAL_URL","updatePlanEl","$row","$plan","serviceType","isFake","planTypes","HOSTING_SERVICES","plans","selectedPlan","val","empty","length","hide","i","planType","opt","$","type","text","label","appendTo","prop","show","triggerHandler","updateHostingForm","$hostingType","formPrefix","$forms","formID","updateRepositoryType","hostingType","newRepoTypes","scmtools","$repoTypes","currentRepoType","forEach","repoType","indexOf","value","updateAccountList","$hostingAccount","$authForm","hostingInfo","accounts","selectedAccount","parseInt","foundSelected","find","remove","needs_two_factor_auth_code","account","username","hosting_url","$opt","pk","data","document","ready","$hostingAuthForms","$hostingRepoForms","$hostingAccountRow","$hostingAccountRelink","addClass","$scmtoolAuthForms","$scmtoolRepoForms","$associateSshKeyFieldset","parents","$associateSshKey","associateSshKeyDisabled","$bugTrackerUseHosting","$bugTrackerUseHostingRow","$bugTrackerType","$bugTrackerHostingURLRow","$bugTrackerTypeRow","$bugTrackerPlan","$bugTrackerPlanRow","$bugTrackerURLRow","$bugTrackerUsernameRow","$repoPlanRow","$repoPlan","$publicAccess","$tool","$toolRow","$showSshKey","$publicKeyPopup","$bugTrackerForms","$submitButtons","$editHostingCredentials","$editHostingCredentialsLabel","$forceAuth","$hostingPowerPackAdvert","html","closest","$toolPowerPackAdvert","$gerritPluginInfo","bug_tracker_type","hosting_type","tool","each","el","$repoType","push","change","checked","plan","bugTrackerType","planInfo","setVisible","bug_tracker_requires_username","isCustom","fake","toggle","supports_bug_trackers","disabled","supports_ssh_key_association","selectedIndex","$selectedOption","options","is_authorized","scmtoolID","$repoForm","toolInfo","TOOLS_INFO","name","self_hosted","visible","on","is","click"],"sources":["../../../../../static/rb/js/admin/repositoryform.es6.js"],"sourcesContent":["(function() {\n\n\nconst prevTypes = {};\nconst origRepoTypes = [];\nconst powerPackTemplate = dedent`\n    <h3>${gettext('Power Pack Required')}</h3>\n    <p>\n    ${gettext('<span class=\"power-pack-advert-hosting-type\"></span> support is available with <a href=\"https://www.reviewboard.org/powerpack/\">Power Pack</a>, an extension which also offers powerful reports, document review, and more.')}\n    </p>\n`;\nconst gerritPluginRequiredTemplate = dedent`\n    <h3>\n    ${gettext('Plugin Required')}\n    </h3>\n    <p>\n    ${interpolate(\n        gettext('The <code>gerrit-reviewboard</code> plugin is required for Gerrit integration. See the <a href=\"%s\" target=\"_blank\">instructions</a> for installing the plugin on your server.'),\n        [MANUAL_URL + 'admin/configuration/repositories/gerrit/'])}\n    </p>\n`;\n\n\nfunction updatePlanEl($row, $plan, serviceType, isFake) {\n    const planTypes = HOSTING_SERVICES[serviceType].plans;\n    const selectedPlan = $plan.val();\n\n    $plan.empty();\n\n    if (planTypes.length === 1 || isFake) {\n        $row.hide();\n    } else {\n        for (let i = 0; i < planTypes.length; i++) {\n            const planType = planTypes[i];\n            const opt = $('<option/>')\n                .val(planType.type)\n                .text(planType.label)\n                .appendTo($plan);\n\n            if (planType.type === selectedPlan) {\n                opt.prop('selected', true);\n            }\n        }\n\n        $row.show();\n    }\n\n    $plan.triggerHandler('change');\n}\n\n\nfunction updateHostingForm($hostingType, formPrefix, $plan, $forms) {\n    const formID = `#${formPrefix}-${$hostingType.val()}-${$plan.val() || 'default'}`;\n\n    $forms.hide();\n    $(formID).show();\n}\n\n\nfunction updateRepositoryType() {\n    const hostingType = $('#id_hosting_type').val();\n    const newRepoTypes = (hostingType === 'custom'\n                          ? []\n                          : HOSTING_SERVICES[hostingType].scmtools);\n    const $repoTypes = $('#id_tool');\n    const currentRepoType = $repoTypes.val();\n\n    $repoTypes.empty();\n\n    origRepoTypes.forEach(repoType => {\n        if (newRepoTypes.length === 0 ||\n            newRepoTypes.indexOf(repoType.text) !== -1 ||\n            newRepoTypes.indexOf(repoType.value) !== -1) {\n            $('<option/>')\n                .text(repoType.text)\n                .val(repoType.value)\n                .appendTo($repoTypes);\n\n            if (repoType.value === currentRepoType) {\n                $repoTypes.val(currentRepoType);\n            }\n        }\n    });\n\n    $repoTypes.triggerHandler('change');\n}\n\n\nfunction updateAccountList() {\n    const hostingType = $('#id_hosting_type').val();\n    const $hostingAccount = $('#id_hosting_account');\n    const $authForm = $('#hosting-auth-form-' + hostingType);\n    const hostingInfo = HOSTING_SERVICES[hostingType];\n    const accounts = hostingInfo.accounts;\n    const selectedAccount = parseInt($hostingAccount.val(), 10);\n    let foundSelected = false;\n\n    /* Rebuild the list of accounts. */\n    $hostingAccount.find('option[value!=\"\"]').remove();\n\n    if (hostingInfo.needs_two_factor_auth_code ||\n        $authForm.find('.errorlist').length > 0) {\n        /*\n         * The first one will be selected automatically, which\n         * we want. Don't select any below.\n         */\n        foundSelected = true;\n    }\n\n    accounts.forEach(account => {\n        let text = account.username;\n\n        if (account.hosting_url) {\n            text += ` (${account.hosting_url})`;\n        }\n\n        const $opt = $('<option/>')\n            .val(account.pk)\n            .text(text)\n            .data('account', account)\n            .appendTo($hostingAccount);\n\n        if (account.pk === selectedAccount || !foundSelected) {\n            $opt.prop('selected', true);\n            foundSelected = true;\n            $hostingAccount.triggerHandler('change');\n        }\n    });\n}\n\n\n$(document).ready(function() {\n    const $hostingType = $('#id_hosting_type');\n    const $hostingAuthForms = $('.hosting-auth-form');\n    const $hostingRepoForms = $('.hosting-repo-form');\n    const $hostingAccount = $('#id_hosting_account');\n    const $hostingAccountRow = $('#row-hosting_account');\n    const $hostingAccountRelink = $('<p/>')\n        .text(gettext('The authentication requirements for this account have changed. You will need to re-authenticate.'))\n        .addClass('errornote')\n        .hide()\n        .appendTo($hostingAccountRow);\n    const $scmtoolAuthForms = $('.scmtool-auth-form');\n    const $scmtoolRepoForms = $('.scmtool-repo-form');\n    const $associateSshKeyFieldset =\n        $('#row-associate_ssh_key').parents('fieldset');\n    const $associateSshKey = $('#id_associate_ssh_key');\n    const associateSshKeyDisabled = $associateSshKey.prop('disabled');\n    const $bugTrackerUseHosting = $('#id_bug_tracker_use_hosting');\n    const $bugTrackerUseHostingRow = $('#row-bug_tracker_use_hosting');\n    const $bugTrackerType = $('#id_bug_tracker_type');\n    const $bugTrackerHostingURLRow = $('#row-bug_tracker_hosting_url');\n    const $bugTrackerTypeRow = $('#row-bug_tracker_type');\n    const $bugTrackerPlan = $('#id_bug_tracker_plan');\n    const $bugTrackerPlanRow = $('#row-bug_tracker_plan');\n    const $bugTrackerURLRow = $('#row-bug_tracker');\n    const $bugTrackerUsernameRow =\n        $('#row-bug_tracker_hosting_account_username');\n    const $repoPlanRow = $('#row-repository_plan');\n    const $repoPlan = $('#id_repository_plan');\n    const $publicAccess = $('#id_public');\n    const $tool = $('#id_tool');\n    const $toolRow = $('#row-tool');\n    const $showSshKey = $('#show-ssh-key-link');\n    const $publicKeyPopup = $('#ssh-public-key-popup');\n    const $bugTrackerForms = $('.bug-tracker-form');\n    const $submitButtons = $('input[type=\"submit\"]');\n    const $editHostingCredentials = $('#repo-edit-hosting-credentials');\n    const $editHostingCredentialsLabel =\n        $('#repo-edit-hosting-credentials-label');\n    const $forceAuth = $('#id_force_authorize');\n    const $hostingPowerPackAdvert = $('<div class=\"powerpack-advert\" />')\n        .html(powerPackTemplate)\n        .hide()\n        .appendTo($hostingType.closest('fieldset'));\n    const $toolPowerPackAdvert = $('<div class=\"powerpack-advert\" />')\n        .html(powerPackTemplate)\n        .hide()\n        .appendTo($tool.closest('fieldset'));\n    const $gerritPluginInfo = $('<div class=\"gerrit-plugin-advert\" />')\n        .html(gerritPluginRequiredTemplate)\n        .hide()\n        .appendTo($('#row-hosting_type'));\n\n    prevTypes.bug_tracker_type = 'none';\n    prevTypes.hosting_type = 'custom';\n    prevTypes.tool = 'none';\n\n    $tool.find('option').each((i, el) => {\n        const $repoType = $(el);\n\n        origRepoTypes.push({\n            value: $repoType.val(),\n            text: $repoType.text(),\n        });\n    });\n\n    $bugTrackerUseHosting\n        .change(function() {\n            if (this.checked) {\n                $bugTrackerTypeRow.hide();\n                $bugTrackerPlanRow.hide();\n                $bugTrackerUsernameRow.hide();\n                $bugTrackerURLRow.hide();\n                $bugTrackerForms.hide();\n            } else {\n                $bugTrackerTypeRow.show();\n                $bugTrackerType.triggerHandler('change');\n            }\n        })\n        .triggerHandler('change');\n\n    $repoPlan.change(() => updateHostingForm($hostingType, 'repo-form-hosting',\n                                             $repoPlan, $hostingRepoForms));\n\n    $bugTrackerPlan.change(() => {\n        const plan = $bugTrackerPlan.val() || 'default';\n        const bugTrackerType = $bugTrackerType.val();\n        const planInfo = HOSTING_SERVICES[bugTrackerType].planInfo[plan];\n\n        updateHostingForm($bugTrackerType, 'bug-tracker-form-hosting',\n                          $bugTrackerPlan, $bugTrackerForms);\n\n        $bugTrackerUsernameRow.setVisible(\n            planInfo.bug_tracker_requires_username);\n    });\n\n    $hostingType\n        .change(() => {\n            const hostingType = $hostingType.val();\n            const isCustom = (hostingType === 'custom');\n            const isFake = (!isCustom &&\n                            HOSTING_SERVICES[hostingType].fake === true);\n\n            updateRepositoryType();\n\n            $gerritPluginInfo.toggle(hostingType === 'gerrit');\n\n            if (isCustom) {\n                $repoPlanRow.hide();\n            } else {\n                $scmtoolAuthForms.hide();\n                $scmtoolRepoForms.hide();\n\n                updatePlanEl($repoPlanRow, $repoPlan, hostingType, isFake);\n            }\n\n            $repoPlan.triggerHandler('change');\n\n            if (isCustom ||\n                isFake ||\n                !HOSTING_SERVICES[hostingType].supports_bug_trackers) {\n                $bugTrackerUseHostingRow.hide();\n                $bugTrackerUseHosting\n                    .prop({\n                        disabled: true,\n                        checked: false,\n                    })\n                    .triggerHandler('change');\n            } else {\n                $bugTrackerUseHosting.prop('disabled', false);\n                $bugTrackerUseHostingRow.show();\n            }\n\n            if (isCustom ||\n                !HOSTING_SERVICES[hostingType].supports_ssh_key_association) {\n                $associateSshKeyFieldset.hide();\n                $associateSshKey.prop({\n                    disabled: true,\n                    checked: false,\n                });\n            } else {\n                /*\n                 * Always use the original state of the checkbox (i.e. the\n                 * state on page load)\n                 */\n                $associateSshKey.prop('disabled', associateSshKeyDisabled);\n                $associateSshKeyFieldset.show();\n            }\n\n            if (isFake) {\n                $hostingPowerPackAdvert\n                    .find('.power-pack-advert-hosting-type')\n                    .text($hostingType.find(':selected').text());\n            }\n\n            $hostingAccountRow.setVisible(!isFake);\n            $toolRow.setVisible(!isFake);\n\n            $hostingPowerPackAdvert.setVisible(isFake);\n            $submitButtons.prop('disabled', isFake);\n\n            if (!isCustom) {\n                updateAccountList();\n            }\n        })\n        .triggerHandler('change');\n\n    $([$hostingType[0], $hostingAccount[0]])\n        .change(() => {\n            $hostingAuthForms.hide();\n            $hostingAccountRelink.hide();\n            $editHostingCredentials\n                .hide()\n                .val(gettext('Edit credentials'));\n            $forceAuth.val('false');\n\n            const hostingType = $hostingType.val();\n\n            if (hostingType === 'custom') {\n                $hostingAccountRow.hide();\n            } else {\n                const hostingInfo = HOSTING_SERVICES[hostingType];\n\n                if (hostingInfo.fake !== true) {\n                    $hostingAccountRow.show();\n\n                    const $authForm = $('#hosting-auth-form-' + hostingType);\n\n                    /*\n                     * Hide any fields required for 2FA unless explicitly\n                     * needed.\n                     */\n                    $authForm.find('[data-required-for-2fa]').closest('.form-row')\n                        .setVisible(hostingInfo.needs_two_factor_auth_code);\n\n                    if ($hostingAccount.val() === '') {\n                        /* Present fields for linking a new account. */\n                        $authForm.show();\n                    } else if (hostingInfo.needs_two_factor_auth_code) {\n                        /*\n                         * The user needs to enter a 2FA code. We need to\n                         * show the auth form, and ensure we will be forcing\n                         * authentication.\n                         */\n                        $forceAuth.val('true');\n                        $authForm.show();\n                    } else {\n                        /* An existing linked account has been selected. */\n                        const selectedIndex = $hostingAccount[0].selectedIndex;\n                        const $selectedOption =\n                            $($hostingAccount[0].options[selectedIndex]);\n                        const account = $selectedOption.data('account');\n\n                        if (account.is_authorized &&\n                            $authForm.find('.errorlist').length === 0) {\n                            $editHostingCredentials.show();\n                        } else {\n                            $authForm.show();\n                            $hostingAccountRelink.show();\n                        }\n                    }\n                }\n            }\n        })\n        .triggerHandler('change');\n\n    $tool\n        .change(() => {\n            if ($hostingType.val() === 'custom') {\n                const scmtoolID = $tool.val();\n                const $authForm = $('#auth-form-scm-' + scmtoolID);\n                const $repoForm = $('#repo-form-scm-' + scmtoolID);\n\n                const toolInfo = TOOLS_INFO[scmtoolID];\n                const isFake = (toolInfo.fake === true);\n\n                if (isFake) {\n                    $toolPowerPackAdvert\n                        .find('.power-pack-advert-hosting-type')\n                        .text(toolInfo.name);\n                }\n\n                $scmtoolAuthForms.hide();\n                $scmtoolRepoForms.hide();\n\n                $authForm.setVisible(!isFake);\n                $repoForm.setVisible(!isFake);\n                $toolPowerPackAdvert.setVisible(isFake);\n                $submitButtons.prop('disabled', isFake);\n            }\n        })\n        .triggerHandler('change');\n\n    $bugTrackerType\n        .change(() => {\n            $bugTrackerForms.hide();\n\n            const bugTrackerType = $bugTrackerType.val();\n\n            if (bugTrackerType === 'custom' || bugTrackerType === 'none') {\n                $bugTrackerHostingURLRow.hide();\n                $bugTrackerPlanRow.hide();\n                $bugTrackerUsernameRow.hide();\n            }\n\n            if (bugTrackerType === 'custom') {\n                $bugTrackerURLRow.show();\n            } else if (bugTrackerType === 'none') {\n                $bugTrackerURLRow.hide();\n            } else {\n                $bugTrackerURLRow.hide();\n                updatePlanEl($bugTrackerPlanRow, $bugTrackerPlan,\n                             bugTrackerType, false);\n\n                $bugTrackerHostingURLRow.setVisible(\n                    HOSTING_SERVICES[bugTrackerType].self_hosted);\n            }\n        })\n        .triggerHandler('change');\n\n    $publicAccess\n        .change(function() {\n            var visible = !this.checked;\n            $('#row-users').setVisible(visible);\n            $('#row-review_groups').setVisible(visible);\n        })\n        .triggerHandler('change');\n\n    $showSshKey.on('click', () => {\n        if ($publicKeyPopup.is(':visible')) {\n            $showSshKey.text(gettext('Show your SSH public key'));\n            $publicKeyPopup.hide();\n        } else {\n            $showSshKey.text(gettext('Hide your SSH public key'));\n            $publicKeyPopup.show();\n        }\n\n        return false;\n    });\n\n    $editHostingCredentials.click(() => {\n        let $authForm = $('#hosting-auth-form-' + $hostingType.val());\n\n        if ($forceAuth.val() === 'true') {\n            $editHostingCredentialsLabel.text(gettext('Edit credentials'));\n            $authForm.hide();\n            $forceAuth.val('false');\n        } else {\n            $editHostingCredentialsLabel.text(\n                gettext('Cancel editing credentials'));\n            $authForm = $('#hosting-auth-form-' + $hostingType.val()).show();\n            $authForm.show();\n            $forceAuth.val('true');\n        }\n\n        return false;\n    });\n});\n\n\n})();\n"],"mappings":"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"}