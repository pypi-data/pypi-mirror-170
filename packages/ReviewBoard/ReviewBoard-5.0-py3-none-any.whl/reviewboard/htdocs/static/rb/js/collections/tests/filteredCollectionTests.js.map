{"version":3,"file":"filteredCollectionTests.js","names":["suite","mainCollection","beforeEach","Backbone","Collection","id","label","bool","describe","it","filteredCollection","RB","FilteredCollection","collection","expect","length","toBe","filters","at","setFilters","reset","add","remove","get"],"sources":["../../../../../../static/rb/js/collections/tests/filteredCollectionTests.es6.js"],"sourcesContent":["suite('rb/collections/FilteredCollection', function() {\n    let mainCollection;\n\n    beforeEach(function() {\n        mainCollection = new Backbone.Collection([\n            {\n                id: 1,\n                label: 'One',\n                bool: true,\n            },\n            {\n                id: 2,\n                label: 'Two',\n                bool: false,\n            },\n            {\n                id: 3,\n                label: 'Three',\n                bool: true,\n            },\n        ]);\n    });\n\n    describe('Initialization', function() {\n        it('Defaults to full contents', function() {\n            const filteredCollection = new RB.FilteredCollection(null, {\n                collection: mainCollection,\n            });\n\n            expect(filteredCollection.length).toBe(mainCollection.length);\n        });\n\n        it('Respects provided filter', function() {\n            const filteredCollection = new RB.FilteredCollection(null, {\n                collection: mainCollection,\n                filters: {\n                    label: 'T',\n                },\n            });\n\n            expect(filteredCollection.length).toBe(2);\n            expect(filteredCollection.at(0).id).toBe(2);\n            expect(filteredCollection.at(1).id).toBe(3);\n        });\n    });\n\n    describe('Methods', function() {\n        let filteredCollection;\n\n        beforeEach(function() {\n            filteredCollection = new RB.FilteredCollection(null, {\n                collection: mainCollection,\n                filters: {\n                    label: 'T',\n                },\n            });\n\n            expect(filteredCollection.length).toBe(2);\n        });\n\n        describe('setFilters', function() {\n            it('With new filter', function() {\n                filteredCollection.setFilters({\n                    label: 'O',\n                });\n\n                expect(filteredCollection.length).toBe(1);\n                expect(filteredCollection.at(0).id).toBe(1);\n            });\n\n            it('With multiple filters', function() {\n                filteredCollection.setFilters({\n                    label: 'T',\n                    bool: false,\n                });\n\n                expect(filteredCollection.length).toBe(1);\n                expect(filteredCollection.at(0).id).toBe(2);\n            });\n\n            it('{}', function() {\n                filteredCollection.setFilters({});\n\n                expect(filteredCollection.length).toBe(3);\n            });\n\n            it('null', function() {\n                filteredCollection.setFilters(null);\n\n                expect(filteredCollection.length).toBe(3);\n            });\n\n            it('undefined', function() {\n                filteredCollection.setFilters();\n\n                expect(filteredCollection.length).toBe(3);\n            });\n        });\n    });\n\n    describe('Main collection events', function() {\n        describe('With filters', function() {\n            let filteredCollection;\n\n            beforeEach(function() {\n                filteredCollection = new RB.FilteredCollection(null, {\n                    collection: mainCollection,\n                    filters: {\n                        label: 'T',\n                    },\n                });\n\n                expect(filteredCollection.length).toBe(2);\n            });\n\n            it('reset', function() {\n                mainCollection.reset([\n                    {\n                        id: 10,\n                        label: 'Monday',\n                    },\n                    {\n                        id: 11,\n                        label: 'Tuesday',\n                    },\n                ]);\n\n                expect(filteredCollection.length).toBe(1);\n                expect(filteredCollection.at(0).id).toBe(11);\n            });\n\n            describe('add', function() {\n                it('Matching filter', function() {\n                    mainCollection.add({\n                        id: 4,\n                        label: 'Test',\n                    });\n\n                    expect(filteredCollection.length).toBe(3);\n                    expect(filteredCollection.at(2).id).toBe(4);\n                });\n\n                it('Not matching filter', function() {\n                    mainCollection.add({\n                        id: 4,\n                        label: 'Four',\n                    });\n\n                    expect(filteredCollection.length).toBe(2);\n                });\n            });\n\n            describe('remove', function() {\n                it('Matching filter', function() {\n                    mainCollection.remove(mainCollection.get(2));\n\n                    expect(filteredCollection.length).toBe(1);\n                });\n\n                it('Not matching filter', function() {\n                    mainCollection.remove(mainCollection.get(0));\n\n                    expect(filteredCollection.length).toBe(2);\n                });\n            });\n        });\n\n        describe('Without filters', function() {\n            let filteredCollection;\n\n            beforeEach(function() {\n                filteredCollection = new RB.FilteredCollection(null, {\n                    collection: mainCollection,\n                });\n\n                expect(filteredCollection.length).toBe(3);\n            });\n\n            it('reset', function() {\n                mainCollection.reset([\n                    {\n                        id: 10,\n                        label: 'Monday',\n                    },\n                    {\n                        id: 11,\n                        label: 'Tuesday',\n                    },\n                ]);\n\n                expect(filteredCollection.length).toBe(2);\n            });\n\n            it('add', function() {\n                mainCollection.add({\n                    id: 4,\n                    label: 'Four',\n                });\n\n                expect(filteredCollection.length).toBe(4);\n                expect(filteredCollection.at(3).id).toBe(4);\n            });\n\n            it('remove', function() {\n                mainCollection.remove(mainCollection.get(1));\n                expect(filteredCollection.length).toBe(2);\n            });\n        });\n    });\n});\n"],"mappings":"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"}