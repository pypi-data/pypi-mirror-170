{"version":3,"file":"repositoryBranchesCollectionTests.js","names":["suite","collection","beforeEach","RB","RepositoryBranches","url","describe","it","spyOn","$","and","callFake","request","expect","toBe","type","success","stat","branches","name","commit","fetch","ajax","toHaveBeenCalled","length","at","get","reduce","memo","item"],"sources":["../../../../../../../static/rb/js/resources/collections/tests/repositoryBranchesCollectionTests.es6.js"],"sourcesContent":["suite('rb/resources/collections/RepositoryBranches', function() {\n    let collection;\n\n    beforeEach(function() {\n        collection = new RB.RepositoryBranches();\n        collection.url = '/api/repositories/123/branches/';\n    });\n\n    describe('Methods', function() {\n        it('fetch', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.url)\n                    .toBe('/api/repositories/123/branches/');\n                expect(request.type).toBe('GET');\n\n                request.success({\n                    stat: 'ok',\n                    branches: [\n                        {\n                            name: 'master',\n                            commit: '859d4e148ce3ce60bbda6622cdbe5c2c2f8d9817',\n                            'default': true,\n                        },\n                        {\n                            name: 'release-1.7.x',\n                            commit: '92463764015ef463b4b6d1a1825fee7aeec8cb15',\n                            'default': false,\n                        },\n                        {\n                            name: 'release-1.6.x',\n                            commit: 'a15d0e635064a2e1929ce1bf3bc8d4aa65738b64',\n                            'default': false,\n                        },\n                    ],\n                });\n            });\n\n            collection.fetch();\n\n            expect($.ajax).toHaveBeenCalled();\n            expect(collection.length).toBe(3);\n            expect(collection.at(0).get('name')).toBe('master');\n            expect(collection.at(1).get('commit'))\n                .toBe('92463764015ef463b4b6d1a1825fee7aeec8cb15');\n            expect(collection.at(2).get('isDefault')).toBe(false);\n\n            expect(collection.reduce(\n                (memo, item) => (memo + item.get('isDefault') ? 1 : 0), 0))\n                .toBe(1);\n        });\n    });\n});\n"],"mappings":";;AAAAA,KAAK,CAAC,6CAAD,EAAgD,YAAW;EAC5D,IAAIC,UAAJ;EAEAC,UAAU,CAAC,YAAW;IAClBD,UAAU,GAAG,IAAIE,EAAE,CAACC,kBAAP,EAAb;IACAH,UAAU,CAACI,GAAX,GAAiB,iCAAjB;EACH,CAHS,CAAV;EAKAC,QAAQ,CAAC,SAAD,EAAY,YAAW;IAC3BC,EAAE,CAAC,OAAD,EAAU,YAAW;MACnBC,KAAK,CAACC,CAAD,EAAI,MAAJ,CAAL,CAAiBC,GAAjB,CAAqBC,QAArB,CAA8BC,OAAO,IAAI;QACrCC,MAAM,CAACD,OAAO,CAACP,GAAT,CAAN,CACKS,IADL,CACU,iCADV;QAEAD,MAAM,CAACD,OAAO,CAACG,IAAT,CAAN,CAAqBD,IAArB,CAA0B,KAA1B;QAEAF,OAAO,CAACI,OAAR,CAAgB;UACZC,IAAI,EAAE,IADM;UAEZC,QAAQ,EAAE,CACN;YACIC,IAAI,EAAE,QADV;YAEIC,MAAM,EAAE,0CAFZ;YAGI,WAAW;UAHf,CADM,EAMN;YACID,IAAI,EAAE,eADV;YAEIC,MAAM,EAAE,0CAFZ;YAGI,WAAW;UAHf,CANM,EAWN;YACID,IAAI,EAAE,eADV;YAEIC,MAAM,EAAE,0CAFZ;YAGI,WAAW;UAHf,CAXM;QAFE,CAAhB;MAoBH,CAzBD;MA2BAnB,UAAU,CAACoB,KAAX;MAEAR,MAAM,CAACJ,CAAC,CAACa,IAAH,CAAN,CAAeC,gBAAf;MACAV,MAAM,CAACZ,UAAU,CAACuB,MAAZ,CAAN,CAA0BV,IAA1B,CAA+B,CAA/B;MACAD,MAAM,CAACZ,UAAU,CAACwB,EAAX,CAAc,CAAd,EAAiBC,GAAjB,CAAqB,MAArB,CAAD,CAAN,CAAqCZ,IAArC,CAA0C,QAA1C;MACAD,MAAM,CAACZ,UAAU,CAACwB,EAAX,CAAc,CAAd,EAAiBC,GAAjB,CAAqB,QAArB,CAAD,CAAN,CACKZ,IADL,CACU,0CADV;MAEAD,MAAM,CAACZ,UAAU,CAACwB,EAAX,CAAc,CAAd,EAAiBC,GAAjB,CAAqB,WAArB,CAAD,CAAN,CAA0CZ,IAA1C,CAA+C,KAA/C;MAEAD,MAAM,CAACZ,UAAU,CAAC0B,MAAX,CACH,CAACC,IAAD,EAAOC,IAAP,KAAiBD,IAAI,GAAGC,IAAI,CAACH,GAAL,CAAS,WAAT,CAAP,GAA+B,CAA/B,GAAmC,CADjD,EACqD,CADrD,CAAD,CAAN,CAEKZ,IAFL,CAEU,CAFV;IAGH,CAxCC,CAAF;EAyCH,CA1CO,CAAR;AA2CH,CAnDI,CAAL"}