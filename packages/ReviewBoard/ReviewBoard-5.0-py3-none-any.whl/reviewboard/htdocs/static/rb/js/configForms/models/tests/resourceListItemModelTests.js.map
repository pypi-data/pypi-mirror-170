{"version":3,"file":"resourceListItemModelTests.js","names":["suite","TestListItem","RB","Config","ResourceListItem","extend","syncAttrs","createResource","attrs","DefaultReviewer","resource","beforeEach","name","fileRegex","describe","it","listItem","set","expect","get","toBe","id","spyOn","trigger","toHaveBeenCalledWith","undefined"],"sources":["../../../../../../../static/rb/js/configForms/models/tests/resourceListItemModelTests.es6.js"],"sourcesContent":["suite('rb/configForms/models/ResourceListItem', function() {\n    const TestListItem = RB.Config.ResourceListItem.extend({\n        syncAttrs: ['name', 'fileRegex'],\n        createResource: attrs => new RB.DefaultReviewer(attrs),\n    });\n    let resource;\n\n    beforeEach(function() {\n        resource = new RB.DefaultReviewer({\n            name: 'my-name',\n            fileRegex: '.*',\n        });\n    });\n\n    describe('Synchronizing attributes', function() {\n        it('On resource attribute change', function() {\n            const listItem = new TestListItem({\n                resource: resource,\n            });\n\n            resource.set('name', 'foo');\n\n            expect(listItem.get('name')).toBe('foo');\n        });\n\n        describe('On creation', function() {\n            it('With existing resource', function() {\n                const listItem = new TestListItem({\n                    resource: resource,\n                    name: 'dummy',\n                    fileRegex: '/foo/.*',\n                });\n\n                expect(listItem.get('name')).toBe('my-name');\n                expect(listItem.get('fileRegex')).toBe('.*');\n            });\n\n            it('With created resource', function() {\n                const listItem = new TestListItem({\n                    id: 123,\n                    name: 'new-name',\n                    fileRegex: '/foo/.*',\n                });\n\n                expect(listItem.get('name')).toBe('new-name');\n                expect(listItem.get('fileRegex')).toBe('/foo/.*');\n\n                resource = listItem.get('resource');\n                expect(resource.id).toBe(123);\n                expect(resource.get('name')).toBe('new-name');\n                expect(resource.get('fileRegex')).toBe('/foo/.*');\n            });\n        });\n    });\n\n    describe('Event mirroring', function() {\n        let listItem;\n\n        beforeEach(function() {\n            listItem = new TestListItem({\n                resource: resource,\n            });\n\n            spyOn(listItem, 'trigger');\n        });\n\n        it('destroy', function() {\n            resource.trigger('destroy');\n            expect(listItem.trigger).toHaveBeenCalledWith(\n                'destroy', listItem, undefined, {});\n        });\n\n        it('request', function() {\n            resource.trigger('request');\n            expect(listItem.trigger).toHaveBeenCalledWith('request');\n        });\n\n        it('sync', function() {\n            resource.trigger('sync');\n            expect(listItem.trigger).toHaveBeenCalledWith('sync');\n        });\n    });\n});\n"],"mappings":"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"}