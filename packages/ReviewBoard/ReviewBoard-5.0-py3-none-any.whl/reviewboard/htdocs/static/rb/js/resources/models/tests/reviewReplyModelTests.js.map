{"version":3,"file":"reviewReplyModelTests.js","names":["suite","parentObject","model","beforeEach","RB","BaseResource","links","replies","href","ReviewReply","describe","callbacks","spyOn","Backbone","Model","prototype","and","callFake","options","success","callThrough","resolveTo","it","expect","isNew","toBe","get","_","isFunction","error","status","destroy","ready","toHaveBeenCalled","_retrieveDraft","fetch","set","id","loaded","not","discarded","discardIfEmpty","commentsData","self","diff_comments","screenshot_comments","file_attachment_comments","general_comments","data","key","find","COMMENT_LINK_NAMES","name","url","bodyTop","bodyBottom","done","console","warn","fail","_needDraft","undefined","calls","reset","rspNamespace","parse","stat","my_reply","body_top","body_bottom","body_top_text_type","body_bottom_text_type","public","bodyTopRichText","bodyBottomRichText","toJSON","force_text_type","include_text_types"],"sources":["../../../../../../../static/rb/js/resources/models/tests/reviewReplyModelTests.es6.js"],"sourcesContent":["suite('rb/resources/models/ReviewReply', function() {\n    let parentObject;\n    let model;\n\n    beforeEach(function() {\n        parentObject = new RB.BaseResource({\n            'public': true,\n            links: {\n                replies: {\n                    href: '/api/foos/replies/',\n                },\n            },\n        });\n\n        model = new RB.ReviewReply({\n            parentObject: parentObject,\n        });\n    });\n\n    describe('destroy', function() {\n        let callbacks;\n\n        beforeEach(function() {\n            spyOn(Backbone.Model.prototype, 'destroy')\n                .and.callFake(options => options.success());\n            spyOn(model, '_retrieveDraft').and.callThrough();\n            spyOn(parentObject, 'ready').and.resolveTo();\n        });\n\n        it('With isNew=true', async function() {\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n\n            spyOn(Backbone.Model.prototype, 'fetch')\n                .and.callFake(options => {\n                    if (options && _.isFunction(options.success)) {\n                        options.error(model, {\n                            status: 404,\n                        });\n                    }\n                });\n\n            await model.destroy();\n\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n\n            expect(parentObject.ready).toHaveBeenCalled();\n            expect(model._retrieveDraft).toHaveBeenCalled();\n            expect(Backbone.Model.prototype.fetch).toHaveBeenCalled();\n            expect(Backbone.Model.prototype.destroy).toHaveBeenCalled();\n        });\n\n        it('With isNew=false', async function() {\n            model.set({\n                id: 123,\n                loaded: true,\n            });\n\n            spyOn(Backbone.Model.prototype, 'fetch');\n\n            await model.destroy();\n\n            expect(parentObject.ready).toHaveBeenCalled();\n            expect(model._retrieveDraft).not.toHaveBeenCalled();\n            expect(Backbone.Model.prototype.fetch).not.toHaveBeenCalled();\n            expect(Backbone.Model.prototype.destroy).toHaveBeenCalled();\n        });\n    });\n\n    describe('discardIfEmpty', function() {\n        beforeEach(function() {\n            spyOn(model, 'destroy').and.resolveTo();\n            spyOn(parentObject, 'ready').and.resolveTo();\n            spyOn(model, 'ready').and.resolveTo();\n        });\n\n        it('With isNew=true', async function() {\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n\n            const discarded = await model.discardIfEmpty();\n\n            expect(model.destroy).not.toHaveBeenCalled();\n            expect(discarded).toBe(false);\n        });\n\n        describe('With isNew=false', function() {\n            let commentsData;\n\n            beforeEach(function() {\n                commentsData = {};\n                model.set({\n                    id: 123,\n                    loaded: true,\n                    links: {\n                        self: {\n                            href: '/api/foos/replies/123/',\n                        },\n                        diff_comments: {\n                            href: '/api/diff-comments/',\n                        },\n                        screenshot_comments: {\n                            href: '/api/screenshot-comments/',\n                        },\n                        file_attachment_comments: {\n                            href: '/api/file-attachment-comments/',\n                        },\n                        general_comments: {\n                            href: '/api/general-comments/',\n                        },\n                    },\n                });\n\n                spyOn(RB, 'apiCall').and.callFake(options => {\n                    const links = model.get('links');\n                    const data = {};\n                    const key = _.find(\n                        RB.ReviewReply.prototype.COMMENT_LINK_NAMES,\n                        name => (options.url === links[name].href));\n\n                    if (key) {\n                        data[key] = commentsData[key] || [];\n                        options.success(data);\n                    } else {\n                        options.error({\n                            status: 404,\n                        });\n                    }\n                });\n                spyOn(Backbone.Model.prototype, 'fetch')\n                    .and.callFake(options => {\n                        if (options && _.isFunction(options.success)) {\n                            options.success();\n                        }\n                    });\n            });\n\n            it('With no comments or body replies', async function() {\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(true);\n                expect(model.destroy).toHaveBeenCalled();\n            });\n\n            it('With bodyTop', async function() {\n                model.set({\n                    bodyTop: 'hi',\n                });\n\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(false);\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With bodyBottom', async function() {\n                model.set({\n                    bodyBottom: 'hi',\n                });\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(false);\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With diff comment', async function() {\n                commentsData.diff_comments = [{\n                    id: 1,\n                }];\n\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(false);\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With screenshot comment', async function() {\n                commentsData.screenshot_comments = [{\n                    id: 1,\n                }];\n\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(false);\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With file attachment comment', async function() {\n                commentsData.file_attachment_comments = [{\n                    id: 1,\n                }];\n\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(false);\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With general comment', async function() {\n                commentsData.general_comments = [{\n                    id: 1,\n                }];\n\n                const discarded = await model.discardIfEmpty();\n                expect(discarded).toBe(false);\n                expect(model.destroy).not.toHaveBeenCalled();\n            });\n\n            it('With callbacks', function(done) {\n                spyOn(console, 'warn');\n\n                model.discardIfEmpty({\n                    success: discarded => {\n                        expect(discarded).toBe(true);\n                        expect(model.destroy).toHaveBeenCalled();\n                        expect(console.warn).toHaveBeenCalled();\n\n                        done();\n                    },\n                    error: () => done.fail(),\n                });\n            });\n        });\n    });\n\n    describe('ready', function() {\n        beforeEach(function() {\n            spyOn(parentObject, 'ready').and.resolveTo();\n        });\n\n        it('With isNew=true', async function() {\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n\n            spyOn(Backbone.Model.prototype, 'fetch').and.resolveTo();\n            spyOn(model, '_retrieveDraft').and.resolveTo();\n\n            await model.ready();\n\n            expect(parentObject.ready).toHaveBeenCalled();\n            expect(model._retrieveDraft).toHaveBeenCalled();\n        });\n\n        it('With isNew=false', async function() {\n            model.set({\n                id: 123,\n            });\n\n            spyOn(Backbone.Model.prototype, 'fetch')\n                .and.callFake(options => {\n                    if (options && _.isFunction(options.success)) {\n                        options.success();\n                    }\n                });\n            spyOn(model, '_retrieveDraft').and.resolveTo();\n\n            await model.ready();\n            expect(parentObject.ready).toHaveBeenCalled();\n            expect(model._retrieveDraft).not.toHaveBeenCalled();\n        });\n\n        it('After destruction', async function() {\n            spyOn(model, '_retrieveDraft').and.callThrough();\n\n            spyOn(Backbone.Model.prototype, 'fetch').and.callFake(options => {\n                model.set({\n                    id: 123,\n                    links: {\n                        self: {\n                            href: '/api/foos/replies/123/',\n                        },\n                    },\n                    loaded: true,\n                });\n\n                options.success();\n            });\n\n            spyOn(Backbone.Model.prototype, 'destroy').and.callFake(\n                options => options.success());\n\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n            expect(model._needDraft).toBe(undefined);\n\n            /* Make our initial ready call. */\n            await model.ready();\n\n            expect(parentObject.ready).toHaveBeenCalled();\n            expect(model._retrieveDraft).toHaveBeenCalled();\n            expect(Backbone.Model.prototype.fetch).toHaveBeenCalled();\n            expect(model.isNew()).toBe(false);\n            expect(model.get('loaded')).toBe(true);\n            expect(model._needDraft).toBe(false);\n\n            /* We have a loaded object. Reset it. */\n            await model.destroy();\n\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n            expect(model._needDraft).toBe(true);\n\n            parentObject.ready.calls.reset();\n            model._retrieveDraft.calls.reset();\n\n            /* Now that it's destroyed, try to fetch it again. */\n            await model.ready();\n\n            expect(model._retrieveDraft).toHaveBeenCalled();\n            expect(Backbone.Model.prototype.fetch).toHaveBeenCalled();\n            expect(model._needDraft).toBe(false);\n        });\n\n        it('With callbacks', function(done) {\n            expect(model.isNew()).toBe(true);\n            expect(model.get('loaded')).toBe(false);\n\n            spyOn(Backbone.Model.prototype, 'fetch')\n                .and.callFake(options => {\n                    if (options && _.isFunction(options.success)) {\n                        options.success();\n                    }\n                });\n            spyOn(model, '_retrieveDraft').and.resolveTo();\n            spyOn(console, 'warn');\n\n            model.ready({\n                success: () => {\n                    expect(parentObject.ready).toHaveBeenCalled();\n                    expect(model._retrieveDraft).toHaveBeenCalled();\n                    expect(console.warn).toHaveBeenCalled();\n\n                    done();\n                },\n                error: () => done.fail(),\n            });\n        });\n    });\n\n    describe('parse', function() {\n        beforeEach(function() {\n            model.rspNamespace = 'my_reply';\n        });\n\n        it('API payloads', function() {\n            var data = model.parse({\n                stat: 'ok',\n                my_reply: {\n                    id: 42,\n                    body_top: 'foo',\n                    body_bottom: 'bar',\n                    'public': false,\n                    body_top_text_type: 'markdown',\n                    body_bottom_text_type: 'plain',\n                },\n            });\n\n            expect(data).not.toBe(undefined);\n            expect(data.id).toBe(42);\n            expect(data.bodyTop).toBe('foo');\n            expect(data.bodyBottom).toBe('bar');\n            expect(data.public).toBe(false);\n            expect(data.bodyTopRichText).toBe(true);\n            expect(data.bodyBottomRichText).toBe(false);\n        });\n    });\n\n    describe('toJSON', function() {\n        describe('bodyTop field', function() {\n            it('With value', function() {\n                model.set('bodyTop', 'foo');\n                const data = model.toJSON();\n                expect(data.body_top).toBe('foo');\n            });\n        });\n\n        describe('bodyBottom field', function() {\n            it('With value', function() {\n                model.set('bodyBottom', 'foo');\n                const data = model.toJSON();\n                expect(data.body_bottom).toBe('foo');\n            });\n        });\n\n        describe('bodyTopRichText field', function() {\n            it('With true', function() {\n                model.set('bodyTopRichText', true);\n                const data = model.toJSON();\n                expect(data.body_top_text_type).toBe('markdown');\n            });\n\n            it('With false', function() {\n                model.set('bodyTopRichText', false);\n                const data = model.toJSON();\n                expect(data.body_top_text_type).toBe('plain');\n            });\n        });\n\n        describe('bodyBottomRichText field', function() {\n            it('With true', function() {\n                model.set('bodyBottomRichText', true);\n                const data = model.toJSON();\n                expect(data.body_bottom_text_type).toBe('markdown');\n            });\n\n            it('With false', function() {\n                model.set('bodyBottomRichText', false);\n                const data = model.toJSON();\n                expect(data.body_bottom_text_type).toBe('plain');\n            });\n        });\n\n        describe('force_text_type field', function() {\n            it('With value', function() {\n                model.set('forceTextType', 'html');\n                const data = model.toJSON();\n                expect(data.force_text_type).toBe('html');\n            });\n\n            it('Without value', function() {\n                const data = model.toJSON();\n                expect(data.force_text_type).toBe(undefined);\n            });\n        });\n\n        describe('include_text_types field', function() {\n            it('With value', function() {\n                model.set('includeTextTypes', 'html');\n                const data = model.toJSON();\n                expect(data.include_text_types).toBe('html');\n            });\n\n            it('Without value', function() {\n                const data = model.toJSON();\n                expect(data.include_text_types).toBe(undefined);\n            });\n        });\n\n        describe('public field', function() {\n            it('With value', function() {\n                model.set('public', true);\n                const data = model.toJSON();\n                expect(data.public).toBe(true);\n            });\n        });\n    });\n});\n"],"mappings":"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"}