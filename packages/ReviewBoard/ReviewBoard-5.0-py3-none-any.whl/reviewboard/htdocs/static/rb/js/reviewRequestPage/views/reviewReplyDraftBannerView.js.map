{"version":3,"file":"reviewReplyDraftBannerView.js","names":["RB","ReviewRequestPage","ReviewReplyDraftBannerView","FloatingBannerView","extend","className","template","_","events","render","prototype","call","reviewRequestEditor","options","$el","html","draftText","reminderText","publishText","discardText","sendEmailText","showSendEmail","get","listenTo","model","$","prop","errorText","alert","_onPublishClicked","$sendEmail","publish","trivial","length","is","_onDiscardClicked","destroy"],"sources":["../../../../../../static/rb/js/reviewRequestPage/views/reviewReplyDraftBannerView.es6.js"],"sourcesContent":["/**\n * A banner that represents a pending reply to a review.\n *\n * The banner offers actions for publishing and discarding the review.\n */\nRB.ReviewRequestPage.ReviewReplyDraftBannerView = RB.FloatingBannerView.extend({\n    className: 'banner',\n\n    template: _.template(dedent`\n        <h1><%- draftText %></h1>\n        <p><%- reminderText %></p>\n        <span class=\"banner-actions\">\n         <input type=\"button\" value=\"<%- publishText %>\"\n                class=\"publish-button\" />\n         <input type=\"button\" value=\"<%- discardText %>\"\n                class=\"discard-button\" />\n        </span>\n        <% if (showSendEmail) { %>\n         <label>\n          <input type=\"checkbox\" class=\"send-email\" checked />\n          <%- sendEmailText %>\n        </label>\n        <% } %>\n    `),\n\n    events: {\n        'click .publish-button': '_onPublishClicked',\n        'click .discard-button': '_onDiscardClicked',\n    },\n\n    /**\n     * Render the banner.\n     *\n     * Returns:\n     *     RB.ReviewRequestPage.ReviewReplyDraftBannerView:\n     *     This object, for chaining.\n     */\n    render() {\n        RB.FloatingBannerView.prototype.render.call(this);\n\n        const reviewRequestEditor = this.options.reviewRequestEditor;\n\n        this.$el.html(this.template({\n            draftText: gettext('This reply is a draft.'),\n            reminderText: gettext('Be sure to publish when finished.'),\n            publishText: gettext('Publish'),\n            discardText: gettext('Discard'),\n            sendEmailText: gettext('Send E-Mail'),\n            showSendEmail: reviewRequestEditor.get('showSendEmail'),\n        }));\n\n        this.listenTo(this.model, 'saving destroying',\n                      () => this.$('input').prop('disabled', true));\n        this.listenTo(this.model, 'saved',\n                      () => this.$('input').prop('disabled', false));\n        this.listenTo(this.model, 'publishError',\n                      errorText => alert(errorText));\n\n        return this;\n    },\n\n    /**\n     * Handler for when Publish is clicked.\n     *\n     * Publishes the reply.\n     */\n    _onPublishClicked() {\n        const $sendEmail = this.$('.send-email');\n\n        this.model.publish({\n            trivial: $sendEmail.length === 1 && !$sendEmail.is(':checked'),\n        });\n    },\n\n    /**\n     * Handler for when Discard is clicked.\n     *\n     * Discards the reply.\n     */\n    _onDiscardClicked() {\n        this.model.destroy();\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,iBAAH,CAAqBC,0BAArB,GAAkDF,EAAE,CAACG,kBAAH,CAAsBC,MAAtB,CAA6B;EAC3EC,SAAS,EAAE,QADgE;EAG3EC,QAAQ,EAAEC,CAAC,CAACD,QAAF,CAAkB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAbc,CAHiE;EAoB3EE,MAAM,EAAE;IACJ,yBAAyB,mBADrB;IAEJ,yBAAyB;EAFrB,CApBmE;;EAyB3E;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,MAAM,GAAG;IACLT,EAAE,CAACG,kBAAH,CAAsBO,SAAtB,CAAgCD,MAAhC,CAAuCE,IAAvC,CAA4C,IAA5C;IAEA,MAAMC,mBAAmB,GAAG,KAAKC,OAAL,CAAaD,mBAAzC;IAEA,KAAKE,GAAL,CAASC,IAAT,CAAc,KAAKT,QAAL,CAAc;MACxBU,SAAS,mCADe;MAExBC,YAAY,8CAFY;MAGxBC,WAAW,oBAHa;MAIxBC,WAAW,oBAJa;MAKxBC,aAAa,wBALW;MAMxBC,aAAa,EAAET,mBAAmB,CAACU,GAApB,CAAwB,eAAxB;IANS,CAAd,CAAd;IASA,KAAKC,QAAL,CAAc,KAAKC,KAAnB,EAA0B,mBAA1B,EACc,MAAM,KAAKC,CAAL,CAAO,OAAP,EAAgBC,IAAhB,CAAqB,UAArB,EAAiC,IAAjC,CADpB;IAEA,KAAKH,QAAL,CAAc,KAAKC,KAAnB,EAA0B,OAA1B,EACc,MAAM,KAAKC,CAAL,CAAO,OAAP,EAAgBC,IAAhB,CAAqB,UAArB,EAAiC,KAAjC,CADpB;IAEA,KAAKH,QAAL,CAAc,KAAKC,KAAnB,EAA0B,cAA1B,EACcG,SAAS,IAAIC,KAAK,CAACD,SAAD,CADhC;IAGA,OAAO,IAAP;EACH,CAtD0E;;EAwD3E;AACJ;AACA;AACA;AACA;EACIE,iBAAiB,GAAG;IAChB,MAAMC,UAAU,GAAG,KAAKL,CAAL,CAAO,aAAP,CAAnB;IAEA,KAAKD,KAAL,CAAWO,OAAX,CAAmB;MACfC,OAAO,EAAEF,UAAU,CAACG,MAAX,KAAsB,CAAtB,IAA2B,CAACH,UAAU,CAACI,EAAX,CAAc,UAAd;IADtB,CAAnB;EAGH,CAnE0E;;EAqE3E;AACJ;AACA;AACA;AACA;EACIC,iBAAiB,GAAG;IAChB,KAAKX,KAAL,CAAWY,OAAX;EACH;;AA5E0E,CAA7B,CAAlD"}