{"version":3,"file":"draftResourceChildModelMixin.js","names":["RB","DraftResourceChildModelMixin","destroy","options","context","undefined","_","isFunction","success","error","complete","console","warn","promiseToCallbacks","newOptions","get","ensureCreated","_super","call","ready"],"sources":["../../../../../../static/rb/js/resources/models/draftResourceChildModelMixin.es6.js"],"sourcesContent":["/**\n * Mixin for resources that are children of a draft resource.\n *\n * This will ensure that the draft is in a proper state before operating\n * on the resource.\n */\nRB.DraftResourceChildModelMixin = {\n    /**\n     * Delete the object's resource on the server.\n     *\n     * This will ensure the draft is created before deleting the object,\n     * in order to record the deletion as part of the draft.\n     *\n     * Args:\n     *     options (object, optional):\n     *         Options for the operation, including callbacks.\n     *\n     *     context (object, optional):\n     *         Context to bind when calling callbacks.\n     *\n     * Returns:\n     *     Promise:\n     *     A promise which resolves when the operation is complete.\n     */\n    async destroy(options={}, context=undefined) {\n        if (_.isFunction(options.success) ||\n            _.isFunction(options.error) ||\n            _.isFunction(options.complete)) {\n            console.warn('RB.DraftResourceChildModelMixin.destroy was ' +\n                         'called using callbacks. Callers should be updated ' +\n                         'to use promises instead.');\n            return RB.promiseToCallbacks(\n                options, context, newOptions => this.destroy(newOptions));\n        }\n\n        await this.get('parentObject').ensureCreated();\n        await _super(this).destroy.call(this, options);\n    },\n\n    /**\n     * Call a function when the object is ready to use.\n     *\n     * This will ensure the draft is created before ensuring the object\n     * is ready.\n     *\n     * Version Changed:\n     *     5.0:\n     *     Deprecated callbacks and changed to return a promise.\n     *\n     * Args:\n     *     options (object, optional):\n     *         Options for the operation, including callbacks.\n     *\n     *     context (object, optional):\n     *         Context to bind when calling callbacks.\n     *\n     * Returns:\n     *     Promise:\n     *     A promise which resolves when the operation is complete.\n     */\n    async ready(options={}, context=undefined) {\n        if (_.isFunction(options.success) ||\n            _.isFunction(options.error) ||\n            _.isFunction(options.complete) ||\n            _.isFunction(options.ready)) {\n            console.warn('RB.DraftResourceChildModelMixin.ready was ' +\n                         'called using callbacks. Callers should be updated ' +\n                         'to use promises instead.');\n            return RB.promiseToCallbacks(\n                options, context, newOptions => this.ready());\n        }\n\n        await this.get('parentObject').ensureCreated();\n        await _super(this).ready.call(this);\n    },\n};\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,4BAAH,GAAkC;EAC9B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,MAAMC,OAAN,GAA6C;IAAA,IAA/BC,OAA+B,uEAAvB,EAAuB;IAAA,IAAnBC,OAAmB,uEAAXC,SAAW;;IACzC,IAAIC,CAAC,CAACC,UAAF,CAAaJ,OAAO,CAACK,OAArB,KACAF,CAAC,CAACC,UAAF,CAAaJ,OAAO,CAACM,KAArB,CADA,IAEAH,CAAC,CAACC,UAAF,CAAaJ,OAAO,CAACO,QAArB,CAFJ,EAEoC;MAChCC,OAAO,CAACC,IAAR,CAAa,iDACA,oDADA,GAEA,0BAFb;MAGA,OAAOZ,EAAE,CAACa,kBAAH,CACHV,OADG,EACMC,OADN,EACeU,UAAU,IAAI,KAAKZ,OAAL,CAAaY,UAAb,CAD7B,CAAP;IAEH;;IAED,MAAM,KAAKC,GAAL,CAAS,cAAT,EAAyBC,aAAzB,EAAN;IACA,MAAMC,MAAM,CAAC,IAAD,CAAN,CAAaf,OAAb,CAAqBgB,IAArB,CAA0B,IAA1B,EAAgCf,OAAhC,CAAN;EACH,CA/B6B;;EAiC9B;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,MAAMgB,KAAN,GAA2C;IAAA,IAA/BhB,OAA+B,uEAAvB,EAAuB;IAAA,IAAnBC,OAAmB,uEAAXC,SAAW;;IACvC,IAAIC,CAAC,CAACC,UAAF,CAAaJ,OAAO,CAACK,OAArB,KACAF,CAAC,CAACC,UAAF,CAAaJ,OAAO,CAACM,KAArB,CADA,IAEAH,CAAC,CAACC,UAAF,CAAaJ,OAAO,CAACO,QAArB,CAFA,IAGAJ,CAAC,CAACC,UAAF,CAAaJ,OAAO,CAACgB,KAArB,CAHJ,EAGiC;MAC7BR,OAAO,CAACC,IAAR,CAAa,+CACA,oDADA,GAEA,0BAFb;MAGA,OAAOZ,EAAE,CAACa,kBAAH,CACHV,OADG,EACMC,OADN,EACeU,UAAU,IAAI,KAAKK,KAAL,EAD7B,CAAP;IAEH;;IAED,MAAM,KAAKJ,GAAL,CAAS,cAAT,EAAyBC,aAAzB,EAAN;IACA,MAAMC,MAAM,CAAC,IAAD,CAAN,CAAaE,KAAb,CAAmBD,IAAnB,CAAwB,IAAxB,CAAN;EACH;;AApE6B,CAAlC"}