{"version":3,"file":"urlUtilsTests.js","names":["suite","describe","beforeEach","window","xss","afterEach","hasOwnProperty","it","done","spyOn","url","hash","RB","getLocationHash","$","_","delay","expect","not","toHaveBeenCalled"],"sources":["../../../../../../static/rb/js/utils/tests/urlUtilsTests.es6.js"],"sourcesContent":["suite('rb/utils/urlUtils', function() {\n    describe('getLocationHash', function() {\n        beforeEach(function() {\n            window.xss = function() {};\n        });\n\n        afterEach(function() {\n            if (window.hasOwnProperty('xss')) {\n                delete window.xss;\n            }\n        });\n\n        it('Prevents XSS injection', function(done) {\n            spyOn(window, 'xss');\n\n            const url = 'http://www.example.com/#<img/src/onerror=window.xss()>';\n            const hash = RB.getLocationHash(url);\n\n            $(`a[name=\"${hash}\"]`);\n\n            _.delay(function() {\n                expect(window.xss).not.toHaveBeenCalled();\n                done();\n            });\n        });\n    });\n});\n"],"mappings":";;AAAAA,KAAK,CAAC,mBAAD,EAAsB,YAAW;EAClCC,QAAQ,CAAC,iBAAD,EAAoB,YAAW;IACnCC,UAAU,CAAC,YAAW;MAClBC,MAAM,CAACC,GAAP,GAAa,YAAW,CAAE,CAA1B;IACH,CAFS,CAAV;IAIAC,SAAS,CAAC,YAAW;MACjB,IAAIF,MAAM,CAACG,cAAP,CAAsB,KAAtB,CAAJ,EAAkC;QAC9B,OAAOH,MAAM,CAACC,GAAd;MACH;IACJ,CAJQ,CAAT;IAMAG,EAAE,CAAC,wBAAD,EAA2B,UAASC,IAAT,EAAe;MACxCC,KAAK,CAACN,MAAD,EAAS,KAAT,CAAL;MAEA,MAAMO,GAAG,GAAG,wDAAZ;MACA,MAAMC,IAAI,GAAGC,EAAE,CAACC,eAAH,CAAmBH,GAAnB,CAAb;MAEAI,CAAC,CAAE,WAAUH,IAAK,IAAjB,CAAD;;MAEAI,CAAC,CAACC,KAAF,CAAQ,YAAW;QACfC,MAAM,CAACd,MAAM,CAACC,GAAR,CAAN,CAAmBc,GAAnB,CAAuBC,gBAAvB;QACAX,IAAI;MACP,CAHD;IAIH,CAZC,CAAF;EAaH,CAxBO,CAAR;AAyBH,CA1BI,CAAL"}