{"version":3,"file":"screenshotCommentModelTests.js","names":["suite","strings","RB","ScreenshotComment","model","beforeEach","screenshotID","parentObject","BaseResource","x","y","width","height","describe","it","data","parse","stat","screenshot_comment","id","issue_opened","issue_status","text_type","text","w","h","thumbnail_url","screenshot","filename","expect","not","toBe","undefined","issueOpened","issueStatus","BaseComment","STATE_RESOLVED","richText","thumbnailURL","get","spyOn","prototype","and","callThrough","toJSON","toHaveBeenCalled","set","force_text_type","include_text_types","validate","INVALID_X","INVALID_Y","INVALID_WIDTH","INVALID_HEIGHT"],"sources":["../../../../../../../static/rb/js/resources/models/tests/screenshotCommentModelTests.es6.js"],"sourcesContent":["suite('rb/resources/models/ScreenshotComment', function() {\n    const strings = RB.ScreenshotComment.strings;\n    let model;\n\n    beforeEach(function() {\n        /* Set some sane defaults needed to pass validation. */\n        model = new RB.ScreenshotComment({\n            screenshotID: 16,\n            parentObject: new RB.BaseResource({\n                'public': true,\n            }),\n            x: 0,\n            y: 0,\n            width: 1,\n            height: 1,\n        });\n    });\n\n    describe('parse', function() {\n        it('API payloads', function() {\n            const data = model.parse({\n                stat: 'ok',\n                screenshot_comment: {\n                    id: 42,\n                    issue_opened: true,\n                    issue_status: 'resolved',\n                    text_type: 'markdown',\n                    text: 'foo',\n                    x: 10,\n                    y: 20,\n                    w: 30,\n                    h: 40,\n                    thumbnail_url: '/thumbnail.png',\n                    screenshot: {\n                        id: 10,\n                        filename: 'image.png',\n                    },\n                },\n            });\n\n            expect(data).not.toBe(undefined);\n            expect(data.id).toBe(42);\n            expect(data.issueOpened).toBe(true);\n            expect(data.issueStatus).toBe(RB.BaseComment.STATE_RESOLVED);\n            expect(data.richText).toBe(true);\n            expect(data.text).toBe('foo');\n            expect(data.x).toBe(10);\n            expect(data.y).toBe(20);\n            expect(data.width).toBe(30);\n            expect(data.height).toBe(40);\n            expect(data.thumbnailURL).toBe('/thumbnail.png');\n            expect(data.screenshot).not.toBe(undefined);\n            expect(data.screenshot.id).toBe(10);\n            expect(data.screenshot.get('filename')).toBe('image.png');\n            expect(data.screenshotID).toBe(10);\n        });\n    });\n\n    describe('toJSON', function() {\n        it('BaseComment.toJSON called', function() {\n            spyOn(RB.BaseComment.prototype, 'toJSON').and.callThrough();\n            model.toJSON();\n            expect(RB.BaseComment.prototype.toJSON).toHaveBeenCalled();\n        });\n\n        it('x field', function() {\n            model.set('x', 10);\n            const data = model.toJSON();\n            expect(data.x).toBe(10);\n        });\n\n        it('y field', function() {\n            model.set('y', 10);\n            const data = model.toJSON();\n            expect(data.y).toBe(10);\n        });\n\n        it('w field', function() {\n            model.set('width', 10);\n            const data = model.toJSON();\n            expect(data.w).toBe(10);\n        });\n\n        it('h field', function() {\n            model.set('height', 10);\n            const data = model.toJSON();\n            expect(data.h).toBe(10);\n        });\n\n        describe('force_text_type field', function() {\n            it('With value', function() {\n                model.set('forceTextType', 'html');\n                const data = model.toJSON();\n                expect(data.force_text_type).toBe('html');\n            });\n\n            it('Without value', function() {\n                const data = model.toJSON();\n                expect(data.force_text_type).toBe(undefined);\n            });\n        });\n\n        describe('include_text_types field', function() {\n            it('With value', function() {\n                model.set('includeTextTypes', 'html');\n                const data = model.toJSON();\n                expect(data.include_text_types).toBe('html');\n            });\n\n            it('Without value', function() {\n                const data = model.toJSON();\n                expect(data.include_text_types).toBe(undefined);\n            });\n        });\n    });\n\n    describe('validate', function() {\n        it('Inherited behavior', function() {\n            spyOn(RB.BaseComment.prototype, 'validate');\n            model.validate({});\n            expect(RB.BaseComment.prototype.validate).toHaveBeenCalled();\n        });\n\n        describe('x', function() {\n            describe('Valid values', function() {\n                it('0', function() {\n                    expect(model.validate({\n                        x: 0,\n                    })).toBe(undefined);\n                });\n\n                it('> 0', function() {\n                    expect(model.validate({\n                        x: 10,\n                    })).toBe(undefined);\n                });\n            });\n\n            describe('Invalid values', function() {\n                it('< 0', function() {\n                    expect(model.validate({\n                        x: -1,\n                    })).toBe(strings.INVALID_X);\n                });\n            });\n        });\n\n        describe('y', function() {\n            describe('Valid values', function() {\n                it('0', function() {\n                    expect(model.validate({\n                        y: 0,\n                    })).toBe(undefined);\n                });\n\n                it('> 0', function() {\n                    expect(model.validate({\n                        y: 10,\n                    })).toBe(undefined);\n                });\n            });\n\n            describe('Invalid values', function() {\n                it('< 0', function() {\n                    expect(model.validate({\n                        y: -1,\n                    })).toBe(strings.INVALID_Y);\n                });\n            });\n        });\n\n        describe('width', function() {\n            describe('Valid values', function() {\n                it('> 0', function() {\n                    expect(model.validate({\n                        width: 10,\n                    })).toBe(undefined);\n                });\n            });\n\n            describe('Invalid values', function() {\n                it('0', function() {\n                    expect(model.validate({\n                        width: 0,\n                    })).toBe(strings.INVALID_WIDTH);\n                });\n\n                it('< 0', function() {\n                    expect(model.validate({\n                        width: -1,\n                    })).toBe(strings.INVALID_WIDTH);\n                });\n            });\n        });\n\n        describe('height', function() {\n            describe('Valid values', function() {\n                it('> 0', function() {\n                    expect(model.validate({\n                        height: 10,\n                    })).toBe(undefined);\n                });\n            });\n\n            describe('Invalid values', function() {\n                it('0', function() {\n                    expect(model.validate({\n                        height: 0,\n                    })).toBe(strings.INVALID_HEIGHT);\n                });\n\n                it('< 0', function() {\n                    expect(model.validate({\n                        height: -1,\n                    })).toBe(strings.INVALID_HEIGHT);\n                });\n            });\n        });\n    });\n});\n"],"mappings":"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"}