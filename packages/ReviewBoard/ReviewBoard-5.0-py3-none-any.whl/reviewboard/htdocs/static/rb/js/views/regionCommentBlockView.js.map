{"version":3,"file":"regionCommentBlockView.js","names":["RB","RegionCommentBlockView","AbstractCommentBlockView","extend","className","events","_","defaults","prototype","initialize","_scale","_moveState","hasMoved","initialCursor","initialBounds","dragCallback","noop","bindAll","delegateEvents","call","listenTo","model","_updateBounds","_updateCount","undelegateEvents","$","window","off","_onDrag","stopListening","setSelectionRegionSizeFunc","func","selectionRegionSizeFunc","getSelectionRegionSize","result","_startDragging","left","top","callback","$el","position","width","height","on","_endDragging","defer","_moveTo","region","maxLeft","get","maxTop","newLeft","newTop","set","x","MathUtils","clip","y","_resizeTo","maxWidth","maxHeight","newWidth","newHeight","_onMouseDown","e","canUpdateBounds","preventDefault","stopPropagation","draggingCallback","target","_$flag","_$resizeIcon","pageX","pageY","one","_onWindowMouseUp","saveDraftCommentBounds","hideTooltip","renderContent","addClass","appendTo","positionCommentDlg","commentDlg","positionBeside","side","fitOnScreen","move","text","_onClicked","trigger","setScale","scale"],"sources":["../../../../../static/rb/js/views/regionCommentBlockView.es6.js"],"sourcesContent":["/**\n * Provides a visual region over an image or other document showing comments.\n *\n * This will show a selection rectangle over part of an image or other\n * content indicating there are comments there. It will also show the\n * number of comments, along with a tooltip showing comment summaries.\n *\n * This is meant to be used with a RegionCommentBlock model.\n */\nRB.RegionCommentBlockView = RB.AbstractCommentBlockView.extend({\n    className: 'selection',\n\n    events: _.defaults({\n        'click': '_onClicked',\n        'mousedown': '_onMouseDown'\n    }, RB.AbstractCommentBlockView.prototype.events),\n\n    /**\n     * Initialize RegionCommentBlockView.\n     */\n    initialize() {\n        this._scale = 1.0;\n        this._moveState = {\n            hasMoved: false,\n            initialCursor: {},\n            initialBounds: {},\n            dragCallback: _.noop\n        };\n\n        _.bindAll(this, '_onDrag', '_onWindowMouseUp');\n    },\n\n    /**\n     * Listen to events.\n     */\n    delegateEvents() {\n        RB.AbstractCommentBlockView.prototype.delegateEvents.call(this);\n\n        this.listenTo(\n            this.model,\n            'change:x change:y change:width change:height',\n            this._updateBounds\n        );\n        this.listenTo(this.model, 'change:count', this._updateCount);\n    },\n\n    /**\n     * Un-listen to events.\n     */\n    undelegateEvents() {\n        RB.AbstractCommentBlockView.prototype.undelegateEvents.call(this);\n\n        $(window).off('mousemove', this._onDrag);\n\n        this.stopListening(this.model);\n    },\n\n    /**\n     * Set the selection region size function.\n     *\n     * This function is meant to return the maximum size of the selection\n     * region for the given comment.\n     *\n     * Args:\n     *     func (function):\n     *         A function which will return a size object.\n     */\n    setSelectionRegionSizeFunc(func) {\n        this.selectionRegionSizeFunc = func;\n    },\n\n    /**\n     * Return the selection region size.\n     *\n     * Returns:\n     *     object:\n     *     An object with ``x``, ``y``, ``width``, and ``height`` fields, in\n     *     pixels.\n     */\n    getSelectionRegionSize() {\n        return _.result(this, 'selectionRegionSizeFunc');\n    },\n\n    /**\n     * Initiate a drag operation.\n     *\n     * Args:\n     *     left (number):\n     *         The initial left position of the cursor.\n     *\n     *     top (number):\n     *         The initial top position of the cursor.\n     *\n     *     callback (function):\n     *         A callback function to call once the drag is finished.\n     */\n    _startDragging(left, top, callback) {\n        /*\n         * ``hasMoved`` is used to distinguish dragging from clicking.\n         * ``initialCursor`` and ``initialBounds`` are used to calculate the\n         * new position and size while dragging.\n         */\n        this._moveState.hasMoved = false;\n        this._moveState.initialCursor.left = left;\n        this._moveState.initialCursor.top = top;\n        this._moveState.initialBounds.left = this.$el.position().left;\n        this._moveState.initialBounds.top = this.$el.position().top;\n        this._moveState.initialBounds.width = this.$el.width();\n        this._moveState.initialBounds.height = this.$el.height();\n        this._moveState.dragCallback = callback;\n\n        $(window).on('mousemove', this._onDrag);\n    },\n\n    /**\n     * End a drag operation.\n     */\n    _endDragging() {\n        /*\n         * Unset the dragging flag after the stack unwinds, so that the\n         * click event can handle it properly.\n         */\n        _.defer(() => { this._moveState.hasMoved = false; });\n\n        $(window).off('mousemove', this._onDrag);\n    },\n\n    /**\n     * Move the comment region to a new position.\n     *\n     * Args:\n     *     left (number):\n     *         The new X-coordinate of the mouse at the end of the drag\n     *         operation, relative to the page.\n     *\n     *     top (number):\n     *         The new Y-coordinate of the mouse at the end of the drag\n     *         operation, relative to the page.\n     */\n    _moveTo(left, top) {\n        const region = this.getSelectionRegionSize();\n        const maxLeft = region.width - (this.model.get('width') * this._scale);\n        const maxTop = region.height - (this.model.get('height') * this._scale);\n        const newLeft = (this._moveState.initialBounds.left +\n                         left - this._moveState.initialCursor.left);\n        const newTop = (this._moveState.initialBounds.top +\n                        top - this._moveState.initialCursor.top);\n\n        this.model.set({\n            x: RB.MathUtils.clip(newLeft, 0, maxLeft) / this._scale,\n            y: RB.MathUtils.clip(newTop, 0, maxTop) / this._scale\n        });\n    },\n\n    /*\n     * Resize (change with and height of) the comment block.\n     *\n     * Args:\n     *     left (number):\n     *         The new X-coordinate of the mouse at the end of the drag\n     *         operation, relative to the page.\n     *\n     *     top (number):\n     *         The new Y-coordinate of the mouse at the end of the drag\n     *         operation, relative to the page.\n     */\n    _resizeTo(left, top) {\n        const region = this.getSelectionRegionSize();\n        const maxWidth = region.width - (this.model.get('x') * this._scale);\n        const maxHeight = region.height - (this.model.get('y') * this._scale);\n        const newWidth = (this._moveState.initialBounds.width +\n                          left - this._moveState.initialCursor.left);\n        const newHeight = (this._moveState.initialBounds.height +\n                           top - this._moveState.initialCursor.top);\n\n        this.model.set({\n            width: RB.MathUtils.clip(newWidth, 0, maxWidth) / this._scale,\n            height: RB.MathUtils.clip(newHeight, 0, maxHeight) / this._scale\n        });\n    },\n\n    /**\n     * Handle a mousedown event.\n     *\n     * Mouse-down means one of these in this view:\n     * 1. click\n     * 2. start of dragging to move the comment\n     * 3. start of dragging to resize the comment\n     *\n     * This method looks at ``e.target`` and does the appropriate action.\n     *\n     * Args:\n     *     e (Event):\n     *         The event which triggered the callback.\n     */\n    _onMouseDown(e) {\n        if (this.model.canUpdateBounds()) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            let draggingCallback = null;\n            if (e.target === this._$flag.get(0)) {\n                draggingCallback = this._moveTo;\n            } else if (e.target === this._$resizeIcon.get(0)) {\n                draggingCallback = this._resizeTo;\n            }\n\n            if (draggingCallback) {\n                this._startDragging(e.pageX, e.pageY, draggingCallback);\n\n                $(window).one('mouseup', this._onWindowMouseUp);\n            }\n        }\n    },\n\n    /**\n     * Handle a mouseup event.\n     *\n     * If something has been dragged, end dragging and update the comment's\n     * bounds.\n     *\n     * If not, the event was actually a ``click`` event and we call the\n     * superclass' click handler.\n     */\n    _onWindowMouseUp() {\n        if (this._moveState.hasMoved) {\n            this.model.saveDraftCommentBounds();\n        }\n\n        this._endDragging();\n    },\n\n    /**\n     * Handle a drag event.\n     *\n     * Set moveState.hasMoved to ``true`` to prevent triggering a ``click``\n     * event, and move to view to dragged location.\n     *\n     * Args:\n     *     e (Event):\n     *         The event which triggered the callback.\n     */\n    _onDrag(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this.hideTooltip();\n\n        this._moveState.hasMoved = true;\n        this._moveState.dragCallback.call(this, e.pageX, e.pageY);\n    },\n\n    /**\n     * Render the comment block.\n     *\n     * Along with the block's rectangle, a floating tooltip will also be\n     * created that displays summaries of the comments.\n     */\n    renderContent() {\n        this._updateBounds();\n\n        if (this.model.canUpdateBounds()) {\n            this.$el.addClass('can-update-bound');\n\n            this._$resizeIcon = $('<div class=\"resize-icon\" />')\n                .appendTo(this.$el);\n        }\n\n        this._$flag = $('<div class=\"selection-flag\" />')\n            .appendTo(this.$el);\n\n        this._updateCount();\n    },\n\n    /**\n     * Position the comment dialog to the side of the flag.\n     *\n     * Args:\n     *     commentDlg (RB.CommentDialogView):\n     *         The comment dialog.\n     */\n    positionCommentDlg(commentDlg) {\n        commentDlg.positionBeside(this._$flag, {\n            side: 'b',\n            fitOnScreen: true\n        });\n    },\n\n    /**\n     * Update the position and size of the comment block element.\n     *\n     * The new position and size will reflect the x, y, width, and height\n     * properties in the model.\n     */\n    _updateBounds() {\n        this.$el\n            .move(this.model.get('x') * this._scale,\n                  this.model.get('y') * this._scale,\n                  'absolute')\n            .width(this.model.get('width') * this._scale)\n            .height(this.model.get('height') * this._scale);\n    },\n\n    /**\n     * Update the displayed count of comments.\n     */\n    _updateCount() {\n        if (this._$flag) {\n            this._$flag.text(this.model.get('count'));\n        }\n    },\n\n    /**\n     * Handle a click event.\n     *\n     * If the click event is not the end result of a drag operation, this\n     * will emit the \"clicked\" event on the view.\n     */\n    _onClicked() {\n        if (!this._moveState.hasMoved) {\n            this.trigger('clicked');\n        }\n    },\n\n    /**\n     * Set the zoom scale.\n     *\n     * Args:\n     *     scale (number):\n     *         A scaling factor. 1.0 is a 1:1 pixel ratio, 0.5 is displayed\n     *         at half size, etc.\n     */\n    setScale(scale) {\n        this._scale = scale;\n        this._updateBounds();\n    }\n});\n"],"mappings":"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"}