{"version":3,"file":"webhookFormView.js","names":["RB","WebhookFormView","Backbone","View","extend","events","render","_$encoding","$","_$eventCheckboxes","find","_$allEventsCheckbox","filter","_$applyTo","_$applyToSelected","_$customContentRow","_$reposRow","_$useCustomContent","_codeMirror","CodeMirror","fromTextArea","matchBrackets","mode","append","attr","MANUAL_URL","text","_onAllEventsToggled","_onApplyToChanged","_onEncodingChanged","_onUseCustomContentToggled","not","prop","checked","setVisible","setOption","val"],"sources":["../../../../../../static/rb/js/admin/views/webhookFormView.es6.js"],"sourcesContent":["/**\n * Manages UI for the Add/Edit Webhook form.\n *\n * This will manage the visibility of different page elements, create a\n * CodeMirror for editing, and manage CodeMirror's properties.\n */\nRB.WebhookFormView = Backbone.View.extend({\n    events: {\n        'change #id_apply_to': '_onApplyToChanged',\n        'change #id_encoding': '_onEncodingChanged',\n        'change #id_use_custom_content': '_onUseCustomContentToggled',\n        'change #id_events_0': '_onAllEventsToggled',\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     RB.WebhookFormView:\n     *     This object, for chaining.\n     */\n    render() {\n        this._$encoding = $('#id_encoding');\n        this._$eventCheckboxes = $('#id_events').find('input');\n        this._$allEventsCheckbox = this._$eventCheckboxes.filter('[value=\"*\"]');\n        this._$applyTo = $('#id_apply_to');\n        this._$applyToSelected = this._$applyTo.find('[value=\"S\"]');\n        this._$customContentRow = this.$('.field-custom_content');\n        this._$reposRow = this.$('.field-repositories');\n        this._$useCustomContent = $('#id_use_custom_content');\n\n        this._codeMirror = CodeMirror.fromTextArea($('#id_custom_content')[0], {\n            matchBrackets: true,\n            mode: 'application/json',\n        });\n\n        this._$customContentRow.find('p.help')\n            .append('<br/>')\n            .append(\n                $('<a/>')\n                    .attr('href', MANUAL_URL + 'admin/configuration/webhooks/'\n                          + '#custom-payloads')\n                    .text(gettext('Custom payload reference'))\n                );\n\n        /*\n         * Activate these handlers so that the form will be in the correct\n         * state.\n         */\n        this._onAllEventsToggled();\n        this._onApplyToChanged();\n        this._onEncodingChanged();\n        this._onUseCustomContentToggled();\n\n        return this;\n    },\n\n    /**\n     * Handler for when the All Events checkbox is toggled.\n     *\n     * Sets the other events to be disabled if the checkbox is checked.\n     */\n    _onAllEventsToggled() {\n        this._$eventCheckboxes.not(this._$allEventsCheckbox).prop(\n            'disabled', this._$allEventsCheckbox[0].checked);\n    },\n\n    /**\n     * Handler for when the Apply To radio buttons are changed.\n     *\n     * Toggles the visibility of the Repositories list, depending on the\n     * selected radio button.\n     */\n    _onApplyToChanged() {\n        this._$reposRow.setVisible(this._$applyToSelected[0].checked);\n    },\n\n    /**\n     * Handler for when the Encoding drop-down is changed.\n     *\n     * Sets the CodeMirror mode based on the encoding value.\n     */\n    _onEncodingChanged() {\n        this._codeMirror.setOption('mode', this._$encoding.val());\n    },\n\n    /**\n     * Handler for when the Use Custom Content checkbox is toggled.\n     *\n     * Toggles the visibility of the text box to match the checkbox.\n     */\n    _onUseCustomContentToggled() {\n        this._$customContentRow.setVisible(this._$useCustomContent[0].checked);\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,eAAH,GAAqBC,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB;EACtCC,MAAM,EAAE;IACJ,uBAAuB,mBADnB;IAEJ,uBAAuB,oBAFnB;IAGJ,iCAAiC,4BAH7B;IAIJ,uBAAuB;EAJnB,CAD8B;;EAQtC;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,MAAM,GAAG;IACL,KAAKC,UAAL,GAAkBC,CAAC,CAAC,cAAD,CAAnB;IACA,KAAKC,iBAAL,GAAyBD,CAAC,CAAC,YAAD,CAAD,CAAgBE,IAAhB,CAAqB,OAArB,CAAzB;IACA,KAAKC,mBAAL,GAA2B,KAAKF,iBAAL,CAAuBG,MAAvB,CAA8B,aAA9B,CAA3B;IACA,KAAKC,SAAL,GAAiBL,CAAC,CAAC,cAAD,CAAlB;IACA,KAAKM,iBAAL,GAAyB,KAAKD,SAAL,CAAeH,IAAf,CAAoB,aAApB,CAAzB;IACA,KAAKK,kBAAL,GAA0B,KAAKP,CAAL,CAAO,uBAAP,CAA1B;IACA,KAAKQ,UAAL,GAAkB,KAAKR,CAAL,CAAO,qBAAP,CAAlB;IACA,KAAKS,kBAAL,GAA0BT,CAAC,CAAC,wBAAD,CAA3B;IAEA,KAAKU,WAAL,GAAmBC,UAAU,CAACC,YAAX,CAAwBZ,CAAC,CAAC,oBAAD,CAAD,CAAwB,CAAxB,CAAxB,EAAoD;MACnEa,aAAa,EAAE,IADoD;MAEnEC,IAAI,EAAE;IAF6D,CAApD,CAAnB;;IAKA,KAAKP,kBAAL,CAAwBL,IAAxB,CAA6B,QAA7B,EACKa,MADL,CACY,OADZ,EAEKA,MAFL,CAGQf,CAAC,CAAC,MAAD,CAAD,CACKgB,IADL,CACU,MADV,EACkBC,UAAU,GAAG,+BAAb,GACN,kBAFZ,EAGKC,IAHL,qCAHR;IASA;AACR;AACA;AACA;;;IACQ,KAAKC,mBAAL;;IACA,KAAKC,iBAAL;;IACA,KAAKC,kBAAL;;IACA,KAAKC,0BAAL;;IAEA,OAAO,IAAP;EACH,CAjDqC;;EAmDtC;AACJ;AACA;AACA;AACA;EACIH,mBAAmB,GAAG;IAClB,KAAKlB,iBAAL,CAAuBsB,GAAvB,CAA2B,KAAKpB,mBAAhC,EAAqDqB,IAArD,CACI,UADJ,EACgB,KAAKrB,mBAAL,CAAyB,CAAzB,EAA4BsB,OAD5C;EAEH,CA3DqC;;EA6DtC;AACJ;AACA;AACA;AACA;AACA;EACIL,iBAAiB,GAAG;IAChB,KAAKZ,UAAL,CAAgBkB,UAAhB,CAA2B,KAAKpB,iBAAL,CAAuB,CAAvB,EAA0BmB,OAArD;EACH,CArEqC;;EAuEtC;AACJ;AACA;AACA;AACA;EACIJ,kBAAkB,GAAG;IACjB,KAAKX,WAAL,CAAiBiB,SAAjB,CAA2B,MAA3B,EAAmC,KAAK5B,UAAL,CAAgB6B,GAAhB,EAAnC;EACH,CA9EqC;;EAgFtC;AACJ;AACA;AACA;AACA;EACIN,0BAA0B,GAAG;IACzB,KAAKf,kBAAL,CAAwBmB,UAAxB,CAAmC,KAAKjB,kBAAL,CAAwB,CAAxB,EAA2BgB,OAA9D;EACH;;AAvFqC,CAArB,CAArB"}