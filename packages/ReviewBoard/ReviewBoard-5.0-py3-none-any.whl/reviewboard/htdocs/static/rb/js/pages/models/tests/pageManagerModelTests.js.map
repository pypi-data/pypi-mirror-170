{"version":3,"file":"pageManagerModelTests.js","names":["suite","pageManager","page","beforeEach","RB","PageManager","Backbone","View","spyOn","describe","callbacks","expectedRender","cb","_page","expect","toBe","get","it","beforeRender","not","toHaveBeenCalled","set","rendered","toThrow","ready","render","oldInstance","instance","afterEach","toHaveBeenCalledWith","setPage","getPage"],"sources":["../../../../../../../static/rb/js/pages/models/tests/pageManagerModelTests.es6.js"],"sourcesContent":["suite('rb/pages/models/PageManager', function() {\n    let pageManager;\n    let page;\n\n    beforeEach(function() {\n        pageManager = new RB.PageManager();\n        page = new Backbone.View();\n\n        spyOn(page, 'render');\n    });\n\n    describe('Instance', function() {\n        let callbacks;\n        let expectedRender;\n\n        beforeEach(function() {\n            expectedRender = false;\n\n            callbacks = {\n                cb: _page => {\n                    expect(_page).toBe(page);\n                    expect(pageManager.get('rendered')).toBe(expectedRender);\n                },\n            };\n\n            spyOn(callbacks, 'cb');\n        });\n\n        describe('Methods', function() {\n            describe('beforeReady', function() {\n                it('Without page set', function() {\n                    pageManager.beforeRender(callbacks.cb);\n                    expect(callbacks.cb).not.toHaveBeenCalled();\n\n                    pageManager.set('page', page);\n                    expect(callbacks.cb).toHaveBeenCalled();\n                });\n\n                it('With page set, not rendered', function() {\n                    pageManager.set('page', page);\n                    pageManager.set('rendered', false);\n\n                    pageManager.beforeRender(callbacks.cb);\n                    expect(callbacks.cb).toHaveBeenCalled();\n                });\n\n                it('With page set, rendered', function() {\n                    pageManager.set({\n                        page: page,\n                        rendered: true,\n                    });\n\n                    expect(() => pageManager.beforeRender(callbacks.cb))\n                        .toThrow();\n\n                    expect(callbacks.cb).not.toHaveBeenCalled();\n                });\n            });\n\n            describe('ready', function() {\n                it('Without page set', function() {\n                    pageManager.ready(callbacks.cb);\n                    expect(callbacks.cb).not.toHaveBeenCalled();\n\n                    pageManager.set('page', page);\n                    expect(pageManager.get('rendered')).toBe(true);\n                    expect(page.render).toHaveBeenCalled();\n\n                    expect(callbacks.cb).toHaveBeenCalled();\n                });\n\n                it('With page set, not rendered', function() {\n                    /* Prevent the page from rendering for this test. */\n                    spyOn(pageManager, '_renderPage');\n\n                    pageManager.set('page', page);\n                    expect(pageManager.get('rendered')).toBe(false);\n                    expect(page.render).not.toHaveBeenCalled();\n\n                    pageManager.ready(callbacks.cb);\n                    expect(callbacks.cb).not.toHaveBeenCalled();\n                });\n\n                it('With page set, rendered', function() {\n                    pageManager.set('page', page);\n                    expect(pageManager.get('rendered')).toBe(true);\n                    expect(page.render).toHaveBeenCalled();\n\n                    pageManager.ready(callbacks.cb);\n                    expect(callbacks.cb).toHaveBeenCalled();\n                });\n            });\n        });\n    });\n\n    describe('Class methods', function() {\n        let oldInstance;\n\n        beforeEach(function() {\n            oldInstance = RB.PageManager.instance;\n            RB.PageManager.instance = pageManager;\n        });\n\n        afterEach(function() {\n            RB.PageManager.instance = oldInstance;\n        });\n\n        it('beforeRender', function() {\n            spyOn(RB.PageManager.instance, 'beforeRender');\n            RB.PageManager.beforeRender(1, 2);\n            expect(RB.PageManager.instance.beforeRender)\n                .toHaveBeenCalledWith(1, 2);\n        });\n\n        it('ready', function() {\n            spyOn(RB.PageManager.instance, 'ready');\n            RB.PageManager.ready(1, 2);\n            expect(RB.PageManager.instance.ready)\n                .toHaveBeenCalledWith(1, 2);\n        });\n\n        it('setPage', function() {\n            const page = new Backbone.View();\n            RB.PageManager.setPage(page);\n            expect(pageManager.get('page')).toBe(page);\n        });\n\n        it('getPage', function() {\n            const page = new Backbone.View();\n            pageManager.set('page', page);\n            expect(RB.PageManager.getPage()).toBe(page);\n        });\n    });\n});\n"],"mappings":"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"}