{"version":3,"file":"reviewReplyEditorModelTests.js","names":["suite","reviewReply","review","editor","beforeEach","RB","Review","loaded","links","replies","href","createReply","spyOn","and","resolveTo","describe","ReviewRequestPage","ReviewReplyEditor","contextType","text","it","callThrough","ReviewReply","set","expect","listenTo","calls","count","toEqual","argsFor","_listeningTo","hasOwnProperty","_listenId","toBe","testBodySave","options","done","richText","save","then","get","textAttr","richTextAttr","ready","toHaveBeenCalled","trigger","toHaveBeenCalledWith","catch","err","fail","testCommentSave","hasDraft","model","prototype","replyObject","DiffCommentReply","not","resetStateIfEmpty","testSave","FileAttachmentCommentReply","GeneralCommentReply","ScreenshotCommentReply","destroy","_resetState"],"sources":["../../../../../../../static/rb/js/reviewRequestPage/models/tests/reviewReplyEditorModelTests.es6.js"],"sourcesContent":["suite('rb/reviewRequestPage/models/ReviewReplyEditor', function() {\n    let reviewReply;\n    let review;\n    let editor;\n\n    beforeEach(function() {\n        review = new RB.Review({\n            loaded: true,\n            links: {\n                replies: {\n                    href: '/api/review/123/replies/',\n                },\n            },\n        });\n\n        reviewReply = review.createReply();\n\n        spyOn(review, 'ready').and.resolveTo();\n        spyOn(reviewReply, 'ensureCreated').and.resolveTo();\n        spyOn(reviewReply, 'ready').and.resolveTo();\n    });\n\n    describe('Event handling', function() {\n        describe('reviewReply changes', function() {\n            beforeEach(function() {\n                editor = new RB.ReviewRequestPage.ReviewReplyEditor({\n                    contextType: 'body_top',\n                    review: review,\n                    reviewReply: reviewReply,\n                    text: 'My Text',\n                });\n            });\n\n            it('Sets up events on new reviewReply', function() {\n                spyOn(editor, 'listenTo').and.callThrough();\n\n                const reviewReply = new RB.ReviewReply();\n                editor.set('reviewReply', reviewReply);\n\n                expect(editor.listenTo.calls.count()).toEqual(2);\n                expect(editor.listenTo.calls.argsFor(0)[1]).toEqual('destroyed');\n                expect(editor.listenTo.calls.argsFor(1)[1]).toEqual('published');\n            });\n\n            it('Removes events from old reviewReply', function() {\n                editor.set('reviewReply', new RB.ReviewReply());\n\n                expect(editor._listeningTo.hasOwnProperty(reviewReply._listenId))\n                    .toBe(false);\n            });\n        });\n    });\n\n    describe('Methods', function() {\n        describe('save', function() {\n            function testBodySave(options, done) {\n                editor = new RB.ReviewRequestPage.ReviewReplyEditor({\n                    contextType: options.contextType,\n                    review: review,\n                    reviewReply: reviewReply,\n                    richText: options.richText,\n                    text: 'My Text',\n                });\n\n                spyOn(editor, 'trigger');\n                spyOn(reviewReply, 'save').and.resolveTo();\n\n                editor.save()\n                    .then(() => {\n                        expect(editor.get('replyObject')).toBe(reviewReply);\n                        expect(editor.get('hasDraft')).toBe(true);\n                        expect(editor.get('text')).toBe('My Text');\n                        expect(editor.get('richText')).toBe(true);\n                        expect(reviewReply.get(options.textAttr)).toBe('My Text');\n                        expect(reviewReply.get(options.richTextAttr)).toBe(\n                            options.richText);\n                        expect(reviewReply.ready).toHaveBeenCalled();\n                        expect(reviewReply.save).toHaveBeenCalled();\n                        expect(editor.trigger).toHaveBeenCalledWith('saving');\n                        expect(editor.trigger).toHaveBeenCalledWith('saved');\n\n                        done();\n                    })\n                    .catch(err => done.fail(err));\n            }\n\n            function testCommentSave(options, done) {\n                editor = new RB.ReviewRequestPage.ReviewReplyEditor({\n                    contextType: options.contextType,\n                    hasDraft: false,\n                    review: review,\n                    reviewReply: reviewReply,\n                    richText: options.richText,\n                    text: 'My Text',\n                });\n\n                spyOn(editor, 'trigger');\n                spyOn(options.model.prototype, 'ready').and.resolveTo();\n                spyOn(options.model.prototype, 'save').and.resolveTo();\n\n                editor.save()\n                    .then(() => {\n                        const replyObject = editor.get('replyObject');\n\n                        expect(editor.get('hasDraft')).toBe(true);\n                        expect(editor.get('text')).toBe('My Text');\n                        expect(editor.get('richText')).toBe(true);\n                        expect(replyObject instanceof options.model).toBe(true);\n                        expect(replyObject.get('text')).toBe('My Text');\n                        expect(replyObject.get('richText')).toBe(options.richText);\n                        expect(options.model.prototype.ready).toHaveBeenCalled();\n                        expect(options.model.prototype.save).toHaveBeenCalled();\n                        expect(editor.trigger).toHaveBeenCalledWith('saving');\n                        expect(editor.trigger).toHaveBeenCalledWith('saved');\n\n                        done();\n                    })\n                    .catch(err => done.fail(err));\n            }\n\n            it('With existing reply object', function(done) {\n                const replyObject = new RB.DiffCommentReply();\n\n                editor = new RB.ReviewRequestPage.ReviewReplyEditor({\n                    contextType: 'diff_comments',\n                    hasDraft: false,\n                    replyObject: replyObject,\n                    review: review,\n                    reviewReply: reviewReply,\n                    text: 'My Text',\n                });\n\n                spyOn(editor, 'trigger');\n                spyOn(replyObject, 'ready').and.resolveTo();\n                spyOn(replyObject, 'save').and.resolveTo();\n\n                editor.save()\n                    .then(() => {\n                        expect(editor.get('hasDraft')).toBe(true);\n                        expect(editor.get('replyObject')).toBe(replyObject);\n                        expect(replyObject.get('text')).toBe('My Text');\n                        expect(replyObject.ready).toHaveBeenCalled();\n                        expect(replyObject.save).toHaveBeenCalled();\n                        expect(editor.trigger).toHaveBeenCalledWith('saving');\n                        expect(editor.trigger).toHaveBeenCalledWith('saved');\n\n                        done();\n                    })\n                    .catch(err => done.fail(err));\n            });\n\n            it('With empty text', function(done) {\n                const replyObject = new RB.DiffCommentReply({\n                    text: 'Orig Text',\n                });\n\n                editor = new RB.ReviewRequestPage.ReviewReplyEditor({\n                    contextType: 'diff_comments',\n                    review: review,\n                    reviewReply: reviewReply,\n                });\n\n                spyOn(editor, 'trigger');\n                spyOn(editor, 'resetStateIfEmpty').and.resolveTo();\n                spyOn(replyObject, 'ready').and.resolveTo();\n                spyOn(replyObject, 'save');\n\n                editor.set({\n                    hasDraft: false,\n                    replyObject: replyObject,\n                    text: '',\n                });\n                editor.save()\n                    .then(() => {\n                        expect(editor.get('hasDraft')).toBe(false);\n                        expect(editor.get('replyObject')).toBe(replyObject);\n                        expect(replyObject.get('text')).toBe('Orig Text');\n                        expect(replyObject.ready).toHaveBeenCalled();\n                        expect(replyObject.save).not.toHaveBeenCalled();\n                        expect(editor.resetStateIfEmpty).toHaveBeenCalled();\n                        expect(editor.trigger).toHaveBeenCalledWith('saving');\n\n                        done();\n                    })\n                    .catch(err => done.fail(err));\n            });\n\n            describe('With body_top', function() {\n                function testSave(richText, done) {\n                    testBodySave({\n                        contextType: 'body_top',\n                        textAttr: 'bodyTop',\n                        richTextAttr: 'bodyTopRichText',\n                        richText: richText,\n                    }, done);\n                }\n\n                it('richText=true', function(done) {\n                    testSave(true, done);\n                });\n\n                it('richText=false', function(done) {\n                    testSave(false, done);\n                });\n            });\n\n            describe('With body_bottom', function() {\n                function testSave(richText, done) {\n                    testBodySave({\n                        contextType: 'body_bottom',\n                        textAttr: 'bodyBottom',\n                        richTextAttr: 'bodyBottomRichText',\n                        richText: richText,\n                    }, done);\n                }\n\n                it('richText=true', function(done) {\n                    testSave(true, done);\n                });\n\n                it('richText=false', function(done) {\n                    testSave(false, done);\n                });\n            });\n\n            describe('With diff comments', function() {\n                function testSave(richText, done) {\n                    testCommentSave({\n                        contextType: 'diff_comments',\n                        model: RB.DiffCommentReply,\n                        richText: richText,\n                    }, done);\n                }\n\n                it('richText=true', function(done) {\n                    testSave(true, done);\n                });\n\n                it('richText=false', function(done) {\n                    testSave(false, done);\n                });\n            });\n\n            describe('With file attachment comments', function() {\n                function testSave(richText, done) {\n                    testCommentSave({\n                        contextType: 'file_attachment_comments',\n                        model: RB.FileAttachmentCommentReply,\n                        richText: richText,\n                    }, done);\n                }\n\n                it('richText=true', function(done) {\n                    testSave(true, done);\n                });\n\n                it('richText=false', function(done) {\n                    testSave(false, done);\n                });\n            });\n\n            describe('With general comments', function() {\n                function testSave(richText, done) {\n                    testCommentSave({\n                        contextType: 'general_comments',\n                        model: RB.GeneralCommentReply,\n                        richText: richText,\n                    }, done);\n                }\n\n                it('richText=true', function(done) {\n                    testSave(true, done);\n                });\n\n                it('richText=false', function(done) {\n                    testSave(false, done);\n                });\n            });\n\n            describe('With screenshot comments', function() {\n                function testSave(richText, done) {\n                    testCommentSave({\n                        contextType: 'screenshot_comments',\n                        model: RB.ScreenshotCommentReply,\n                        richText: richText,\n                    }, done);\n                }\n\n                it('richText=true', function(done) {\n                    testSave(true, done);\n                });\n\n                it('richText=false', function(done) {\n                    testSave(false, done);\n                });\n            });\n        });\n\n        describe('resetStateIfEmpty', function() {\n            let replyObject;\n\n            beforeEach(function() {\n                replyObject = new RB.DiffCommentReply();\n\n                editor = new RB.ReviewRequestPage.ReviewReplyEditor({\n                    contextType: 'diff_comments',\n                    hasDraft: true,\n                    replyObject: replyObject,\n                    review: review,\n                    reviewReply: reviewReply,\n                });\n\n                spyOn(editor, 'trigger');\n                spyOn(replyObject, 'destroy').and.resolveTo();\n                spyOn(reviewReply, 'discardIfEmpty').and.resolveTo(true);\n            });\n\n            it('Without empty text', async function() {\n                editor.set('text', 'My Text');\n\n                await editor.resetStateIfEmpty();\n\n                expect(replyObject.destroy).not.toHaveBeenCalled();\n                expect(editor.get('hasDraft')).toBe(true);\n                expect(editor.trigger).not.toHaveBeenCalledWith('resetState');\n            });\n\n            describe('With empty text', function() {\n                it('With no reply object', async function() {\n                    editor.set('replyObject', null);\n\n                    await editor.resetStateIfEmpty();\n\n                    expect(editor.trigger).toHaveBeenCalledWith('resetState');\n                    expect(replyObject.destroy).not.toHaveBeenCalled();\n                    expect(editor.get('hasDraft')).toBe(false);\n                });\n\n                it('With new reply object', async function() {\n                    replyObject.set('id', null);\n\n                    await editor.resetStateIfEmpty();\n\n                    expect(editor.trigger).toHaveBeenCalledWith('resetState');\n                    expect(replyObject.destroy).not.toHaveBeenCalled();\n                    expect(editor.get('hasDraft')).toBe(false);\n                });\n\n                it('With existing reply object', async function() {\n                    replyObject.set('id', 123);\n\n                    await editor.resetStateIfEmpty();\n\n                    expect(replyObject.destroy).toHaveBeenCalled();\n                    expect(editor.get('hasDraft')).toBe(false);\n                    expect(editor.trigger).toHaveBeenCalledWith('resetState');\n                });\n\n                describe('With context type', function() {\n                    beforeEach(function() {\n                        replyObject.set('id', 123);\n\n                        spyOn(editor, '_resetState').and.resolveTo();\n                    });\n\n                    it('body_top', async function() {\n                        editor.set('contextType', 'body_top');\n\n                        await editor.resetStateIfEmpty();\n\n                        expect(replyObject.destroy).not.toHaveBeenCalled();\n                        expect(editor._resetState).toHaveBeenCalledWith(true);\n                    });\n\n                    it('body_bottom', async function() {\n                        editor.set('contextType', 'body_bottom');\n\n                        await editor.resetStateIfEmpty();\n\n                        expect(replyObject.destroy).not.toHaveBeenCalled();\n                        expect(editor._resetState).toHaveBeenCalledWith(true);\n                    });\n\n                    it('diff_comments', async function() {\n                        editor.set('contextType', 'diff_comments');\n\n                        await editor.resetStateIfEmpty();\n\n                        expect(replyObject.destroy).toHaveBeenCalled();\n                        expect(editor._resetState).toHaveBeenCalledWith();\n                    });\n\n                    it('file_attachment_comments', async function() {\n                        editor.set('contextType', 'file_attachment_comments');\n\n                        await editor.resetStateIfEmpty();\n\n                        expect(replyObject.destroy).toHaveBeenCalled();\n                        expect(editor._resetState).toHaveBeenCalledWith();\n                    });\n\n                    it('general_comments', async function() {\n                        editor.set('contextType', 'general_comments');\n                        await editor.resetStateIfEmpty();\n\n                        expect(replyObject.destroy).toHaveBeenCalled();\n                        expect(editor._resetState).toHaveBeenCalledWith();\n                    });\n\n                    it('screenshot_comments', async function() {\n                        editor.set('contextType', 'screenshot_comments');\n\n                        await editor.resetStateIfEmpty();\n\n                        expect(replyObject.destroy).toHaveBeenCalled();\n                        expect(editor._resetState).toHaveBeenCalledWith();\n                    });\n                });\n            });\n        });\n    });\n});\n"],"mappings":"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"}