{"version":3,"file":"reviewReplyDraftBannerViewTests.js","names":["suite","reviewReply","view","beforeEach","RB","ReviewReply","ReviewRequestPage","ReviewReplyDraftBannerView","model","$floatContainer","$testsScratch","reviewRequestEditor","ReviewRequestEditor","reviewRequest","ReviewRequest","render","$el","appendTo","describe","it","spyOn","$","click","expect","destroy","toHaveBeenCalled","publish","$buttons","prop","toBe","trigger","and","resolveTo","remove","showSendEmail","calls","argsFor","trivial","length","toEqual"],"sources":["../../../../../../../static/rb/js/reviewRequestPage/views/tests/reviewReplyDraftBannerViewTests.es6.js"],"sourcesContent":["suite('rb/reviewRequestPage/views/ReviewReplyDraftBannerView', function() {\n    let reviewReply;\n    let view;\n\n    beforeEach(function() {\n        reviewReply = new RB.ReviewReply();\n        view = new RB.ReviewRequestPage.ReviewReplyDraftBannerView({\n            model: reviewReply,\n            $floatContainer: $testsScratch,\n            reviewRequestEditor: new RB.ReviewRequestEditor({\n                reviewRequest: new RB.ReviewRequest(),\n            }),\n        });\n        view.render().$el.appendTo($testsScratch);\n    });\n\n    describe('Actions', function() {\n        it('Discard', function() {\n            spyOn(reviewReply, 'destroy');\n            view.$('.discard-button').click();\n            expect(reviewReply.destroy).toHaveBeenCalled();\n        });\n\n        it('Publish', function() {\n            spyOn(reviewReply, 'publish');\n            view.$('.publish-button').click();\n            expect(reviewReply.publish).toHaveBeenCalled();\n        });\n    });\n\n    describe('Event Handling', function() {\n        describe('Buttons', function() {\n            let $buttons;\n\n            beforeEach(function() {\n                $buttons = view.$('input');\n            });\n\n            describe('Disabled', function() {\n                it('When saving', function() {\n                    expect($buttons.prop('disabled')).toBe(false);\n                    reviewReply.trigger('saving');\n                    expect($buttons.prop('disabled')).toBe(true);\n                });\n\n                it('When destroying', function() {\n                    expect($buttons.prop('disabled')).toBe(false);\n                    reviewReply.trigger('destroying');\n                    expect($buttons.prop('disabled')).toBe(true);\n                });\n            });\n\n            describe('Enabled', function() {\n                it('When saved', function() {\n                    $buttons.prop('disabled', true);\n                    reviewReply.trigger('saved');\n                    expect($buttons.prop('disabled')).toBe(false);\n                });\n            });\n        });\n    });\n\n    describe('Publish', function() {\n        beforeEach(function() {\n            spyOn(reviewReply, 'ensureCreated').and.resolveTo();\n            spyOn(reviewReply, 'publish');\n        });\n\n        describe('With Send E-Mail shown', function() {\n            beforeEach(function() {\n                view.remove();\n                view = new RB.ReviewRequestPage.ReviewReplyDraftBannerView({\n                    model: reviewReply,\n                    $floatContainer: $testsScratch,\n                    reviewRequestEditor: new RB.ReviewRequestEditor({\n                        reviewRequest: new RB.ReviewRequest(),\n                        showSendEmail: true\n                    })\n                });\n                view.render().$el.appendTo($testsScratch);\n            });\n\n            it('Send E-Mail true', function() {\n                $('.send-email').prop('checked', true);\n\n                $('.publish-button').click();\n\n                expect(reviewReply.publish).toHaveBeenCalled();\n                expect(reviewReply.publish.calls.argsFor(0)[0].trivial)\n                    .toBe(false);\n            });\n\n            it('Send E-Mail false', function() {\n                $('.send-email').prop('checked', false);\n\n                $('.publish-button').click();\n\n                expect(reviewReply.publish).toHaveBeenCalled();\n                expect(reviewReply.publish.calls.argsFor(0)[0].trivial)\n                    .toBe(true);\n            });\n        });\n\n        it('Without Send E-Mail shown', function() {\n            $('.publish-button').click();\n\n            expect($('.send-email').length).toEqual(0);\n            expect(reviewReply.publish).toHaveBeenCalled();\n            expect(reviewReply.publish.calls.argsFor(0)[0].trivial).toBe(false);\n        });\n    });\n});\n"],"mappings":"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"}