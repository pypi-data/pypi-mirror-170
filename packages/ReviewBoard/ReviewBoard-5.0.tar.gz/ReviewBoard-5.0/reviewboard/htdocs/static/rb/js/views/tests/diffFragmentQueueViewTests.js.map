{"version":3,"file":"diffFragmentQueueViewTests.js","names":["suite","URL_PREFIX","fragmentQueue","beforeEach","RB","DiffFragmentQueueView","containerPrefix","reviewRequestPath","queueName","describe","$container1","$container2","$container3","$container4","$","appendTo","window","$testsScratch","queueLoad","it","queue","_queue","expect","length","not","toBe","key1","toContain","commentID","onFragmentRendered","key2","done","spyOn","and","callFake","options","dataType","url","blob","html1","Blob","html2","html3","DataUtils","buildBlob","type","values","size","html","fail","readBlobAsArrayBuffer","success","loadFragments","ajax","calls","count","data","toBeTruthy","arrayBuffer","buildArrayBuffer","view1","DiffFragmentView","view2","view3","saveFragment","removeData","_saved","toEqual"],"sources":["../../../../../../static/rb/js/views/tests/diffFragmentQueueViewTests.es6.js"],"sourcesContent":["suite('rb/views/DiffFragmentQueueView', function() {\n    const URL_PREFIX = '/r/123/_fragments/diff-comments/';\n\n    let fragmentQueue;\n\n    beforeEach(function() {\n        fragmentQueue = new RB.DiffFragmentQueueView({\n            containerPrefix: 'container1',\n            reviewRequestPath: '/r/123/',\n            queueName: 'diff_fragments'\n        });\n    });\n\n    describe('Diff fragment loading', function() {\n        let $container1;\n        let $container2;\n        let $container3;\n        let $container4;\n\n        beforeEach(function() {\n            $container1 = $('<div id=\"container1_123\"/>')\n                .appendTo(window.$testsScratch);\n            $container2 = $('<div id=\"container1_124\"/>')\n                .appendTo(window.$testsScratch);\n            $container3 = $('<div id=\"container1_125\"/>')\n                .appendTo(window.$testsScratch);\n            $container4 = $('<div id=\"container1_126\"/>')\n                .appendTo(window.$testsScratch);\n\n            fragmentQueue.queueLoad('123', 'key1');\n            fragmentQueue.queueLoad('124', 'key1');\n            fragmentQueue.queueLoad('125', 'key1');\n            fragmentQueue.queueLoad('126', 'key2');\n        });\n\n        it('Fragment queueing', function() {\n            const queue = fragmentQueue._queue;\n\n            expect(queue.length).not.toBe(0);\n\n            expect(queue.key1.length).toBe(3);\n            expect(queue.key1).toContain({\n                commentID: '123',\n                onFragmentRendered: null,\n            });\n            expect(queue.key1).toContain({\n                commentID: '124',\n                onFragmentRendered: null,\n            });\n            expect(queue.key1).toContain({\n                commentID: '125',\n                onFragmentRendered: null,\n            });\n            expect(queue.key2.length).toBe(1);\n            expect(queue.key2).toContain({\n                commentID: '126',\n                onFragmentRendered: null,\n            });\n        });\n\n        it('Batch loading', function(done) {\n            spyOn($, 'ajax').and.callFake(function(options) {\n                expect(options.dataType).toBe('arraybuffer');\n\n                const url = options.url;\n                let blob;\n\n                if (url === `${URL_PREFIX}123,124,125/`) {\n                    const html1 = new Blob(['<span>Comment one</span>']);\n                    const html2 = new Blob(['<span>Comment two</span>']);\n                    const html3 = new Blob(['<span>Comment three</span>']);\n\n                    blob = RB.DataUtils.buildBlob([\n                        [{\n                            type: 'uint32',\n                            values: [123, html1.size],\n                        }],\n                        html1,\n                        [{\n                            type: 'uint32',\n                            values: [124, html2.size],\n                        }],\n                        html2,\n                        [{\n                            type: 'uint32',\n                            values: [125, html3.size],\n                        }],\n                        html3,\n                    ]);\n                } else if (url === `${URL_PREFIX}126/`) {\n                    const html = new Blob(['<span>Comment 4</span>']);\n\n                    blob = RB.DataUtils.buildBlob([\n                        [{\n                            type: 'uint32',\n                            values: [126, html.size],\n                        }],\n                        html,\n                    ]);\n                } else {\n                    fail(`Unexpected URL ${url}`);\n                    return;\n                }\n\n                RB.DataUtils.readBlobAsArrayBuffer(blob, options.success);\n            });\n\n            fragmentQueue.loadFragments(() => {\n                expect($.ajax.calls.count()).toBe(2);\n\n                expect($container1.data('diff-fragment-view')).toBeTruthy();\n                expect($container1.html()).toBe('<span>Comment one</span>');\n\n                expect($container2.data('diff-fragment-view')).toBeTruthy();\n                expect($container2.html()).toBe('<span>Comment two</span>');\n\n                expect($container3.data('diff-fragment-view')).toBeTruthy();\n                expect($container3.html()).toBe('<span>Comment three</span>');\n\n                expect($container4.data('diff-fragment-view')).toBeTruthy();\n                expect($container4.html()).toBe('<span>Comment 4</span>');\n\n                done();\n            });\n        });\n\n        it('With Unicode content', function(done) {\n            spyOn($, 'ajax').and.callFake(function(options) {\n                expect(options.dataType).toBe('arraybuffer');\n\n                const url = options.url;\n                let arrayBuffer;\n\n                if (url === `${URL_PREFIX}123,124,125/`) {\n                    /* UTF-8 bytes for \"<span>√°√©√≠√≥√∫ üî•</span>\" */\n                    const html1 = [\n                        60, 115, 112, 97, 110, 62, 195, 161, 195, 169,\n                        195, 173, 195, 179, 195, 186, 32, 240, 159, 148,\n                        165, 60, 47, 115, 112, 97, 110, 62,\n                    ];\n\n                    /* UTF-8 bytes for \"<span>√Ñ√ã√è√ñ√ú≈∏ üò±</span>\" */\n                    const html2 = [\n                        60, 115, 112, 97, 110, 62, 195, 132, 195, 139,\n                        195, 143, 195, 150, 195, 156, 197, 184, 32, 240,\n                        159, 152, 177, 60, 47, 115, 112, 97, 110, 62,\n                    ];\n\n                    /* UTF-8 bytes for \"<span>üî•üò±</span>\" */\n                    const html3 = [\n                        60, 115, 112, 97, 110, 62, 240, 159, 148, 165, 240,\n                        159, 152, 177, 60, 47, 115, 112, 97, 110, 62,\n                    ];\n\n                    expect(html1.length).toBe(28);\n                    expect(html2.length).toBe(30);\n                    expect(html3.length).toBe(21);\n\n                    arrayBuffer = RB.DataUtils.buildArrayBuffer([\n                        {\n                            type: 'uint32',\n                            values: [123, html1.length],\n                        },\n                        {\n                            type: 'uint8',\n                            values: html1,\n                        },\n                        {\n                            type: 'uint32',\n                            values: [124, html2.length],\n                        },\n                        {\n                            type: 'uint8',\n                            values: html2,\n                        },\n                        {\n                            type: 'uint32',\n                            values: [125, html3.length],\n                        },\n                        {\n                            type: 'uint8',\n                            values: html3,\n                        },\n                    ]);\n                } else if (url === `${URL_PREFIX}126/`) {\n                    /* UTF-8 bytes for \"<span>ƒÄƒíƒ™≈å üëø</span>\" */\n                    const html = [\n                        60, 115, 112, 97, 110, 62, 196, 128, 196, 146,\n                        196, 170, 197, 140, 32, 240, 159, 145, 191, 60,\n                        47, 115, 112, 97, 110, 62,\n                    ];\n\n                    expect(html.length).toBe(26);\n\n                    arrayBuffer = RB.DataUtils.buildArrayBuffer([\n                        {\n                            type: 'uint32',\n                            values: [126, html.length],\n                        },\n                        {\n                            type: 'uint8',\n                            values: html,\n                        },\n                    ]);\n                } else {\n                    fail(`Unexpected URL ${url}`);\n                    return;\n                }\n\n                options.success(arrayBuffer);\n            });\n\n            fragmentQueue.loadFragments(() => {\n                expect($.ajax.calls.count()).toBe(2);\n\n                expect($container1.data('diff-fragment-view')).toBeTruthy();\n                expect($container1.html()).toBe('<span>√°√©√≠√≥√∫ üî•</span>');\n\n                expect($container2.data('diff-fragment-view')).toBeTruthy();\n                expect($container2.html()).toBe('<span>√Ñ√ã√è√ñ√ú≈∏ üò±</span>');\n\n                expect($container3.data('diff-fragment-view')).toBeTruthy();\n                expect($container3.html()).toBe('<span>üî•üò±</span>');\n\n                expect($container4.data('diff-fragment-view')).toBeTruthy();\n                expect($container4.html()).toBe('<span>ƒÄƒíƒ™≈å üëø</span>');\n\n                done();\n            });\n        });\n\n        it('With saved fragments', function(done) {\n            spyOn($, 'ajax').and.callFake(function(options) {\n                expect(options.dataType).toBe('arraybuffer');\n\n                const url = options.url;\n                let blob;\n\n                if (url === `${URL_PREFIX}124/`) {\n                    const html = new Blob(['<span>New comment 2</span>']);\n\n                    blob = RB.DataUtils.buildBlob([\n                        [{\n                            type: 'uint32',\n                            values: [124, html.size],\n                        }],\n                        html,\n                    ]);\n                } else if (url === `${URL_PREFIX}126/`) {\n                    const html = new Blob(['<span>New comment 4</span>']);\n\n                    blob = RB.DataUtils.buildBlob([\n                        [{\n                            type: 'uint32',\n                            values: [126, html.size],\n                        }],\n                        html,\n                    ]);\n                } else {\n                    fail(`Unexpected URL ${url}`);\n                    return;\n                }\n\n                RB.DataUtils.readBlobAsArrayBuffer(blob, options.success);\n            });\n\n            /*\n             * We'll set up three containers, with the third being having its\n             * view disassociated and the fourth as a completely new container.\n             * The unsaved pre-loaded containers (2) and the new container (4)\n             * will be loaded. The disassociated container (3) will have a\n             * new view set up.\n             */\n            const view1 = new RB.DiffFragmentView();\n            $container1\n                .html('<span>Comment 1</span>')\n                .data('diff-fragment-view', view1);\n\n            const view2 = new RB.DiffFragmentView();\n            $container2\n                .html('<span>Comment 2</span>')\n                .data('diff-fragment-view', view2);\n\n            const view3 = new RB.DiffFragmentView();\n            $container3\n                .html('<span>Comment 3</span>')\n                .data('diff-fragment-view', view3);\n\n            /*\n             * We're going to save 123, 125, and 126 (which is not loaded).\n             * Only 123 and 125 will actually be saved.\n             */\n            fragmentQueue.saveFragment('123');\n            fragmentQueue.saveFragment('125');\n            fragmentQueue.saveFragment('126');\n\n            /* Disassociate container 3's view. */\n            $container3.removeData('diff-fragment-view');\n\n            fragmentQueue.loadFragments(() => {\n                expect($.ajax.calls.count()).toBe(2);\n\n                expect($container1.data('diff-fragment-view')).toBe(view1);\n                expect($container1.html()).toBe('<span>Comment 1</span>');\n\n                expect($container2.data('diff-fragment-view')).toBe(view2);\n                expect($container2.html()).toBe('<span>New comment 2</span>');\n\n                expect($container3.data('diff-fragment-view')).toBeTruthy();\n                expect($container3.data('diff-fragment-view')).not.toBe(view3);\n                expect($container3.html()).toBe('<span>Comment 3</span>');\n\n                expect($container4.data('diff-fragment-view')).toBeTruthy();\n                expect($container4.html()).toBe('<span>New comment 4</span>');\n\n                expect(fragmentQueue._saved).toEqual({});\n\n                done();\n            });\n        });\n    });\n});\n"],"mappings":";;AAAAA,KAAK,CAAC,gCAAD,EAAmC,YAAW;EAC/C,MAAMC,UAAU,GAAG,kCAAnB;EAEA,IAAIC,aAAJ;EAEAC,UAAU,CAAC,YAAW;IAClBD,aAAa,GAAG,IAAIE,EAAE,CAACC,qBAAP,CAA6B;MACzCC,eAAe,EAAE,YADwB;MAEzCC,iBAAiB,EAAE,SAFsB;MAGzCC,SAAS,EAAE;IAH8B,CAA7B,CAAhB;EAKH,CANS,CAAV;EAQAC,QAAQ,CAAC,uBAAD,EAA0B,YAAW;IACzC,IAAIC,WAAJ;IACA,IAAIC,WAAJ;IACA,IAAIC,WAAJ;IACA,IAAIC,WAAJ;IAEAV,UAAU,CAAC,YAAW;MAClBO,WAAW,GAAGI,CAAC,CAAC,4BAAD,CAAD,CACTC,QADS,CACAC,MAAM,CAACC,aADP,CAAd;MAEAN,WAAW,GAAGG,CAAC,CAAC,4BAAD,CAAD,CACTC,QADS,CACAC,MAAM,CAACC,aADP,CAAd;MAEAL,WAAW,GAAGE,CAAC,CAAC,4BAAD,CAAD,CACTC,QADS,CACAC,MAAM,CAACC,aADP,CAAd;MAEAJ,WAAW,GAAGC,CAAC,CAAC,4BAAD,CAAD,CACTC,QADS,CACAC,MAAM,CAACC,aADP,CAAd;MAGAf,aAAa,CAACgB,SAAd,CAAwB,KAAxB,EAA+B,MAA/B;MACAhB,aAAa,CAACgB,SAAd,CAAwB,KAAxB,EAA+B,MAA/B;MACAhB,aAAa,CAACgB,SAAd,CAAwB,KAAxB,EAA+B,MAA/B;MACAhB,aAAa,CAACgB,SAAd,CAAwB,KAAxB,EAA+B,MAA/B;IACH,CAdS,CAAV;IAgBAC,EAAE,CAAC,mBAAD,EAAsB,YAAW;MAC/B,MAAMC,KAAK,GAAGlB,aAAa,CAACmB,MAA5B;MAEAC,MAAM,CAACF,KAAK,CAACG,MAAP,CAAN,CAAqBC,GAArB,CAAyBC,IAAzB,CAA8B,CAA9B;MAEAH,MAAM,CAACF,KAAK,CAACM,IAAN,CAAWH,MAAZ,CAAN,CAA0BE,IAA1B,CAA+B,CAA/B;MACAH,MAAM,CAACF,KAAK,CAACM,IAAP,CAAN,CAAmBC,SAAnB,CAA6B;QACzBC,SAAS,EAAE,KADc;QAEzBC,kBAAkB,EAAE;MAFK,CAA7B;MAIAP,MAAM,CAACF,KAAK,CAACM,IAAP,CAAN,CAAmBC,SAAnB,CAA6B;QACzBC,SAAS,EAAE,KADc;QAEzBC,kBAAkB,EAAE;MAFK,CAA7B;MAIAP,MAAM,CAACF,KAAK,CAACM,IAAP,CAAN,CAAmBC,SAAnB,CAA6B;QACzBC,SAAS,EAAE,KADc;QAEzBC,kBAAkB,EAAE;MAFK,CAA7B;MAIAP,MAAM,CAACF,KAAK,CAACU,IAAN,CAAWP,MAAZ,CAAN,CAA0BE,IAA1B,CAA+B,CAA/B;MACAH,MAAM,CAACF,KAAK,CAACU,IAAP,CAAN,CAAmBH,SAAnB,CAA6B;QACzBC,SAAS,EAAE,KADc;QAEzBC,kBAAkB,EAAE;MAFK,CAA7B;IAIH,CAvBC,CAAF;IAyBAV,EAAE,CAAC,eAAD,EAAkB,UAASY,IAAT,EAAe;MAC/BC,KAAK,CAAClB,CAAD,EAAI,MAAJ,CAAL,CAAiBmB,GAAjB,CAAqBC,QAArB,CAA8B,UAASC,OAAT,EAAkB;QAC5Cb,MAAM,CAACa,OAAO,CAACC,QAAT,CAAN,CAAyBX,IAAzB,CAA8B,aAA9B;QAEA,MAAMY,GAAG,GAAGF,OAAO,CAACE,GAApB;QACA,IAAIC,IAAJ;;QAEA,IAAID,GAAG,KAAM,GAAEpC,UAAW,cAA1B,EAAyC;UACrC,MAAMsC,KAAK,GAAG,IAAIC,IAAJ,CAAS,CAAC,0BAAD,CAAT,CAAd;UACA,MAAMC,KAAK,GAAG,IAAID,IAAJ,CAAS,CAAC,0BAAD,CAAT,CAAd;UACA,MAAME,KAAK,GAAG,IAAIF,IAAJ,CAAS,CAAC,4BAAD,CAAT,CAAd;UAEAF,IAAI,GAAGlC,EAAE,CAACuC,SAAH,CAAaC,SAAb,CAAuB,CAC1B,CAAC;YACGC,IAAI,EAAE,QADT;YAEGC,MAAM,EAAE,CAAC,GAAD,EAAMP,KAAK,CAACQ,IAAZ;UAFX,CAAD,CAD0B,EAK1BR,KAL0B,EAM1B,CAAC;YACGM,IAAI,EAAE,QADT;YAEGC,MAAM,EAAE,CAAC,GAAD,EAAML,KAAK,CAACM,IAAZ;UAFX,CAAD,CAN0B,EAU1BN,KAV0B,EAW1B,CAAC;YACGI,IAAI,EAAE,QADT;YAEGC,MAAM,EAAE,CAAC,GAAD,EAAMJ,KAAK,CAACK,IAAZ;UAFX,CAAD,CAX0B,EAe1BL,KAf0B,CAAvB,CAAP;QAiBH,CAtBD,MAsBO,IAAIL,GAAG,KAAM,GAAEpC,UAAW,MAA1B,EAAiC;UACpC,MAAM+C,IAAI,GAAG,IAAIR,IAAJ,CAAS,CAAC,wBAAD,CAAT,CAAb;UAEAF,IAAI,GAAGlC,EAAE,CAACuC,SAAH,CAAaC,SAAb,CAAuB,CAC1B,CAAC;YACGC,IAAI,EAAE,QADT;YAEGC,MAAM,EAAE,CAAC,GAAD,EAAME,IAAI,CAACD,IAAX;UAFX,CAAD,CAD0B,EAK1BC,IAL0B,CAAvB,CAAP;QAOH,CAVM,MAUA;UACHC,IAAI,CAAE,kBAAiBZ,GAAI,EAAvB,CAAJ;UACA;QACH;;QAEDjC,EAAE,CAACuC,SAAH,CAAaO,qBAAb,CAAmCZ,IAAnC,EAAyCH,OAAO,CAACgB,OAAjD;MACH,CA5CD;MA8CAjD,aAAa,CAACkD,aAAd,CAA4B,MAAM;QAC9B9B,MAAM,CAACR,CAAC,CAACuC,IAAF,CAAOC,KAAP,CAAaC,KAAb,EAAD,CAAN,CAA6B9B,IAA7B,CAAkC,CAAlC;QAEAH,MAAM,CAACZ,WAAW,CAAC8C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+CC,UAA/C;QACAnC,MAAM,CAACZ,WAAW,CAACsC,IAAZ,EAAD,CAAN,CAA2BvB,IAA3B,CAAgC,0BAAhC;QAEAH,MAAM,CAACX,WAAW,CAAC6C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+CC,UAA/C;QACAnC,MAAM,CAACX,WAAW,CAACqC,IAAZ,EAAD,CAAN,CAA2BvB,IAA3B,CAAgC,0BAAhC;QAEAH,MAAM,CAACV,WAAW,CAAC4C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+CC,UAA/C;QACAnC,MAAM,CAACV,WAAW,CAACoC,IAAZ,EAAD,CAAN,CAA2BvB,IAA3B,CAAgC,4BAAhC;QAEAH,MAAM,CAACT,WAAW,CAAC2C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+CC,UAA/C;QACAnC,MAAM,CAACT,WAAW,CAACmC,IAAZ,EAAD,CAAN,CAA2BvB,IAA3B,CAAgC,wBAAhC;QAEAM,IAAI;MACP,CAhBD;IAiBH,CAhEC,CAAF;IAkEAZ,EAAE,CAAC,sBAAD,EAAyB,UAASY,IAAT,EAAe;MACtCC,KAAK,CAAClB,CAAD,EAAI,MAAJ,CAAL,CAAiBmB,GAAjB,CAAqBC,QAArB,CAA8B,UAASC,OAAT,EAAkB;QAC5Cb,MAAM,CAACa,OAAO,CAACC,QAAT,CAAN,CAAyBX,IAAzB,CAA8B,aAA9B;QAEA,MAAMY,GAAG,GAAGF,OAAO,CAACE,GAApB;QACA,IAAIqB,WAAJ;;QAEA,IAAIrB,GAAG,KAAM,GAAEpC,UAAW,cAA1B,EAAyC;UACrC;UACA,MAAMsC,KAAK,GAAG,CACV,EADU,EACN,GADM,EACD,GADC,EACI,EADJ,EACQ,GADR,EACa,EADb,EACiB,GADjB,EACsB,GADtB,EAC2B,GAD3B,EACgC,GADhC,EAEV,GAFU,EAEL,GAFK,EAEA,GAFA,EAEK,GAFL,EAEU,GAFV,EAEe,GAFf,EAEoB,EAFpB,EAEwB,GAFxB,EAE6B,GAF7B,EAEkC,GAFlC,EAGV,GAHU,EAGL,EAHK,EAGD,EAHC,EAGG,GAHH,EAGQ,GAHR,EAGa,EAHb,EAGiB,GAHjB,EAGsB,EAHtB,CAAd;UAMA;;UACA,MAAME,KAAK,GAAG,CACV,EADU,EACN,GADM,EACD,GADC,EACI,EADJ,EACQ,GADR,EACa,EADb,EACiB,GADjB,EACsB,GADtB,EAC2B,GAD3B,EACgC,GADhC,EAEV,GAFU,EAEL,GAFK,EAEA,GAFA,EAEK,GAFL,EAEU,GAFV,EAEe,GAFf,EAEoB,GAFpB,EAEyB,GAFzB,EAE8B,EAF9B,EAEkC,GAFlC,EAGV,GAHU,EAGL,GAHK,EAGA,GAHA,EAGK,EAHL,EAGS,EAHT,EAGa,GAHb,EAGkB,GAHlB,EAGuB,EAHvB,EAG2B,GAH3B,EAGgC,EAHhC,CAAd;UAMA;;UACA,MAAMC,KAAK,GAAG,CACV,EADU,EACN,GADM,EACD,GADC,EACI,EADJ,EACQ,GADR,EACa,EADb,EACiB,GADjB,EACsB,GADtB,EAC2B,GAD3B,EACgC,GADhC,EACqC,GADrC,EAEV,GAFU,EAEL,GAFK,EAEA,GAFA,EAEK,EAFL,EAES,EAFT,EAEa,GAFb,EAEkB,GAFlB,EAEuB,EAFvB,EAE2B,GAF3B,EAEgC,EAFhC,CAAd;UAKApB,MAAM,CAACiB,KAAK,CAAChB,MAAP,CAAN,CAAqBE,IAArB,CAA0B,EAA1B;UACAH,MAAM,CAACmB,KAAK,CAAClB,MAAP,CAAN,CAAqBE,IAArB,CAA0B,EAA1B;UACAH,MAAM,CAACoB,KAAK,CAACnB,MAAP,CAAN,CAAqBE,IAArB,CAA0B,EAA1B;UAEAiC,WAAW,GAAGtD,EAAE,CAACuC,SAAH,CAAagB,gBAAb,CAA8B,CACxC;YACId,IAAI,EAAE,QADV;YAEIC,MAAM,EAAE,CAAC,GAAD,EAAMP,KAAK,CAAChB,MAAZ;UAFZ,CADwC,EAKxC;YACIsB,IAAI,EAAE,OADV;YAEIC,MAAM,EAAEP;UAFZ,CALwC,EASxC;YACIM,IAAI,EAAE,QADV;YAEIC,MAAM,EAAE,CAAC,GAAD,EAAML,KAAK,CAAClB,MAAZ;UAFZ,CATwC,EAaxC;YACIsB,IAAI,EAAE,OADV;YAEIC,MAAM,EAAEL;UAFZ,CAbwC,EAiBxC;YACII,IAAI,EAAE,QADV;YAEIC,MAAM,EAAE,CAAC,GAAD,EAAMJ,KAAK,CAACnB,MAAZ;UAFZ,CAjBwC,EAqBxC;YACIsB,IAAI,EAAE,OADV;YAEIC,MAAM,EAAEJ;UAFZ,CArBwC,CAA9B,CAAd;QA0BH,CAnDD,MAmDO,IAAIL,GAAG,KAAM,GAAEpC,UAAW,MAA1B,EAAiC;UACpC;UACA,MAAM+C,IAAI,GAAG,CACT,EADS,EACL,GADK,EACA,GADA,EACK,EADL,EACS,GADT,EACc,EADd,EACkB,GADlB,EACuB,GADvB,EAC4B,GAD5B,EACiC,GADjC,EAET,GAFS,EAEJ,GAFI,EAEC,GAFD,EAEM,GAFN,EAEW,EAFX,EAEe,GAFf,EAEoB,GAFpB,EAEyB,GAFzB,EAE8B,GAF9B,EAEmC,EAFnC,EAGT,EAHS,EAGL,GAHK,EAGA,GAHA,EAGK,EAHL,EAGS,GAHT,EAGc,EAHd,CAAb;UAMA1B,MAAM,CAAC0B,IAAI,CAACzB,MAAN,CAAN,CAAoBE,IAApB,CAAyB,EAAzB;UAEAiC,WAAW,GAAGtD,EAAE,CAACuC,SAAH,CAAagB,gBAAb,CAA8B,CACxC;YACId,IAAI,EAAE,QADV;YAEIC,MAAM,EAAE,CAAC,GAAD,EAAME,IAAI,CAACzB,MAAX;UAFZ,CADwC,EAKxC;YACIsB,IAAI,EAAE,OADV;YAEIC,MAAM,EAAEE;UAFZ,CALwC,CAA9B,CAAd;QAUH,CApBM,MAoBA;UACHC,IAAI,CAAE,kBAAiBZ,GAAI,EAAvB,CAAJ;UACA;QACH;;QAEDF,OAAO,CAACgB,OAAR,CAAgBO,WAAhB;MACH,CAnFD;MAqFAxD,aAAa,CAACkD,aAAd,CAA4B,MAAM;QAC9B9B,MAAM,CAACR,CAAC,CAACuC,IAAF,CAAOC,KAAP,CAAaC,KAAb,EAAD,CAAN,CAA6B9B,IAA7B,CAAkC,CAAlC;QAEAH,MAAM,CAACZ,WAAW,CAAC8C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+CC,UAA/C;QACAnC,MAAM,CAACZ,WAAW,CAACsC,IAAZ,EAAD,CAAN,CAA2BvB,IAA3B,CAAgC,uBAAhC;QAEAH,MAAM,CAACX,WAAW,CAAC6C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+CC,UAA/C;QACAnC,MAAM,CAACX,WAAW,CAACqC,IAAZ,EAAD,CAAN,CAA2BvB,IAA3B,CAAgC,wBAAhC;QAEAH,MAAM,CAACV,WAAW,CAAC4C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+CC,UAA/C;QACAnC,MAAM,CAACV,WAAW,CAACoC,IAAZ,EAAD,CAAN,CAA2BvB,IAA3B,CAAgC,mBAAhC;QAEAH,MAAM,CAACT,WAAW,CAAC2C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+CC,UAA/C;QACAnC,MAAM,CAACT,WAAW,CAACmC,IAAZ,EAAD,CAAN,CAA2BvB,IAA3B,CAAgC,sBAAhC;QAEAM,IAAI;MACP,CAhBD;IAiBH,CAvGC,CAAF;IAyGAZ,EAAE,CAAC,sBAAD,EAAyB,UAASY,IAAT,EAAe;MACtCC,KAAK,CAAClB,CAAD,EAAI,MAAJ,CAAL,CAAiBmB,GAAjB,CAAqBC,QAArB,CAA8B,UAASC,OAAT,EAAkB;QAC5Cb,MAAM,CAACa,OAAO,CAACC,QAAT,CAAN,CAAyBX,IAAzB,CAA8B,aAA9B;QAEA,MAAMY,GAAG,GAAGF,OAAO,CAACE,GAApB;QACA,IAAIC,IAAJ;;QAEA,IAAID,GAAG,KAAM,GAAEpC,UAAW,MAA1B,EAAiC;UAC7B,MAAM+C,IAAI,GAAG,IAAIR,IAAJ,CAAS,CAAC,4BAAD,CAAT,CAAb;UAEAF,IAAI,GAAGlC,EAAE,CAACuC,SAAH,CAAaC,SAAb,CAAuB,CAC1B,CAAC;YACGC,IAAI,EAAE,QADT;YAEGC,MAAM,EAAE,CAAC,GAAD,EAAME,IAAI,CAACD,IAAX;UAFX,CAAD,CAD0B,EAK1BC,IAL0B,CAAvB,CAAP;QAOH,CAVD,MAUO,IAAIX,GAAG,KAAM,GAAEpC,UAAW,MAA1B,EAAiC;UACpC,MAAM+C,IAAI,GAAG,IAAIR,IAAJ,CAAS,CAAC,4BAAD,CAAT,CAAb;UAEAF,IAAI,GAAGlC,EAAE,CAACuC,SAAH,CAAaC,SAAb,CAAuB,CAC1B,CAAC;YACGC,IAAI,EAAE,QADT;YAEGC,MAAM,EAAE,CAAC,GAAD,EAAME,IAAI,CAACD,IAAX;UAFX,CAAD,CAD0B,EAK1BC,IAL0B,CAAvB,CAAP;QAOH,CAVM,MAUA;UACHC,IAAI,CAAE,kBAAiBZ,GAAI,EAAvB,CAAJ;UACA;QACH;;QAEDjC,EAAE,CAACuC,SAAH,CAAaO,qBAAb,CAAmCZ,IAAnC,EAAyCH,OAAO,CAACgB,OAAjD;MACH,CAhCD;MAkCA;AACZ;AACA;AACA;AACA;AACA;AACA;;MACY,MAAMS,KAAK,GAAG,IAAIxD,EAAE,CAACyD,gBAAP,EAAd;MACAnD,WAAW,CACNsC,IADL,CACU,wBADV,EAEKQ,IAFL,CAEU,oBAFV,EAEgCI,KAFhC;MAIA,MAAME,KAAK,GAAG,IAAI1D,EAAE,CAACyD,gBAAP,EAAd;MACAlD,WAAW,CACNqC,IADL,CACU,wBADV,EAEKQ,IAFL,CAEU,oBAFV,EAEgCM,KAFhC;MAIA,MAAMC,KAAK,GAAG,IAAI3D,EAAE,CAACyD,gBAAP,EAAd;MACAjD,WAAW,CACNoC,IADL,CACU,wBADV,EAEKQ,IAFL,CAEU,oBAFV,EAEgCO,KAFhC;MAIA;AACZ;AACA;AACA;;MACY7D,aAAa,CAAC8D,YAAd,CAA2B,KAA3B;MACA9D,aAAa,CAAC8D,YAAd,CAA2B,KAA3B;MACA9D,aAAa,CAAC8D,YAAd,CAA2B,KAA3B;MAEA;;MACApD,WAAW,CAACqD,UAAZ,CAAuB,oBAAvB;MAEA/D,aAAa,CAACkD,aAAd,CAA4B,MAAM;QAC9B9B,MAAM,CAACR,CAAC,CAACuC,IAAF,CAAOC,KAAP,CAAaC,KAAb,EAAD,CAAN,CAA6B9B,IAA7B,CAAkC,CAAlC;QAEAH,MAAM,CAACZ,WAAW,CAAC8C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+C/B,IAA/C,CAAoDmC,KAApD;QACAtC,MAAM,CAACZ,WAAW,CAACsC,IAAZ,EAAD,CAAN,CAA2BvB,IAA3B,CAAgC,wBAAhC;QAEAH,MAAM,CAACX,WAAW,CAAC6C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+C/B,IAA/C,CAAoDqC,KAApD;QACAxC,MAAM,CAACX,WAAW,CAACqC,IAAZ,EAAD,CAAN,CAA2BvB,IAA3B,CAAgC,4BAAhC;QAEAH,MAAM,CAACV,WAAW,CAAC4C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+CC,UAA/C;QACAnC,MAAM,CAACV,WAAW,CAAC4C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+ChC,GAA/C,CAAmDC,IAAnD,CAAwDsC,KAAxD;QACAzC,MAAM,CAACV,WAAW,CAACoC,IAAZ,EAAD,CAAN,CAA2BvB,IAA3B,CAAgC,wBAAhC;QAEAH,MAAM,CAACT,WAAW,CAAC2C,IAAZ,CAAiB,oBAAjB,CAAD,CAAN,CAA+CC,UAA/C;QACAnC,MAAM,CAACT,WAAW,CAACmC,IAAZ,EAAD,CAAN,CAA2BvB,IAA3B,CAAgC,4BAAhC;QAEAH,MAAM,CAACpB,aAAa,CAACgE,MAAf,CAAN,CAA6BC,OAA7B,CAAqC,EAArC;QAEApC,IAAI;MACP,CAnBD;IAoBH,CAxFC,CAAF;EAyFH,CAnTO,CAAR;AAoTH,CAjUI,CAAL"}