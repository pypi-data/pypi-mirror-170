{"version":3,"file":"repositoryCommitsCollectionTests.js","names":["suite","url","start","collection","beforeEach","RB","RepositoryCommits","urlBase","describe","it","spyOn","$","and","callFake","request","expect","toBe","type","success","stat","commits","author_name","date","id","message","parent","review_request_url","join","fetch","ajax","toHaveBeenCalled","length","at","get","getUTCHours","_","result"],"sources":["../../../../../../../static/rb/js/resources/collections/tests/repositoryCommitsCollectionTests.es6.js"],"sourcesContent":["suite('rb/resources/collections/RepositoryCommits', function() {\n    const url = '/api/repositories/123/commits/';\n    const start = '859d4e148ce3ce60bbda6622cdbe5c2c2f8d9817';\n    let collection;\n\n    beforeEach(function() {\n        collection = new RB.RepositoryCommits([], {\n            urlBase: url,\n            start: start,\n        });\n    });\n\n    describe('Methods', function() {\n        it('fetch', function() {\n            spyOn($, 'ajax').and.callFake(request => {\n                expect(request.url).toBe(`${url}?start=${start}`);\n                expect(request.type).toBe('GET');\n\n                request.success({\n                    stat: 'ok',\n                    commits: [\n                        {\n                            author_name: 'Christian Hammond',\n                            date: '2013-06-25T23:31:22Z',\n                            id: '859d4e148ce3ce60bbda6622cdbe5c2c2f8d9817',\n                            message: \"Merge branch 'release-1.7.x'\",\n                            parent: '92463764015ef463b4b6d1a1825fee7aeec8cb15',\n                            review_request_url: '',\n                        },\n                        {\n                            author_name: 'Christian Hammond',\n                            date: '2013-06-25T23:30:59Z',\n                            id: '92463764015ef463b4b6d1a1825fee7aeec8cb15',\n                            message: 'Fixed the bug number for the ' +\n                                     'blacktriangledown bug.',\n                            parent: '84c730c7823b653a5bbcc007188d5c85a7c4ac58',\n                            review_request_url: 'http://example.com/r/18274/',\n                        },\n                        {\n                            author_name: 'Christian Hammond',\n                            date: '2013-06-25T22:53:32Z',\n                            id: '84c730c7823b653a5bbcc007188d5c85a7c4ac58',\n                            message: [\n                                \"Don't expose child resources in \",\n                                'ValidateDiffResource.\\n\\nFor convenience, ',\n                                'ValidateDiffResource inherited from ',\n                                'DiffResource.\\nThis brought along the child ',\n                                \"resources, which weren't valid to have.\\n\",\n                                'That ended up breaking docs, which tried ',\n                                'to traverse them.'].join(''),\n                            parent: '',\n                            review_request_url: '',\n                        },\n                    ],\n                });\n\n            });\n\n            collection.fetch();\n\n            expect($.ajax).toHaveBeenCalled();\n            expect(collection.length).toBe(3);\n            expect(collection.at(0).get('authorName'))\n                .toBe('Christian Hammond');\n            expect(collection.at(1).get('date').getUTCHours()).toBe(23);\n            expect(collection.at(2).get('summary'))\n                .toBe(\"Don't expose child resources in ValidateDiffResource.\");\n            expect(collection.at(1).get('reviewRequestURL'))\n                .toBe('http://example.com/r/18274/');\n        });\n\n        it('url', function() {\n            expect(_.result(collection, 'url')).toBe(`${url}?start=${start}`);\n        });\n    });\n});\n"],"mappings":";;AAAAA,KAAK,CAAC,4CAAD,EAA+C,YAAW;EAC3D,MAAMC,GAAG,GAAG,gCAAZ;EACA,MAAMC,KAAK,GAAG,0CAAd;EACA,IAAIC,UAAJ;EAEAC,UAAU,CAAC,YAAW;IAClBD,UAAU,GAAG,IAAIE,EAAE,CAACC,iBAAP,CAAyB,EAAzB,EAA6B;MACtCC,OAAO,EAAEN,GAD6B;MAEtCC,KAAK,EAAEA;IAF+B,CAA7B,CAAb;EAIH,CALS,CAAV;EAOAM,QAAQ,CAAC,SAAD,EAAY,YAAW;IAC3BC,EAAE,CAAC,OAAD,EAAU,YAAW;MACnBC,KAAK,CAACC,CAAD,EAAI,MAAJ,CAAL,CAAiBC,GAAjB,CAAqBC,QAArB,CAA8BC,OAAO,IAAI;QACrCC,MAAM,CAACD,OAAO,CAACb,GAAT,CAAN,CAAoBe,IAApB,CAA0B,GAAEf,GAAI,UAASC,KAAM,EAA/C;QACAa,MAAM,CAACD,OAAO,CAACG,IAAT,CAAN,CAAqBD,IAArB,CAA0B,KAA1B;QAEAF,OAAO,CAACI,OAAR,CAAgB;UACZC,IAAI,EAAE,IADM;UAEZC,OAAO,EAAE,CACL;YACIC,WAAW,EAAE,mBADjB;YAEIC,IAAI,EAAE,sBAFV;YAGIC,EAAE,EAAE,0CAHR;YAIIC,OAAO,EAAE,8BAJb;YAKIC,MAAM,EAAE,0CALZ;YAMIC,kBAAkB,EAAE;UANxB,CADK,EASL;YACIL,WAAW,EAAE,mBADjB;YAEIC,IAAI,EAAE,sBAFV;YAGIC,EAAE,EAAE,0CAHR;YAIIC,OAAO,EAAE,kCACA,wBALb;YAMIC,MAAM,EAAE,0CANZ;YAOIC,kBAAkB,EAAE;UAPxB,CATK,EAkBL;YACIL,WAAW,EAAE,mBADjB;YAEIC,IAAI,EAAE,sBAFV;YAGIC,EAAE,EAAE,0CAHR;YAIIC,OAAO,EAAE,CACL,kCADK,EAEL,4CAFK,EAGL,sCAHK,EAIL,8CAJK,EAKL,2CALK,EAML,2CANK,EAOL,mBAPK,EAOgBG,IAPhB,CAOqB,EAPrB,CAJb;YAYIF,MAAM,EAAE,EAZZ;YAaIC,kBAAkB,EAAE;UAbxB,CAlBK;QAFG,CAAhB;MAsCH,CA1CD;MA4CAvB,UAAU,CAACyB,KAAX;MAEAb,MAAM,CAACJ,CAAC,CAACkB,IAAH,CAAN,CAAeC,gBAAf;MACAf,MAAM,CAACZ,UAAU,CAAC4B,MAAZ,CAAN,CAA0Bf,IAA1B,CAA+B,CAA/B;MACAD,MAAM,CAACZ,UAAU,CAAC6B,EAAX,CAAc,CAAd,EAAiBC,GAAjB,CAAqB,YAArB,CAAD,CAAN,CACKjB,IADL,CACU,mBADV;MAEAD,MAAM,CAACZ,UAAU,CAAC6B,EAAX,CAAc,CAAd,EAAiBC,GAAjB,CAAqB,MAArB,EAA6BC,WAA7B,EAAD,CAAN,CAAmDlB,IAAnD,CAAwD,EAAxD;MACAD,MAAM,CAACZ,UAAU,CAAC6B,EAAX,CAAc,CAAd,EAAiBC,GAAjB,CAAqB,SAArB,CAAD,CAAN,CACKjB,IADL,CACU,uDADV;MAEAD,MAAM,CAACZ,UAAU,CAAC6B,EAAX,CAAc,CAAd,EAAiBC,GAAjB,CAAqB,kBAArB,CAAD,CAAN,CACKjB,IADL,CACU,6BADV;IAEH,CAxDC,CAAF;IA0DAP,EAAE,CAAC,KAAD,EAAQ,YAAW;MACjBM,MAAM,CAACoB,CAAC,CAACC,MAAF,CAASjC,UAAT,EAAqB,KAArB,CAAD,CAAN,CAAoCa,IAApC,CAA0C,GAAEf,GAAI,UAASC,KAAM,EAA/D;IACH,CAFC,CAAF;EAGH,CA9DO,CAAR;AA+DH,CA3EI,CAAL"}