{"version":3,"file":"statusUpdatesEntryModel.js","names":["RB","ReviewRequestPage","StatusUpdatesEntry","Entry","extend","defaults","_","diffCommentsData","localSitePrefix","pendingStatusUpdates","reviewRequestId","reviews","prototype","parse","attrs","reviewRequest","reviewRequestEditor","get","reviewsData","map","reviewData","createReview","id","bodyBottom","bodyTop","public","shipIt","call"],"sources":["../../../../../../static/rb/js/reviewRequestPage/models/statusUpdatesEntryModel.es6.js"],"sourcesContent":["/**\n * An entry on the review request page for status updates.\n *\n * This stores common state needed for an entry containing status updates\n * made on a review request.\n *\n * See :js:class:`RB.ReviewRequestPage.Entry` for additional model attributes.\n *\n * Model Attributes:\n *     diffCommentsData (Array):\n *         An array of data for comments made on diffs. Each entry is an\n *         array in the format of ``[comment_id, key]``, where the key is\n *         a value for internal use that indicates the filediff or\n *         interfilediff range to use for loading diff fragments.\n *\n *     localSitePrefix (string):\n *         The local site prefix to use, if any.\n *\n *     pendingStatusUpdates (boolean):\n *         Whether this entry is still pending completed status updates.\n *\n *     reviewRequestId (number):\n *         The ID of the review request that this status update belongs to.\n *\n *     reviews (Array):\n *         An array of objects representing attributes for reviews for the\n *         status updates.\n */\nRB.ReviewRequestPage.StatusUpdatesEntry = RB.ReviewRequestPage.Entry.extend({\n    /**\n     * Return the default attributes for the status update entry.\n     *\n     * This must be a method because the returned object contains mutable state\n     * (e.g., arrays) that would be the same for each instance of a model\n     * instantiated with default attributes.\n     *\n     * Returns:\n     *     object:\n     *     The default attributes.\n     */\n    defaults() {\n        return _.defaults({\n            diffCommentsData: [],\n            localSitePrefix: null,\n            pendingStatusUpdates: false,\n            reviewRequestId: null,\n            reviews: [],\n        }, RB.ReviewRequestPage.Entry.prototype.defaults);\n    },\n\n    /**\n     * Parse attributes for the model.\n     *\n     * Args:\n     *     attrs (object):\n     *         The attributes provided when constructing the model instance.\n     *\n     * Returns:\n     *     object:\n     *     The resulting attributes used for the model instance.\n     */\n    parse(attrs) {\n        const reviewRequest = attrs.reviewRequestEditor.get('reviewRequest');\n        const reviewsData = attrs.reviewsData || [];\n        const reviews = reviewsData.map(\n            reviewData => reviewRequest.createReview(reviewData.id, {\n                bodyBottom: reviewData.bodyBottom,\n                bodyTop: reviewData.bodyTop,\n                'public': reviewData.public,\n                shipIt: reviewData.shipIt,\n            }));\n\n        return _.extend(\n            RB.ReviewRequestPage.Entry.prototype.parse.call(this, attrs),\n            {\n                diffCommentsData: attrs.diffCommentsData,\n                localSitePrefix: reviewRequest.get('localSitePrefix'),\n                pendingStatusUpdates: attrs.pendingStatusUpdates,\n                reviewRequestId: reviewRequest.id,\n                reviews: reviews,\n            });\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,iBAAH,CAAqBC,kBAArB,GAA0CF,EAAE,CAACC,iBAAH,CAAqBE,KAArB,CAA2BC,MAA3B,CAAkC;EACxE;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,QAAQ,GAAG;IACP,OAAOC,CAAC,CAACD,QAAF,CAAW;MACdE,gBAAgB,EAAE,EADJ;MAEdC,eAAe,EAAE,IAFH;MAGdC,oBAAoB,EAAE,KAHR;MAIdC,eAAe,EAAE,IAJH;MAKdC,OAAO,EAAE;IALK,CAAX,EAMJX,EAAE,CAACC,iBAAH,CAAqBE,KAArB,CAA2BS,SAA3B,CAAqCP,QANjC,CAAP;EAOH,CApBuE;;EAsBxE;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIQ,KAAK,CAACC,KAAD,EAAQ;IACT,MAAMC,aAAa,GAAGD,KAAK,CAACE,mBAAN,CAA0BC,GAA1B,CAA8B,eAA9B,CAAtB;IACA,MAAMC,WAAW,GAAGJ,KAAK,CAACI,WAAN,IAAqB,EAAzC;IACA,MAAMP,OAAO,GAAGO,WAAW,CAACC,GAAZ,CACZC,UAAU,IAAIL,aAAa,CAACM,YAAd,CAA2BD,UAAU,CAACE,EAAtC,EAA0C;MACpDC,UAAU,EAAEH,UAAU,CAACG,UAD6B;MAEpDC,OAAO,EAAEJ,UAAU,CAACI,OAFgC;MAGpD,UAAUJ,UAAU,CAACK,MAH+B;MAIpDC,MAAM,EAAEN,UAAU,CAACM;IAJiC,CAA1C,CADF,CAAhB;IAQA,OAAOpB,CAAC,CAACF,MAAF,CACHJ,EAAE,CAACC,iBAAH,CAAqBE,KAArB,CAA2BS,SAA3B,CAAqCC,KAArC,CAA2Cc,IAA3C,CAAgD,IAAhD,EAAsDb,KAAtD,CADG,EAEH;MACIP,gBAAgB,EAAEO,KAAK,CAACP,gBAD5B;MAEIC,eAAe,EAAEO,aAAa,CAACE,GAAd,CAAkB,iBAAlB,CAFrB;MAGIR,oBAAoB,EAAEK,KAAK,CAACL,oBAHhC;MAIIC,eAAe,EAAEK,aAAa,CAACO,EAJnC;MAKIX,OAAO,EAAEA;IALb,CAFG,CAAP;EASH;;AArDuE,CAAlC,CAA1C"}