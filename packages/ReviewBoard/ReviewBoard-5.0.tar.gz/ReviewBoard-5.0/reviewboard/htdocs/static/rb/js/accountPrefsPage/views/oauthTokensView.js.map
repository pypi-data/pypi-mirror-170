{"version":3,"file":"oauthTokensView.js","names":["xhrUnknownErrorText","OAuthTokenItem","Djblets","Config","ListItem","extend","defaults","_","apiURL","application","showRemove","prototype","OAuthTokenItemView","ListItemView","template","actionHandlers","_onDeleteClicked","RB","apiCall","url","model","get","method","success","trigger","OAuthTokensView","Backbone","View","initialize","options","collection","Collection","tokens","render","$el","html","emptyText","_$list","$","_listView","ListView","ItemView","List","prependTo"],"sources":["../../../../../../static/rb/js/accountPrefsPage/views/oauthTokensView.es6.js"],"sourcesContent":["(function() {\n\n\nconst xhrUnknownErrorText = gettext('An unexpected error occurred. Could not delete OAuth2 token.');\n\n\n/**\n * A model representing an OAuth token.\n */\nconst OAuthTokenItem = Djblets.Config.ListItem.extend({\n    defaults: _.defaults({\n        apiURL: '',\n        application: '',\n        showRemove: true,\n    }, Djblets.Config.ListItem.prototype.defaults),\n});\n\n\n/**\n * A view representing a single OAuthTokenItem.\n */\nconst OAuthTokenItemView = Djblets.Config.ListItemView.extend({\n    template: _.template(dedent`\n        <span class=\"config-token-name\"><%- application %></span>\n    `),\n\n    actionHandlers: {\n        'delete': '_onDeleteClicked',\n    },\n\n    /**\n     * Delete the OAuth2 token.\n     */\n    _onDeleteClicked() {\n        RB.apiCall({\n            url: this.model.get('apiURL'),\n            method: 'DELETE',\n            success: () => this.model.trigger('destroy'),\n        });\n    },\n});\n\n\n/**\n * A view for managing OAuth2 tokens.\n */\nRB.OAuthTokensView = Backbone.View.extend({\n    template: _.template(dedent`\n        <div class=\"oauth-token-list\">\n         <div class=\"djblets-l-config-forms-container -is-top-flush\">\n          <%- emptyText %>\n         </div>\n        </div>\n    `),\n\n    /**\n     * Initialize the view.\n     *\n     * Args:\n     *     options (object):\n     *         The view options.\n     *\n     * Option Args:\n     *     tokens (array of object):\n     *         The serialized token attributes.\n     */\n    initialize(options) {\n        this.collection = new Backbone.Collection(options.tokens, {\n            model: OAuthTokenItem,\n        });\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     RB.OAuthTokensView:\n     *     This view.\n     */\n    render() {\n        this.$el.html(this.template({\n            emptyText: _`You do not have any OAuth2 tokens.`,\n        }));\n        this._$list = this.$('.oauth-token-list');\n        this._listView = new Djblets.Config.ListView({\n            ItemView: OAuthTokenItemView,\n            model: new Djblets.Config.List({}, {\n                collection: this.collection,\n            }),\n        });\n\n        this._listView\n            .render().$el\n            .prependTo(this._$list);\n\n        return this;\n    },\n});\n\n\n})();\n"],"mappings":";;AAAA,CAAC,YAAW;EAGZ,MAAMA,mBAAmB,0EAAzB;EAGA;AACA;AACA;;EACA,MAAMC,cAAc,GAAGC,OAAO,CAACC,MAAR,CAAeC,QAAf,CAAwBC,MAAxB,CAA+B;IAClDC,QAAQ,EAAEC,CAAC,CAACD,QAAF,CAAW;MACjBE,MAAM,EAAE,EADS;MAEjBC,WAAW,EAAE,EAFI;MAGjBC,UAAU,EAAE;IAHK,CAAX,EAIPR,OAAO,CAACC,MAAR,CAAeC,QAAf,CAAwBO,SAAxB,CAAkCL,QAJ3B;EADwC,CAA/B,CAAvB;EASA;AACA;AACA;;EACA,MAAMM,kBAAkB,GAAGV,OAAO,CAACC,MAAR,CAAeU,YAAf,CAA4BR,MAA5B,CAAmC;IAC1DS,QAAQ,EAAEP,CAAC,CAACO,QAAF,CAAkB,2DAAlB,CADgD;IAK1DC,cAAc,EAAE;MACZ,UAAU;IADE,CAL0C;;IAS1D;AACJ;AACA;IACIC,gBAAgB,GAAG;MACfC,EAAE,CAACC,OAAH,CAAW;QACPC,GAAG,EAAE,KAAKC,KAAL,CAAWC,GAAX,CAAe,QAAf,CADE;QAEPC,MAAM,EAAE,QAFD;QAGPC,OAAO,EAAE,MAAM,KAAKH,KAAL,CAAWI,OAAX,CAAmB,SAAnB;MAHR,CAAX;IAKH;;EAlByD,CAAnC,CAA3B;EAsBA;AACA;AACA;;EACAP,EAAE,CAACQ,eAAH,GAAqBC,QAAQ,CAACC,IAAT,CAActB,MAAd,CAAqB;IACtCS,QAAQ,EAAEP,CAAC,CAACO,QAAF,CAAkB;AAChC;AACA;AACA;AACA,OAJc,CAD4B;;IAStC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACIc,UAAU,CAACC,OAAD,EAAU;MAChB,KAAKC,UAAL,GAAkB,IAAIJ,QAAQ,CAACK,UAAb,CAAwBF,OAAO,CAACG,MAAhC,EAAwC;QACtDZ,KAAK,EAAEnB;MAD+C,CAAxC,CAAlB;IAGH,CAxBqC;;IA0BtC;AACJ;AACA;AACA;AACA;AACA;AACA;IACIgC,MAAM,GAAG;MACL,KAAKC,GAAL,CAASC,IAAT,CAAc,KAAKrB,QAAL,CAAc;QACxBsB,SAAS;MADe,CAAd,CAAd;MAGA,KAAKC,MAAL,GAAc,KAAKC,CAAL,CAAO,mBAAP,CAAd;MACA,KAAKC,SAAL,GAAiB,IAAIrC,OAAO,CAACC,MAAR,CAAeqC,QAAnB,CAA4B;QACzCC,QAAQ,EAAE7B,kBAD+B;QAEzCQ,KAAK,EAAE,IAAIlB,OAAO,CAACC,MAAR,CAAeuC,IAAnB,CAAwB,EAAxB,EAA4B;UAC/BZ,UAAU,EAAE,KAAKA;QADc,CAA5B;MAFkC,CAA5B,CAAjB;;MAOA,KAAKS,SAAL,CACKN,MADL,GACcC,GADd,CAEKS,SAFL,CAEe,KAAKN,MAFpB;;MAIA,OAAO,IAAP;IACH;;EAlDqC,CAArB,CAArB;AAsDC,CApGD"}