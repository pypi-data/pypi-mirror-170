{"version":3,"file":"dateInlineEditorViewTests.js","names":["suite","initialDate","view","$container","beforeEach","$","appendTo","$testsScratch","describe","it","RB","DateInlineEditorView","el","render","expect","options","descriptorText","toBe","minDate","maxDate","rawValue","$buttons","length","$field","children","firstElementChild","outerHTML","firstChild","textContent","afterEach","hideEditor","startEdit","tagName","undefined","value","setValue","save","$el","innerHTML","spyOn","trigger","_scheduleUpdateDirtyState","toHaveBeenCalled"],"sources":["../../../../../../../static/rb/js/ui/views/tests/dateInlineEditorViewTests.es6.js"],"sourcesContent":["suite('rb/ui/views/DateInlineEditorView', function() {\n    const initialDate = '2022-09-16';\n    let view;\n    let $container;\n\n    beforeEach(function() {\n        $container = $('<div/>').appendTo($testsScratch);\n    });\n\n    describe('Construction', function() {\n        it('Default', function() {\n            view = new RB.DateInlineEditorView({\n                el: $container,\n            });\n            view.render();\n\n            expect(view.options.descriptorText).toBe(null);\n            expect(view.options.minDate).toBe(null);\n            expect(view.options.maxDate).toBe(null);\n            expect(view.options.rawValue).toBe(null);\n\n            expect(view.$buttons.length).toBe(1);\n            expect(view.$field.length).toBe(1);\n            expect(view.$field[0].children.length).toBe(1);\n            expect(view.$field[0].firstElementChild.outerHTML)\n                .toBe('<input type=\"date\">');\n\n        });\n\n        it('With options provided', function() {\n            view = new RB.DateInlineEditorView({\n                el: $container,\n                rawValue: initialDate,\n                descriptorText: 'Test',\n                minDate: '2020-10-10',\n                maxDate: '2030-10-10',\n            });\n            view.render();\n\n            expect(view.options.descriptorText).toBe('Test');\n            expect(view.options.minDate).toBe('2020-10-10');\n            expect(view.options.maxDate).toBe('2030-10-10');\n            expect(view.options.rawValue).toBe(initialDate);\n\n            expect(view.$buttons.length).toBe(1);\n            expect(view.$field.length).toBe(1);\n            expect(view.$field[0].firstChild.textContent).toBe('Test');\n            expect(view.$field[0].firstElementChild.outerHTML).toBe(\n                '<input type=\"date\" max=\"2030-10-10\" min=\"2020-10-10\">');\n\n        });\n    });\n\n    describe('Operations', function() {\n        afterEach(function() {\n            view.hideEditor();\n        });\n\n        describe('startEdit', function() {\n            it('With an initial date', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    rawValue: initialDate,\n                });\n                view.render();\n                view.startEdit();\n\n                expect(view.$field[0].firstChild.tagName).toBe(undefined);\n                expect(view.$field[0].firstElementChild.tagName).toBe('INPUT');\n                expect(view.$field[0].firstElementChild.value).toBe(initialDate);\n            });\n\n            it('With no initial date', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                });\n                view.render();\n                view.startEdit();\n\n                expect(view.$field[0].firstChild.tagName).toBe(undefined);\n                expect(view.$field[0].firstElementChild.tagName).toBe('INPUT');\n                expect(view.$field[0].firstElementChild.value).toBe('');\n            });\n\n            it('With a descriptor text', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    descriptorText: 'Test',\n                });\n                view.render();\n                view.startEdit();\n\n                expect(view.$field[0].firstChild.tagName).toBe(undefined);\n                expect(view.$field[0].firstChild.textContent).toBe('Test');\n                expect(view.$field[0].firstElementChild.value).toBe('');\n            });\n        });\n\n        describe('save', function() {\n            it('With a new date', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                });\n                view.render();\n                view.startEdit();\n\n                view.setValue(initialDate);\n                view.save();\n\n                expect(view.options.rawValue).toBe(initialDate);\n                expect(view.$el[0].innerHTML).toBe(initialDate);\n            });\n\n            it('With an empty value', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    rawValue: initialDate,\n                });\n                view.render();\n                view.startEdit();\n\n                view.setValue('');\n                view.save();\n\n                expect(view.options.rawValue).toBe('');\n                expect(view.$el[0].innerHTML).toBe('');\n            });\n\n            it('Without any changes made', function() {\n                view = new RB.DateInlineEditorView({\n                    el: $container,\n                    rawValue: initialDate,\n                });\n                view.render();\n                view.startEdit();\n\n                view.save();\n\n                expect(view.options.rawValue).toBe(initialDate);\n                expect(view.$el[0].innerHTML).toBe('');\n            });\n        });\n    });\n\n    describe('Events', function() {\n        it('On change', function() {\n            view = new RB.DateInlineEditorView({\n                el: $container,\n            });\n\n            spyOn(view, '_scheduleUpdateDirtyState');\n\n            view.render();\n            view.$field.trigger('change');\n\n            expect(view._scheduleUpdateDirtyState)\n                .toHaveBeenCalled();\n        });\n    });\n});\n"],"mappings":"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"}