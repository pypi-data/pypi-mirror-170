{"version":3,"file":"branchesView.js","names":["RB","BranchesView","CollectionView","extend","tagName","itemViewType","BranchView","events","render","prototype","apply","arguments","collection","each","branch","get","trigger","_onAdded","_rendered","_onChange","selectedIx","$el","prop","models"],"sources":["../../../../../../static/rb/js/newReviewRequest/views/branchesView.es6.js"],"sourcesContent":["/**\n * A view for a collection of branches.\n *\n * This is presented as a ``<select>`` in the document.\n *\n * Users can listen to the \"selected\" event to know which branch is currently\n * chosen. This event will be triggered with the branch model as its argument.\n */\nRB.BranchesView = RB.CollectionView.extend({\n    tagName: 'select',\n\n    itemViewType: RB.BranchView,\n\n    events: {\n        'change': '_onChange',\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     RB.BranchesView:\n     *     This object, for chaining.\n     */\n    render: function() {\n        RB.CollectionView.prototype.render.apply(this, arguments);\n\n        this.collection.each(branch => {\n            if (branch.get('isDefault')) {\n                this.trigger('selected', branch);\n            }\n        });\n\n        return this;\n    },\n\n    /**\n     * Override for CollectionView._onAdded.\n     *\n     * If the newly-added branch is the default (for example, 'trunk' in SVN or\n     * 'master' in git), start with it selected.\n     *\n     * Args:\n     *     branch (RB.RepositoryBranch):\n     *         The newly-added branch.\n     */\n    _onAdded(branch) {\n        RB.CollectionView.prototype._onAdded.apply(this, arguments);\n\n        if (this._rendered && branch.get('isDefault')) {\n            this.trigger('selected', branch);\n        }\n    },\n\n    /**\n     * Callback for the 'change' event on the select node.\n     *\n     * Triggers 'selected' with the given model.\n     */\n    _onChange() {\n        const selectedIx = this.$el.prop('selectedIndex');\n        this.trigger('selected', this.collection.models[selectedIx]);\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,YAAH,GAAkBD,EAAE,CAACE,cAAH,CAAkBC,MAAlB,CAAyB;EACvCC,OAAO,EAAE,QAD8B;EAGvCC,YAAY,EAAEL,EAAE,CAACM,UAHsB;EAKvCC,MAAM,EAAE;IACJ,UAAU;EADN,CAL+B;;EASvC;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,MAAM,EAAE,YAAW;IACfR,EAAE,CAACE,cAAH,CAAkBO,SAAlB,CAA4BD,MAA5B,CAAmCE,KAAnC,CAAyC,IAAzC,EAA+CC,SAA/C;IAEA,KAAKC,UAAL,CAAgBC,IAAhB,CAAqBC,MAAM,IAAI;MAC3B,IAAIA,MAAM,CAACC,GAAP,CAAW,WAAX,CAAJ,EAA6B;QACzB,KAAKC,OAAL,CAAa,UAAb,EAAyBF,MAAzB;MACH;IACJ,CAJD;IAMA,OAAO,IAAP;EACH,CA1BsC;;EA4BvC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIG,QAAQ,CAACH,MAAD,EAAS;IACbd,EAAE,CAACE,cAAH,CAAkBO,SAAlB,CAA4BQ,QAA5B,CAAqCP,KAArC,CAA2C,IAA3C,EAAiDC,SAAjD;;IAEA,IAAI,KAAKO,SAAL,IAAkBJ,MAAM,CAACC,GAAP,CAAW,WAAX,CAAtB,EAA+C;MAC3C,KAAKC,OAAL,CAAa,UAAb,EAAyBF,MAAzB;IACH;EACJ,CA5CsC;;EA8CvC;AACJ;AACA;AACA;AACA;EACIK,SAAS,GAAG;IACR,MAAMC,UAAU,GAAG,KAAKC,GAAL,CAASC,IAAT,CAAc,eAAd,CAAnB;IACA,KAAKN,OAAL,CAAa,UAAb,EAAyB,KAAKJ,UAAL,CAAgBW,MAAhB,CAAuBH,UAAvB,CAAzB;EACH;;AAtDsC,CAAzB,CAAlB"}