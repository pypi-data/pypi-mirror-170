{"version":3,"file":"dashboardPageModelTests.js","names":["suite","page","beforeEach","RB","Admin","DashboardPage","describe","it","set","id","domID","viewClass","modelClass","modelAttrs","myAttr","viewOptions","myOption","onWidgetLoaded","jasmine","createSpy","loadWidgets","expect","widgets","length","toBe","model1","at","model2","toBeInstanceOf","Widget","get","toHaveBeenCalledTimes","toHaveBeenCalledWith","ViewType","WidgetView","widgetModel","spyOn","console","error","toHaveBeenCalled","args","calls","argsFor"],"sources":["../../../../../../../static/rb/js/admin/models/tests/dashboardPageModelTests.es6.js"],"sourcesContent":["suite('rb/admin/models/DashboardPage', function() {\n    let page;\n\n    beforeEach(function() {\n        page = new RB.Admin.DashboardPage();\n    });\n\n    describe('Widgets', function() {\n        it('Loading', function() {\n            page.set('widgetsData', [\n                {\n                    id: 'widget-1',\n                    domID: 'widget-1',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                    modelAttrs: {\n                        myAttr: 1,\n                    },\n                    viewOptions: {\n                        myOption: true,\n                    },\n                },\n                {\n                    id: 'widget-2',\n                    domID: 'widget-2',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                    modelAttrs: {\n                        myAttr: 2,\n                    },\n                    viewOptions: {\n                        myOption: false,\n                    },\n                },\n            ]);\n\n            const onWidgetLoaded = jasmine.createSpy();\n\n            page.loadWidgets(onWidgetLoaded);\n\n            expect(page.widgets.length).toBe(2);\n\n            const model1 = page.widgets.at(0);\n            const model2 = page.widgets.at(1);\n\n            expect(model1).toBeInstanceOf(RB.Admin.Widget);\n            expect(model1.get('myAttr')).toBe(1);\n\n            expect(model2).toBeInstanceOf(RB.Admin.Widget);\n            expect(model2.get('myAttr')).toBe(2);\n\n            expect(onWidgetLoaded).toHaveBeenCalledTimes(2);\n            expect(onWidgetLoaded).toHaveBeenCalledWith({\n                domID: 'widget-1',\n                ViewType: RB.Admin.WidgetView,\n                viewOptions: {\n                    myOption: true,\n                },\n                widgetModel: model1,\n            });\n            expect(onWidgetLoaded).toHaveBeenCalledWith({\n                domID: 'widget-2',\n                ViewType: RB.Admin.WidgetView,\n                viewOptions: {\n                    myOption: false,\n                },\n                widgetModel: model2,\n            });\n        });\n\n        it('Loading errors sandboxed', function() {\n            spyOn(console, 'error');\n\n            page.set('widgetsData', [\n                {\n                    id: 'widget-1',\n                    domID: 'widget-1',\n                    viewClass: 'BadViewClass',\n                    modelClass: 'BadModelClass',\n                },\n                {\n                    id: 'widget-2',\n                    domID: 'widget-2',\n                    viewClass: 'RB.Admin.WidgetView',\n                    modelClass: 'RB.Admin.Widget',\n                    modelAttrs: {\n                        myAttr: 2,\n                    },\n                    viewOptions: {\n                        myOption: false,\n                    },\n                },\n            ]);\n\n            const onWidgetLoaded = jasmine.createSpy();\n\n            page.loadWidgets(onWidgetLoaded);\n\n            expect(page.widgets.length).toBe(1);\n\n            const model1 = page.widgets.at(0);\n            expect(model1).toBeInstanceOf(RB.Admin.Widget);\n\n            expect(onWidgetLoaded).toHaveBeenCalledTimes(1);\n            expect(onWidgetLoaded).toHaveBeenCalledWith({\n                domID: 'widget-2',\n                ViewType: RB.Admin.WidgetView,\n                viewOptions: {\n                    myOption: false,\n                },\n                widgetModel: model1,\n            });\n\n            expect(console.error).toHaveBeenCalled();\n            const args = console.error.calls.argsFor(0);\n            expect(args[0]).toBe(\n                'Unable to render administration widget \"%s\": %s');\n            expect(args[1]).toBe('widget-1');\n        });\n    });\n});\n"],"mappings":"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"}