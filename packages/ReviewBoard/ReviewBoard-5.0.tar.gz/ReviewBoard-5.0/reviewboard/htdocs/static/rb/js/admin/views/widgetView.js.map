{"version":3,"file":"widgetView.js","names":["RB","Admin","WidgetView","Backbone","View","extend","events","canReload","reloadTitle","initialize","$header","$content","$footer","$headerActions","$footerActions","_$reloadAction","addHeaderAction","options","_buildAction","appendTo","addFooterAction","setReloading","reloading","console","assert","toggleClass","render","$el","children","id","cssClasses","title","renderWidget","trigger","updateSize","reloadContent","$action","$","addClass","el","append","html","text","attr"],"sources":["../../../../../../static/rb/js/admin/views/widgetView.es6.js"],"sourcesContent":["/**\n * The UI for an administration dashboard widget.\n *\n * This can be subclassed by widgets in order to add custom widget actions and\n * content. Subclasses can render the widget by overriding\n * :js:func:`RB.Admin.WidgetView.renderWidget()`, and respond to layout and\n * size changes by overriding :js:func:`RB.Admin.WidgetView.updateSize()`.\n */\nRB.Admin.WidgetView = Backbone.View.extend({\n    events: {\n        'click .js-action-reload': 'reloadContent',\n    },\n\n    /** Whether this widget can reload its contents on request. */\n    canReload: false,\n\n    /** Whether this widget can reload its contents on request. */\n    reloadTitle: null,\n\n    /**\n     * Initialize the widget.\n     */\n    initialize() {\n        this.$header = null;\n        this.$content = null;\n        this.$footer = null;\n        this.$headerActions = null;\n        this.$footerActions = null;\n        this._$reloadAction = null;\n    },\n\n    /**\n     * Add an action to the header.\n     *\n     * Args:\n     *     options (object):\n     *         Options for the action.\n     *\n     * Option Args:\n     *     id (string):\n     *         The ID of the action. This will be used to add a CSS class\n     *         in the form of :samp:`js-action-{id}`.\n     *\n     *     cssClasses (string, optional):\n     *         A space-separated list of CSS class names to add to the\n     *         action.\n     *\n     *     el (Element or jQuery, optional):\n     *         An optional element to add to the action. This takes\n     *         precedence over ``html`` and ``text``.\n     *\n     *     html (string, optional):\n     *         Optional HTML to insert into the action. This takes\n     *         precedence over ``text``.\n     *\n     *     text (string, optional):\n     *         Optional plain text to set inside the action.\n     *\n     *     title (string, optional):\n     *         Optional title to display when hovering over the action,\n     *         or for screen readers.\n     *\n     * Returns:\n     *     jQuery:\n     *     The resulting action element.\n     */\n    addHeaderAction(options) {\n        return this._buildAction(options)\n            .appendTo(this.$headerActions);\n    },\n\n    /**\n     * Add an action to the footer.\n     *\n     * Args:\n     *     options (object):\n     *         Options for the action.\n     *\n     * Option Args:\n     *     id (string):\n     *         The ID of the action. This will be used to add a CSS class\n     *         in the form of :samp:`js-action-{id}`.\n     *\n     *     cssClasses (string, optional):\n     *         A space-separated list of CSS class names to add to the\n     *         action.\n     *\n     *     el (Element or jQuery, optional):\n     *         An optional element to add to the action. This takes\n     *         precedence over ``html`` and ``text``.\n     *\n     *     html (string, optional):\n     *         Optional HTML to insert into the action. This takes\n     *         precedence over ``text``.\n     *\n     *     text (string, optional):\n     *         Optional plain text to set inside the action.\n     *\n     *     title (string, optional):\n     *         Optional title to display when hovering over the action,\n     *         or for screen readers.\n     *\n     * Returns:\n     *     jQuery:\n     *     The resulting action element.\n     */\n    addFooterAction(options) {\n        return this._buildAction(options)\n            .appendTo(this.$footerActions);\n    },\n\n    /**\n     * Show to the user whether or not content is loading/reloading.\n     *\n     * This will set whether the reloading action icon is spinning.\n     *\n     * Args:\n     *     reloading (boolean):\n     *         Whether to show to the user that content is reloading.\n     */\n    setReloading(reloading) {\n        console.assert(this.canReload,\n                       'This widget did not set canReload=true.');\n\n        this._$reloadAction.toggleClass('fa-spin', reloading);\n    },\n\n    /**\n     * Render the widget.\n     *\n     * Returns:\n     *     RB.Admin.WidgetView:\n     *     This widget, for chaining purposes.\n     */\n    render() {\n        this.$header = this.$el.children('.rb-c-admin-widget__header');\n        this.$content = this.$el.children('.rb-c-admin-widget__content');\n        this.$footer = this.$el.children('.rb-c-admin-widget__footer');\n        this.$headerActions = this.$header.children(\n            '.rb-c-admin-widget__actions');\n        this.$footerActions = this.$footer.children(\n            '.rb-c-admin-widget__actions');\n\n        if (this.canReload) {\n            this._$reloadAction = this.addHeaderAction({\n                id: 'reload',\n                cssClasses: 'fa fa-refresh',\n                title: this.reloadTitle,\n            });\n        }\n\n        this.renderWidget();\n\n        /* This is needed only for legacy widgets. */\n        this.$el.trigger('widget-shown');\n\n        return this;\n    },\n\n    /**\n     * Render the content of the widget.\n     *\n     * This will only be called once, when the widget is first rendered. It\n     * should take care of any initial content shown in the widget, and should\n     * attach any event listeners needed to perform updates to the content.\n     */\n    renderWidget() {\n    },\n\n    /**\n     * Update the rendered size of the widget.\n     *\n     * This may be called in response to changes in the widget size, such as\n     * when manually resizing the page or switching between desktop and mobile\n     * modes.\n     *\n     * This should perform any changes needed to the rendered size of any\n     * non-responsive UI elements in the widget.\n     */\n    updateSize() {\n    },\n\n    /**\n     * Reload the content inside the widget.\n     *\n     * This is called in response to a user clicking the Reload action,\n     * if :js:attr:`RB.Admin.WidgetView.canReload` is set to ``true``.\n     */\n    reloadContent() {\n    },\n\n    /**\n     * Build an action.\n     *\n     * Args:\n     *     options (object):\n     *         Options for the action.\n     *\n     * Option Args:\n     *     id (string):\n     *         The ID of the action. This will be used to add a CSS class\n     *         in the form of :samp:`js-action-{id}`.\n     *\n     *     cssClasses (string, optional):\n     *         A space-separated list of CSS class names to add to the\n     *         action.\n     *\n     *     el (Element or jQuery, optional):\n     *         An optional element to add to the action. This takes\n     *         precedence over ``html`` and ``text``.\n     *\n     *     html (string, optional):\n     *         Optional HTML to insert into the action. This takes\n     *         precedence over ``text``.\n     *\n     *     text (string, optional):\n     *         Optional plain text to set inside the action.\n     *\n     *     title (string, optional):\n     *         Optional title to display when hovering over the action,\n     *         or for screen readers.\n     *\n     * Returns:\n     *     jQuery:\n     *     The resulting action element.\n     */\n    _buildAction(options) {\n        console.assert(options.id, 'An \"id\" value must be provided');\n\n        const $action = $('<li class=\"rb-c-admin-widget__action\">')\n            .addClass(`js-action-${options.id}`);\n\n        if (options.cssClasses) {\n            $action.addClass(options.cssClasses);\n        }\n\n        if (options.el) {\n            $action.append(options.el);\n        } else if (options.html) {\n            $action.html(options.html);\n        } else if (options.text) {\n            $action.text(options.text);\n        }\n\n        if (options.title) {\n            $action.attr('title', options.title);\n        }\n\n        return $action;\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,KAAH,CAASC,UAAT,GAAsBC,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB;EACvCC,MAAM,EAAE;IACJ,2BAA2B;EADvB,CAD+B;;EAKvC;EACAC,SAAS,EAAE,KAN4B;;EAQvC;EACAC,WAAW,EAAE,IAT0B;;EAWvC;AACJ;AACA;EACIC,UAAU,GAAG;IACT,KAAKC,OAAL,GAAe,IAAf;IACA,KAAKC,QAAL,GAAgB,IAAhB;IACA,KAAKC,OAAL,GAAe,IAAf;IACA,KAAKC,cAAL,GAAsB,IAAtB;IACA,KAAKC,cAAL,GAAsB,IAAtB;IACA,KAAKC,cAAL,GAAsB,IAAtB;EACH,CArBsC;;EAuBvC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,eAAe,CAACC,OAAD,EAAU;IACrB,OAAO,KAAKC,YAAL,CAAkBD,OAAlB,EACFE,QADE,CACO,KAAKN,cADZ,CAAP;EAEH,CA7DsC;;EA+DvC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIO,eAAe,CAACH,OAAD,EAAU;IACrB,OAAO,KAAKC,YAAL,CAAkBD,OAAlB,EACFE,QADE,CACO,KAAKL,cADZ,CAAP;EAEH,CArGsC;;EAuGvC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIO,YAAY,CAACC,SAAD,EAAY;IACpBC,OAAO,CAACC,MAAR,CAAe,KAAKjB,SAApB,EACe,yCADf;;IAGA,KAAKQ,cAAL,CAAoBU,WAApB,CAAgC,SAAhC,EAA2CH,SAA3C;EACH,CArHsC;;EAuHvC;AACJ;AACA;AACA;AACA;AACA;AACA;EACII,MAAM,GAAG;IACL,KAAKhB,OAAL,GAAe,KAAKiB,GAAL,CAASC,QAAT,CAAkB,4BAAlB,CAAf;IACA,KAAKjB,QAAL,GAAgB,KAAKgB,GAAL,CAASC,QAAT,CAAkB,6BAAlB,CAAhB;IACA,KAAKhB,OAAL,GAAe,KAAKe,GAAL,CAASC,QAAT,CAAkB,4BAAlB,CAAf;IACA,KAAKf,cAAL,GAAsB,KAAKH,OAAL,CAAakB,QAAb,CAClB,6BADkB,CAAtB;IAEA,KAAKd,cAAL,GAAsB,KAAKF,OAAL,CAAagB,QAAb,CAClB,6BADkB,CAAtB;;IAGA,IAAI,KAAKrB,SAAT,EAAoB;MAChB,KAAKQ,cAAL,GAAsB,KAAKC,eAAL,CAAqB;QACvCa,EAAE,EAAE,QADmC;QAEvCC,UAAU,EAAE,eAF2B;QAGvCC,KAAK,EAAE,KAAKvB;MAH2B,CAArB,CAAtB;IAKH;;IAED,KAAKwB,YAAL;IAEA;;IACA,KAAKL,GAAL,CAASM,OAAT,CAAiB,cAAjB;IAEA,OAAO,IAAP;EACH,CArJsC;;EAuJvC;AACJ;AACA;AACA;AACA;AACA;AACA;EACID,YAAY,GAAG,CACd,CA/JsC;;EAiKvC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIE,UAAU,GAAG,CACZ,CA5KsC;;EA8KvC;AACJ;AACA;AACA;AACA;AACA;EACIC,aAAa,GAAG,CACf,CArLsC;;EAuLvC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIjB,YAAY,CAACD,OAAD,EAAU;IAClBM,OAAO,CAACC,MAAR,CAAeP,OAAO,CAACY,EAAvB,EAA2B,gCAA3B;IAEA,MAAMO,OAAO,GAAGC,CAAC,CAAC,wCAAD,CAAD,CACXC,QADW,CACD,aAAYrB,OAAO,CAACY,EAAG,EADtB,CAAhB;;IAGA,IAAIZ,OAAO,CAACa,UAAZ,EAAwB;MACpBM,OAAO,CAACE,QAAR,CAAiBrB,OAAO,CAACa,UAAzB;IACH;;IAED,IAAIb,OAAO,CAACsB,EAAZ,EAAgB;MACZH,OAAO,CAACI,MAAR,CAAevB,OAAO,CAACsB,EAAvB;IACH,CAFD,MAEO,IAAItB,OAAO,CAACwB,IAAZ,EAAkB;MACrBL,OAAO,CAACK,IAAR,CAAaxB,OAAO,CAACwB,IAArB;IACH,CAFM,MAEA,IAAIxB,OAAO,CAACyB,IAAZ,EAAkB;MACrBN,OAAO,CAACM,IAAR,CAAazB,OAAO,CAACyB,IAArB;IACH;;IAED,IAAIzB,OAAO,CAACc,KAAZ,EAAmB;MACfK,OAAO,CAACO,IAAR,CAAa,OAAb,EAAsB1B,OAAO,CAACc,KAA9B;IACH;;IAED,OAAOK,OAAP;EACH;;AAjPsC,CAArB,CAAtB"}