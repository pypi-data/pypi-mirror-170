{"version":3,"file":"serverActivityWidgetModel.js","names":["RB","Admin","ServerActivityWidget","Widget","extend","defaults","_","data","changeDescriptions","comments","reviewRequests","reviews","rangeStart","rangeEnd","show","legend","prototype","loadData","direction","fetch","attributes","then","rsp","json","set","range","range_start","range_end","activity_data","change_descriptions","review_requests","trigger"],"sources":["../../../../../../static/rb/js/admin/models/serverActivityWidgetModel.es6.js"],"sourcesContent":["/**\n * State and operations for the server activity graph admin widget.\n *\n * Model Attributes:\n *     data (dict):\n *         A dictionary containing the data to display for the graph.\n *\n *     rangeStart (string):\n *         The beginning of the date range shown, in YYYY-MM-DD format.\n *\n *     rangeEnd (string):\n *         The end of the date range shown, in YYYY-MM-DD format.\n */\nRB.Admin.ServerActivityWidget = RB.Admin.Widget.extend({\n    defaults: _.defaults({\n        data: {\n            changeDescriptions: [],\n            comments: [],\n            reviewRequests: [],\n            reviews: [],\n        },\n        rangeStart: '',\n        rangeEnd: '',\n        show: {\n            changeDescriptions: true,\n            comments: true,\n            legend: true,\n            reviewRequests: true,\n            reviews: true,\n        },\n    }, RB.Admin.Widget.prototype.defaults),\n\n    /**\n     * Reload data from the server.\n     *\n     * Args:\n     *     direction (string):\n     *         A direction to move from the currently-shown period.\n     */\n    loadData(direction) {\n        fetch(`widget-activity/?range_start=${this.attributes.rangeStart}&range_end=${this.attributes.rangeEnd}&direction=${direction}`)\n            .then(rsp => rsp.json())\n            .then(rsp => {\n                this.set({\n                    rangeStart: rsp.range.range_start,\n                    rangeEnd: rsp.range.range_end,\n                    data: {\n                        changeDescriptions: rsp.activity_data.change_descriptions,\n                        comments: rsp.activity_data.comments,\n                        reviewRequests: rsp.activity_data.review_requests,\n                        reviews: rsp.activity_data.reviews,\n                    }\n                });\n\n                this.trigger('updated');\n            });\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,EAAE,CAACC,KAAH,CAASC,oBAAT,GAAgCF,EAAE,CAACC,KAAH,CAASE,MAAT,CAAgBC,MAAhB,CAAuB;EACnDC,QAAQ,EAAEC,CAAC,CAACD,QAAF,CAAW;IACjBE,IAAI,EAAE;MACFC,kBAAkB,EAAE,EADlB;MAEFC,QAAQ,EAAE,EAFR;MAGFC,cAAc,EAAE,EAHd;MAIFC,OAAO,EAAE;IAJP,CADW;IAOjBC,UAAU,EAAE,EAPK;IAQjBC,QAAQ,EAAE,EARO;IASjBC,IAAI,EAAE;MACFN,kBAAkB,EAAE,IADlB;MAEFC,QAAQ,EAAE,IAFR;MAGFM,MAAM,EAAE,IAHN;MAIFL,cAAc,EAAE,IAJd;MAKFC,OAAO,EAAE;IALP;EATW,CAAX,EAgBPX,EAAE,CAACC,KAAH,CAASE,MAAT,CAAgBa,SAAhB,CAA0BX,QAhBnB,CADyC;;EAmBnD;AACJ;AACA;AACA;AACA;AACA;AACA;EACIY,QAAQ,CAACC,SAAD,EAAY;IAChBC,KAAK,CAAE,gCAA+B,KAAKC,UAAL,CAAgBR,UAAW,cAAa,KAAKQ,UAAL,CAAgBP,QAAS,cAAaK,SAAU,EAAzH,CAAL,CACKG,IADL,CACUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADjB,EAEKF,IAFL,CAEUC,GAAG,IAAI;MACT,KAAKE,GAAL,CAAS;QACLZ,UAAU,EAAEU,GAAG,CAACG,KAAJ,CAAUC,WADjB;QAELb,QAAQ,EAAES,GAAG,CAACG,KAAJ,CAAUE,SAFf;QAGLpB,IAAI,EAAE;UACFC,kBAAkB,EAAEc,GAAG,CAACM,aAAJ,CAAkBC,mBADpC;UAEFpB,QAAQ,EAAEa,GAAG,CAACM,aAAJ,CAAkBnB,QAF1B;UAGFC,cAAc,EAAEY,GAAG,CAACM,aAAJ,CAAkBE,eAHhC;UAIFnB,OAAO,EAAEW,GAAG,CAACM,aAAJ,CAAkBjB;QAJzB;MAHD,CAAT;MAWA,KAAKoB,OAAL,CAAa,SAAb;IACH,CAfL;EAgBH;;AA3CkD,CAAvB,CAAhC"}