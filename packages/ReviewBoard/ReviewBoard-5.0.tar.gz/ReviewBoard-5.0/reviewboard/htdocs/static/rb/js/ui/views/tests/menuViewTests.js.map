{"version":3,"file":"menuViewTests.js","names":["suite","ANIMATE_WAIT_MS","describe","it","view","RB","MenuView","render","$el","appendTo","$testsScratch","expect","el","id","toBe","toMatch","toHaveClass","not","tabIndex","attr","css","type","TYPE_BUTTON_MENU","ariaLabelledBy","ariaLabel","toBeUndefined","$controller","$","$menuItem","addItem","menuItem","tagName","$children","children","length","text","beforeEach","spyOn","and","callThrough","done","open","_","delay","isOpen","toBeTrue","animate","trigger","toHaveBeenCalledWith","defer","addClass","close","toBeFalse","itemEl","focusFirstItem","focus","toHaveBeenCalled","_activeItemIndex","focusLastItem","$item1","$item2","$item3","sendKeyDown","keyCode","Event","which","_focusItem","spy","jasmine","createSpy","on","ui","ENTER","ESCAPE","TAB","UP","DOWN","HOME","PAGE_UP","END","PAGE_DOWN"],"sources":["../../../../../../../static/rb/js/ui/views/tests/menuViewTests.es6.js"],"sourcesContent":["suite('rb/ui/views/MenuView', function() {\n    const ANIMATE_WAIT_MS = 300;\n\n    describe('Rendering', function() {\n        it('Standard menus', function() {\n            const view = new RB.MenuView();\n            view.render().$el.appendTo($testsScratch);\n\n            expect(view.el.id).toBe(view.id);\n            expect(view.el.id).toMatch(/^__rb-menu\\d+/);\n            expect(view.el).toHaveClass('rb-c-menu');\n            expect(view.el).not.toHaveClass('rb-c-button-group');\n            expect(view.el).not.toHaveClass('-is-vertical');\n            expect(view.el.tabIndex).toBe(-1);\n            expect(view.$el.attr('role')).toBe('menu');\n            expect(view.$el.css('display')).toBe('block');\n            expect(view.$el.css('visibility')).toBe('hidden');\n            expect(view.$el.css('opacity')).toBe('0');\n        });\n\n        it('Button menus', function() {\n            const view = new RB.MenuView({\n                type: RB.MenuView.TYPE_BUTTON_MENU,\n            });\n            view.render().$el.appendTo($testsScratch);\n\n            expect(view.el.id).toBe(view.id);\n            expect(view.el.id).toMatch(/^__rb-menu\\d+/);\n            expect(view.el).toHaveClass('rb-c-menu');\n            expect(view.el).toHaveClass('rb-c-button-group');\n            expect(view.el).toHaveClass('-is-vertical');\n            expect(view.el.tabIndex).toBe(-1);\n            expect(view.$el.attr('role')).toBe('menu');\n            expect(view.$el.css('display')).toBe('block');\n            expect(view.$el.css('visibility')).toBe('hidden');\n            expect(view.$el.css('opacity')).toBe('0');\n        });\n\n        it('With ariaLabelledBy', function() {\n            const view = new RB.MenuView({\n                type: RB.MenuView.TYPE_BUTTON_MENU,\n                ariaLabelledBy: 'abc123',\n                ariaLabel: 'unused label',\n            });\n            view.render().$el.appendTo($testsScratch);\n\n            expect(view.$el.attr('aria-label')).toBeUndefined();\n            expect(view.$el.attr('aria-labelledby')).toBe('abc123');\n        });\n\n        it('With ariaLabel', function() {\n            const view = new RB.MenuView({\n                type: RB.MenuView.TYPE_BUTTON_MENU,\n                ariaLabel: 'ARIA label',\n            });\n            view.render();\n\n            expect(view.$el.attr('aria-label')).toBe('ARIA label');\n            expect(view.$el.attr('aria-labelledby')).toBeUndefined();\n        });\n\n        it('With $controller', function() {\n            const $controller = $('<div>');\n\n            const view = new RB.MenuView({\n                type: RB.MenuView.TYPE_BUTTON_MENU,\n                $controller: $controller,\n            });\n            view.render();\n\n            expect(view.el.id).toBe(view.id);\n            expect(view.el.id).toMatch(/^__rb-menu\\d+/);\n            expect($controller.attr('aria-controls')).toBe(view.el.id);\n            expect($controller.attr('aria-expanded')).toBe('false');\n            expect($controller.attr('aria-haspopup')).toBe('true');\n        });\n    });\n\n    describe('Methods', function() {\n        describe('addItem', function() {\n            it('For standard menus', function() {\n                const view = new RB.MenuView();\n                view.render();\n\n                const $menuItem = view.addItem();\n                const menuItem = $menuItem[0];\n\n                expect(menuItem.tagName).toBe('DIV');\n                expect(menuItem.tabIndex).toBe(-1);\n                expect(menuItem).toHaveClass('rb-c-menu__item');\n                expect(menuItem).not.toHaveClass('rb-c-button');\n                expect($menuItem.attr('role')).toBe('menuitem');\n\n                const $children = view.$el.children();\n                expect($children.length).toBe(1);\n                expect($children[0]).toBe(menuItem);\n            });\n\n            it('For button menus', function() {\n                const view = new RB.MenuView({\n                    type: RB.MenuView.TYPE_BUTTON_MENU,\n                });\n                view.render();\n\n                const $menuItem = view.addItem();\n                const menuItem = $menuItem[0];\n\n                expect(menuItem.tagName).toBe('BUTTON');\n                expect(menuItem.tabIndex).toBe(-1);\n                expect(menuItem).toHaveClass('rb-c-menu__item');\n                expect(menuItem).toHaveClass('rb-c-button');\n                expect($menuItem.attr('type')).toBe('button');\n                expect($menuItem.attr('role')).toBe('menuitem');\n\n                const $children = view.$el.children();\n                expect($children.length).toBe(1);\n                expect($children[0]).toBe(menuItem);\n            });\n\n            it('With text', function() {\n                const view = new RB.MenuView({\n                    type: RB.MenuView.TYPE_BUTTON_MENU,\n                });\n                view.render();\n\n                const $menuItem = view.addItem({\n                    text: 'This is a test',\n                });\n                expect($menuItem.text()).toBe('This is a test');\n            });\n        });\n\n        describe('open', function() {\n            let $controller;\n            let view;\n\n            beforeEach(function() {\n                $controller = $('<div>')\n                    .appendTo($testsScratch);\n\n                view = new RB.MenuView({\n                    $controller: $controller,\n                });\n                view.render().$el.appendTo($testsScratch);\n\n                expect(view.$el.css('display')).toBe('block');\n                expect(view.$el.css('visibility')).toBe('hidden');\n                expect(view.$el.css('opacity')).toBe('0');\n\n                spyOn(view, 'trigger').and.callThrough();\n            });\n\n            it('Default behavior', function(done) {\n                view.open();\n\n                _.delay(() => {\n                    expect(view.isOpen).toBeTrue();\n                    expect(view.el).toHaveClass('-is-open');\n                    expect(view.el).not.toHaveClass('js-no-animation');\n                    expect(view.$el.css('display')).toBe('block');\n                    expect(view.$el.css('visibility')).toBe('visible');\n                    expect(view.$el.css('opacity')).toBe('1');\n                    expect($controller.attr('aria-expanded')).toBe('true');\n\n                    done();\n                }, ANIMATE_WAIT_MS);\n            });\n\n            it('With animate=false', function(done) {\n                view.open({\n                    animate: false,\n                });\n\n                expect(view.isOpen).toBeTrue();\n                expect(view.el).toHaveClass('-is-open');\n                expect(view.el).toHaveClass('js-no-animation');\n                expect(view.$el.css('display')).toBe('block');\n                expect(view.$el.css('visibility')).toBe('visible');\n                expect(view.$el.css('opacity')).toBe('1');\n                expect(view.trigger).toHaveBeenCalledWith('opening');\n                expect(view.trigger).toHaveBeenCalledWith('opened');\n                expect($controller.attr('aria-expanded')).toBe('true');\n\n                _.defer(() => {\n                    expect(view.el).not.toHaveClass('js-no-animation');\n                    done();\n                });\n            });\n        });\n\n        describe('close', function() {\n            let $controller;\n            let view;\n\n            beforeEach(function() {\n                $controller = $('<div aria-expanded=\"true\">')\n                    .appendTo($testsScratch);\n\n                view = new RB.MenuView({\n                    $controller: $controller,\n                });\n                view.render().$el.appendTo($testsScratch);\n\n                view.isOpen = true;\n                view.$el.addClass('-is-open');\n\n                expect(view.$el.css('display')).toBe('block');\n                expect(view.$el.css('visibility')).toBe('visible');\n                expect(view.$el.css('opacity')).toBe('1');\n\n                spyOn(view, 'trigger').and.callThrough();\n            });\n\n            it('Default behavior', function(done) {\n                view.close();\n\n                _.delay(() => {\n                    expect(view.isOpen).toBeFalse();\n                    expect(view.el).not.toHaveClass('-is-open');\n                    expect(view.el).not.toHaveClass('js-no-animation');\n                    expect(view.$el.css('display')).toBe('block');\n                    expect(view.$el.css('visibility')).toBe('hidden');\n                    expect(view.$el.css('opacity')).toBe('0');\n                    expect($controller.attr('aria-expanded')).toBe('false');\n                    done();\n                }, ANIMATE_WAIT_MS);\n            });\n\n            it('With animate=false', function(done) {\n                view.close({\n                    animate: false,\n                });\n\n                expect(view.isOpen).toBeFalse();\n                expect(view.el).toHaveClass('js-no-animation');\n                expect(view.el).not.toHaveClass('-is-open');\n                expect(view.$el.css('display')).toBe('block');\n                expect(view.$el.css('visibility')).toBe('hidden');\n                expect(view.$el.css('opacity')).toBe('0');\n                expect(view.trigger).toHaveBeenCalledWith('closing');\n                expect(view.trigger).toHaveBeenCalledWith('closed');\n                expect($controller.attr('aria-expanded')).toBe('false');\n\n                _.defer(() => {\n                    expect(view.el).not.toHaveClass('js-no-animation');\n                    done();\n                });\n            });\n        });\n\n        it('focusFirstItem', function() {\n            const view = new RB.MenuView();\n            view.render().$el.appendTo($testsScratch);\n            view.open({\n                animate: false,\n            });\n\n            const itemEl = view.addItem()[0];\n            view.addItem();\n            view.addItem();\n\n            /*\n             * We'll be spying on focus() instead of checking the resulting\n             * focused element in order to work around issues with the\n             * browser's developer tools console having focus during unit\n             * tests, causing our element to never actually gain focus.\n             */\n            spyOn(itemEl, 'focus');\n\n            view.focusFirstItem();\n\n            expect(itemEl.focus).toHaveBeenCalled();\n            expect(view._activeItemIndex).toBe(0);\n        });\n\n        it('focusLastItem', function() {\n            const view = new RB.MenuView();\n            view.render().$el.appendTo($testsScratch);\n            view.open({\n                animate: false,\n            });\n\n            view.addItem();\n            view.addItem();\n            const itemEl = view.addItem()[0];\n\n            /*\n             * We'll be spying on focus() instead of checking the resulting\n             * focused element in order to work around issues with the\n             * browser's developer tools console having focus during unit\n             * tests, causing our element to never actually gain focus.\n             */\n            spyOn(itemEl, 'focus');\n\n            view.focusLastItem();\n\n            expect(itemEl.focus).toHaveBeenCalled();\n            expect(view._activeItemIndex).toBe(2);\n        });\n    });\n\n    describe('Keyboard Accessibility', function() {\n        let $controller;\n        let $item1;\n        let $item2;\n        let $item3;\n        let view;\n\n        function sendKeyDown(keyCode) {\n            view.$el.trigger($.Event('keydown', {\n                which: keyCode,\n            }));\n        }\n\n        beforeEach(function() {\n            $controller = $('<div>')\n                .appendTo($testsScratch);\n\n            view = new RB.MenuView({\n                $controller: $controller,\n            });\n            view.render().$el.appendTo($testsScratch);\n\n            $item1 = view.addItem();\n            $item2 = view.addItem();\n            $item3 = view.addItem();\n\n            view.open({\n                animate: false,\n            });\n            view._focusItem(1);\n\n            spyOn(view, 'trigger').and.callThrough();\n        });\n\n        it('Enter key activates item', function() {\n            const spy = jasmine.createSpy();\n\n            $item2.on('click', spy);\n\n            sendKeyDown($.ui.keyCode.ENTER);\n\n            expect(spy).toHaveBeenCalled();\n        });\n\n        it('Escape key closes menu', function() {\n            spyOn($controller[0], 'focus');\n\n            sendKeyDown($.ui.keyCode.ESCAPE);\n\n            expect(view.el).not.toHaveClass('-is-open');\n            expect($controller[0].focus).toHaveBeenCalled();\n        });\n\n        it('Tab key closes menu', function() {\n            spyOn($controller[0], 'focus');\n\n            sendKeyDown($.ui.keyCode.TAB);\n\n            expect(view.el).not.toHaveClass('-is-open');\n            expect($controller[0].focus).toHaveBeenCalled();\n        });\n\n        it('Up key moves focus up', function() {\n            spyOn(view, '_focusItem').and.callThrough();\n\n            sendKeyDown($.ui.keyCode.UP);\n            expect(view._focusItem).toHaveBeenCalledWith(0);\n\n            /* It should now wrap. */\n            sendKeyDown($.ui.keyCode.UP);\n            expect(view._focusItem).toHaveBeenCalledWith(2);\n        });\n\n        it('Down key moves focus up', function() {\n            spyOn(view, '_focusItem').and.callThrough();\n\n            sendKeyDown($.ui.keyCode.DOWN);\n            expect(view._focusItem).toHaveBeenCalledWith(2);\n\n            /* It should now wrap. */\n            sendKeyDown($.ui.keyCode.DOWN);\n            expect(view._focusItem).toHaveBeenCalledWith(0);\n        });\n\n        it('Home key moves focus to top', function() {\n            spyOn(view, '_focusItem').and.callThrough();\n\n            sendKeyDown($.ui.keyCode.HOME);\n            expect(view._focusItem).toHaveBeenCalledWith(0);\n        });\n\n        it('Page Up key moves focus to top', function() {\n            spyOn(view, '_focusItem').and.callThrough();\n\n            sendKeyDown($.ui.keyCode.PAGE_UP);\n            expect(view._focusItem).toHaveBeenCalledWith(0);\n        });\n\n        it('End key moves focus to bottom', function() {\n            spyOn(view, '_focusItem').and.callThrough();\n\n            sendKeyDown($.ui.keyCode.END);\n            expect(view._focusItem).toHaveBeenCalledWith(2);\n        });\n\n        it('Page Down key moves focus to bottom', function() {\n            spyOn(view, '_focusItem').and.callThrough();\n\n            sendKeyDown($.ui.keyCode.PAGE_DOWN);\n            expect(view._focusItem).toHaveBeenCalledWith(2);\n        });\n    });\n});\n"],"mappings":"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"}