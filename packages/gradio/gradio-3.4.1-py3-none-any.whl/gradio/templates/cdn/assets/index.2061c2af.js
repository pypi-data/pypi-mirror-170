import{S as Q,i as G,s as Y,v as P,b as g,f as C,g as A,w as U,n as z,e as R,L as V,E as fe,aa as rt,H as O,ab as He,ag as Pe,Y as Oe,l as W,z as st,a as N,ae as at,j as w,C as te,k as v,D as ne,B as gt,a7 as De,I as dt,ah as Xe,c as B,m as D,o as L,a4 as Le,ai as bt,d as J,J as be,A as ke,K as Z,N as K,t as de,h as We,O as kt,X as pt,P as wt,Q as vt,R as yt,T as It}from"./index.b2b4d576.js";import{B as ut}from"./BlockLabel.77fd68df.js";import{I as Re}from"./Image.29923f64.js";import{C as Ct,i as zt,U as Mt,W as Tt}from"./Webcam.bfe93594.js";import{I as Ee,C as At,M as ot}from"./ModifyUpload.4a4f8b6f.js";import{U as jt}from"./Upload.698fe67e.js";import{B as St}from"./Block.fdf05501.js";import{E as Sn}from"./Image.9ddf8f51.js";import"./styles.ed3b21b5.js";function Bt(n){let e,t,i;return{c(){e=P("svg"),t=P("path"),i=P("path"),g(t,"d","M28.828 3.172a4.094 4.094 0 0 0-5.656 0L4.05 22.292A6.954 6.954 0 0 0 2 27.242V30h2.756a6.952 6.952 0 0 0 4.95-2.05L28.828 8.829a3.999 3.999 0 0 0 0-5.657zM10.91 18.26l2.829 2.829l-2.122 2.121l-2.828-2.828zm-2.619 8.276A4.966 4.966 0 0 1 4.756 28H4v-.759a4.967 4.967 0 0 1 1.464-3.535l1.91-1.91l2.829 2.828zM27.415 7.414l-12.261 12.26l-2.829-2.828l12.262-12.26a2.047 2.047 0 0 1 2.828 0a2 2 0 0 1 0 2.828z"),g(t,"fill","currentColor"),g(i,"d","M6.5 15a3.5 3.5 0 0 1-2.475-5.974l3.5-3.5a1.502 1.502 0 0 0 0-2.121a1.537 1.537 0 0 0-2.121 0L3.415 5.394L2 3.98l1.99-1.988a3.585 3.585 0 0 1 4.95 0a3.504 3.504 0 0 1 0 4.949L5.439 10.44a1.502 1.502 0 0 0 0 2.121a1.537 1.537 0 0 0 2.122 0l4.024-4.024L13 9.95l-4.025 4.024A3.475 3.475 0 0 1 6.5 15z"),g(i,"fill","currentColor"),g(e,"width","100%"),g(e,"height","100%"),g(e,"viewBox","0 0 32 32")},m(l,a){C(l,e,a),A(e,t),A(e,i)},p:U,i:U,o:U,d(l){l&&z(e)}}}class Dt extends Q{constructor(e){super(),G(this,e,null,Bt,Y,{})}}function Lt(n){let e,t,i,l,a,s,u;return{c(){e=P("svg"),t=P("circle"),i=P("circle"),l=P("circle"),a=P("circle"),s=P("circle"),u=P("path"),g(t,"cx","10"),g(t,"cy","12"),g(t,"r","2"),g(t,"fill","currentColor"),g(i,"cx","16"),g(i,"cy","9"),g(i,"r","2"),g(i,"fill","currentColor"),g(l,"cx","22"),g(l,"cy","12"),g(l,"r","2"),g(l,"fill","currentColor"),g(a,"cx","23"),g(a,"cy","18"),g(a,"r","2"),g(a,"fill","currentColor"),g(s,"cx","19"),g(s,"cy","23"),g(s,"r","2"),g(s,"fill","currentColor"),g(u,"fill","currentColor"),g(u,"d","M16.54 2A14 14 0 0 0 2 16a4.82 4.82 0 0 0 6.09 4.65l1.12-.31a3 3 0 0 1 3.79 2.9V27a3 3 0 0 0 3 3a14 14 0 0 0 14-14.54A14.05 14.05 0 0 0 16.54 2Zm8.11 22.31A11.93 11.93 0 0 1 16 28a1 1 0 0 1-1-1v-3.76a5 5 0 0 0-5-5a5.07 5.07 0 0 0-1.33.18l-1.12.31A2.82 2.82 0 0 1 4 16A12 12 0 0 1 16.47 4A12.18 12.18 0 0 1 28 15.53a11.89 11.89 0 0 1-3.35 8.79Z"),g(e,"width","100%"),g(e,"height","100%"),g(e,"viewBox","0 0 32 32")},m(r,h){C(r,e,h),A(e,t),A(e,i),A(e,l),A(e,a),A(e,s),A(e,u)},p:U,i:U,o:U,d(r){r&&z(e)}}}class Rt extends Q{constructor(e){super(),G(this,e,null,Lt,Y,{})}}function Et(n){let e,t;return{c(){e=P("svg"),t=P("path"),g(t,"d","M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","100%"),g(e,"height","100%"),g(e,"viewBox","0 0 24 24"),g(e,"fill","none"),g(e,"stroke","currentColor"),g(e,"stroke-width","1.5"),g(e,"stroke-linecap","round"),g(e,"stroke-linejoin","round"),g(e,"class","feather feather-edit-2")},m(i,l){C(i,e,l),A(e,t)},p:U,i:U,o:U,d(i){i&&z(e)}}}class Ye extends Q{constructor(e){super(),G(this,e,null,Et,Y,{})}}function qt(n){let e,t;return{c(){e=R("img"),V(e.src,t=n[0])||g(e,"src",t),g(e,"alt","")},m(i,l){C(i,e,l),n[2](e)},p(i,[l]){l&1&&!V(e.src,t=i[0])&&g(e,"src",t)},i:U,o:U,d(i){i&&z(e),n[2](null)}}}function Ft(n,e,t){let{image:i}=e,l;const a=fe();rt(()=>{const u=new Ct(l,{autoCropArea:1,cropend(){const r=u.getCroppedCanvas().toDataURL();a("crop",r)}});return a("crop",i),()=>{u.destroy()}});function s(u){O[u?"unshift":"push"](()=>{l=u,t(1,l)})}return n.$$set=u=>{"image"in u&&t(0,i=u.image)},[i,l,s]}class Ut extends Q{constructor(e){super(),G(this,e,Ft,qt,Y,{image:0})}}class Je{constructor(e,t){this.x=e,this.y=t}}class Ve extends Je{update(e){this.x=e.x,this.y=e.y}moveByAngle(e,t){const i=e+Math.PI/2;this.x=this.x+Math.sin(i)*t,this.y=this.y-Math.cos(i)*t}equalsTo(e){return this.x===e.x&&this.y===e.y}getDifferenceTo(e){return new Je(this.x-e.x,this.y-e.y)}getDistanceTo(e){const t=this.getDifferenceTo(e);return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}getAngleTo(e){const t=this.getDifferenceTo(e);return Math.atan2(t.y,t.x)}toObject(){return{x:this.x,y:this.y}}}const Nt=30;class Ot{constructor({radius:e=Nt,enabled:t=!0,initialPoint:i={x:0,y:0}}={}){this.radius=e,this._isEnabled=t,this.pointer=new Ve(i.x,i.y),this.brush=new Ve(i.x,i.y),this.angle=0,this.distance=0,this._hasMoved=!1}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}isEnabled(){return this._isEnabled}setRadius(e){this.radius=e}getRadius(){return this.radius}getBrushCoordinates(){return this.brush.toObject()}getPointerCoordinates(){return this.pointer.toObject()}getBrush(){return this.brush}getPointer(){return this.pointer}getAngle(){return this.angle}getDistance(){return this.distance}brushHasMoved(){return this._hasMoved}update(e,{both:t=!1}={}){return this._hasMoved=!1,this.pointer.equalsTo(e)&&!t?!1:(this.pointer.update(e),t?(this._hasMoved=!0,this.brush.update(e),!0):(this._isEnabled?(this.distance=this.pointer.getDistanceTo(this.brush),this.angle=this.pointer.getAngleTo(this.brush),this.distance>this.radius&&(this.brush.moveByAngle(this.angle,this.distance-this.radius),this._hasMoved=!0)):(this.distance=0,this.angle=0,this.brush.update(e),this._hasMoved=!0),!0))}}function Ze(n,e,t){const i=n.slice();return i[54]=e[t].name,i[55]=e[t].zIndex,i[56]=e,i[57]=t,i}function Ke(n){let e,t,i;return{c(){e=R("div"),e.textContent="Start drawing",g(e,"class","absolute inset-0 flex items-center justify-center z-40 pointer-events-none touch-none text-gray-400 md:text-xl")},m(l,a){C(l,e,a),i=!0},i(l){i||(He(()=>{t||(t=Pe(e,Xe,{duration:50},!0)),t.run(1)}),i=!0)},o(l){t||(t=Pe(e,Xe,{duration:50},!1)),t.run(0),i=!1},d(l){l&&z(e),l&&t&&t.end()}}}function Qe(n){let e,t,i=n[54],l,a;const s=()=>n[23](e,i),u=()=>n[23](null,i);return{c(){e=R("canvas"),g(e,"key",t=n[54]),g(e,"class","inset-0 m-auto hover:cursor-none"),Oe(e,"display","block"),Oe(e,"position","absolute"),Oe(e,"z-index",n[55])},m(r,h){C(r,e,h),s(),l||(a=[W(e,"mousedown",n[54]==="interface"?n[6]:void 0),W(e,"mousemove",n[54]==="interface"?n[7]:void 0),W(e,"mouseup",n[54]==="interface"?n[8]:void 0),W(e,"mouseout",n[54]==="interface"?n[8]:void 0),W(e,"blur",n[54]==="interface"?n[8]:void 0),W(e,"touchstart",n[54]==="interface"?n[6]:void 0),W(e,"touchmove",n[54]==="interface"?n[7]:void 0),W(e,"touchend",n[54]==="interface"?n[8]:void 0),W(e,"touchcancel",n[54]==="interface"?n[8]:void 0)],l=!0)},p(r,h){n=r,i!==n[54]&&(u(),i=n[54],s())},d(r){r&&z(e),u(),l=!1,st(a)}}}function Wt(n){let e,t,i,l,a=n[4]===0&&Ke(),s=n[5],u=[];for(let r=0;r<s.length;r+=1)u[r]=Qe(Ze(n,s,r));return{c(){e=R("div"),a&&a.c(),t=N();for(let r=0;r<u.length;r+=1)u[r].c();g(e,"class","touch-none relative h-full w-full"),He(()=>n[25].call(e))},m(r,h){C(r,e,h),a&&a.m(e,null),A(e,t);for(let _=0;_<u.length;_+=1)u[_].m(e,null);n[24](e),i=at(e,n[25].bind(e)),l=!0},p(r,h){if(r[4]===0?a?h[0]&16&&w(a,1):(a=Ke(),a.c(),w(a,1),a.m(e,t)):a&&(te(),v(a,1,1,()=>{a=null}),ne()),h[0]&484){s=r[5];let _;for(_=0;_<s.length;_+=1){const c=Ze(r,s,_);u[_]?u[_].p(c,h):(u[_]=Qe(c),u[_].c(),u[_].m(e,null))}for(;_<u.length;_+=1)u[_].d(1);u.length=s.length}},i(r){l||(w(a),l=!0)},o(r){v(a),l=!1},d(r){r&&z(e),a&&a.d(),gt(u,r),n[24](null),i()}}}let Ht="#aaa";function Ge(n,e){return{x:n.x+(e.x-n.x)/2,y:n.y+(e.y-n.y)/2}}function Pt(n,e,t){let i;const l=fe();let{value:a}=e,{value_img:s}=e,{mode:u="sketch"}=e,{brush_color:r="#0b0f19"}=e,{brush_radius:h=50}=e,{source:_}=e,{width:c=400}=e,{height:o=200}=e,{container_height:m=200}=e,p,y=c,S=o;const _e=[{name:"interface",zIndex:15},{name:"drawing",zIndex:11},{name:"temp",zIndex:12},{name:"mask",zIndex:-1},{name:"temp_fake",zIndex:-2}];let T={},k={},E=[],H=[],ie=!0,x=!0,$=!1,ee=!1,b=null,q=null,re=null,le=0;rt(async()=>{Object.keys(T).forEach(f=>{k[f]=T[f].getContext("2d")}),await De(),s&&(s.addEventListener("load",f=>{_==="webcam"?(k.temp.save(),k.temp.translate(c,0),k.temp.scale(-1,1),k.temp.drawImage(s,0,0),k.temp.restore()):k.temp.drawImage(s,0,0),k.drawing.drawImage(T.temp,0,0,c,o),ue()}),setTimeout(()=>{_==="webcam"?(k.temp.save(),k.temp.translate(c,0),k.temp.scale(-1,1),k.temp.drawImage(s,0,0),k.temp.restore()):k.temp.drawImage(s,0,0),k.drawing.drawImage(T.temp,0,0,c,o),pe({lines:H.slice()}),ue()},100)),t(22,b=new Ot({radius:h*.05,enabled:!0,initialPoint:{x:c/2,y:o/2}})),re=new zt((f,I,...M)=>{Ce(f,I)}),re.observe(q),me(),t(21,p=!0),requestAnimationFrame(()=>{ce(),requestAnimationFrame(()=>{he()})})});function ce(){const f=c/2,I=o/2;b.update({x:f,y:I},{both:!0}),b.update({x:f,y:I},{both:!1}),ie=!0,x=!0}dt(()=>{t(21,p=!1),re.unobserve(q)});function se(){const f=H.slice(0,-1);Be(),s&&(_==="webcam"?(k.temp.save(),k.temp.translate(c,0),k.temp.scale(-1,1),k.temp.drawImage(s,0,0),k.temp.restore()):k.temp.drawImage(s,0,0),(!H||!H.length)&&k.drawing.drawImage(T.temp,0,0,c,o)),pe({lines:f}),t(4,le=f.length),H.length&&(H=f),ue()}let pe=({lines:f})=>{f.forEach(I=>{const{points:M,brush_color:j,brush_radius:F}=I;Te({points:M,brush_color:j,brush_radius:F}),u==="mask"&&Ae({points:M,brush_color:j,brush_radius:F}),E=M}),Se({brush_color:r,brush_radius:h}),u==="mask"&&je()},qe=f=>{f.preventDefault(),ee=!0;const{x:I,y:M}=ze(f);f.touches&&f.touches.length>0&&b.update({x:I,y:M},{both:!0}),Me(I,M),t(4,le+=1)},we=f=>{f.preventDefault();const{x:I,y:M}=ze(f);Me(I,M)},Fe=f=>{f.preventDefault(),we(f),$=!1,ee=!1,Se(),u==="mask"&&je()},ve=0,ye=0,Ie=0,Ce=async()=>{if(c===ve&&o===ye&&Ie===m)return;const f={width:c,height:o},I={height:m,width:m*(f.width/f.height)};await Promise.all([ae(T.interface,f,I),ae(T.drawing,f,I),ae(T.temp,f,I),ae(T.temp_fake,f,I),ae(T.mask,f,I,!1)]),t(9,h=20*(f.width/I.width)),me({once:!0}),setTimeout(()=>{ye=o,ve=c,Ie=m},100),he()},ae=async(f,I,M,j=!0)=>{if(!p)return;await De();const F=window.devicePixelRatio||1;f.width=I.width*(j?F:1),f.height=I.height*(j?F:1);const X=f.getContext("2d");j&&X.scale(F,F),f.style.width=`${M.width}px`,f.style.height=`${M.height}px`},ze=f=>{const I=T.interface.getBoundingClientRect();let M=f.clientX,j=f.clientY;return f.changedTouches&&f.changedTouches.length>0&&(M=f.changedTouches[0].clientX,j=f.changedTouches[0].clientY),{x:(M-I.left)/I.width*c,y:(j-I.top)/I.height*o}},Me=(f,I)=>{b.update({x:f,y:I});const M=!b.isEnabled();(ee&&!$||M&&ee)&&($=!0,E.push(b.brush.toObject())),$&&(E.push(b.brush.toObject()),Te({points:E,brush_color:r,brush_radius:h}),u==="mask"&&Ae({points:E,brush_color:r,brush_radius:h})),ie=!0},Te=({points:f,brush_color:I,brush_radius:M})=>{if(!f||f.length<2||(k.temp.lineJoin="round",k.temp.lineCap="round",k.temp.strokeStyle=I,k.temp.lineWidth=M,!f||f.length<2))return;let j=f[0],F=f[1];k.temp.moveTo(F.x,F.y),k.temp.beginPath();for(var X=1,Ne=f.length;X<Ne;X++){var ge=Ge(j,F);k.temp.quadraticCurveTo(j.x,j.y,ge.x,ge.y),j=f[X],F=f[X+1]}k.temp.lineTo(j.x,j.y),k.temp.stroke()},Ae=({points:f,brush_color:I,brush_radius:M})=>{if(!f||f.length<2)return;k.temp_fake.lineJoin="round",k.temp_fake.lineCap="round",k.temp_fake.strokeStyle="#fff",k.temp_fake.lineWidth=M;let j=f[0],F=f[1];k.temp_fake.moveTo(F.x,F.y),k.temp_fake.beginPath();for(var X=1,Ne=f.length;X<Ne;X++){var ge=Ge(j,F);k.temp_fake.quadraticCurveTo(j.x,j.y,ge.x,ge.y),j=f[X],F=f[X+1]}k.temp_fake.lineTo(j.x,j.y),k.temp_fake.stroke()},je=()=>{E.length<1||(E.length=0,k.mask.drawImage(T.temp_fake,0,0,c,o),ue())},Se=()=>{E.length<1||(H.push({points:E.slice(),brush_color:r,brush_radius:h}),u!=="mask"&&(E.length=0),k.drawing.drawImage(T.temp,0,0,c,o),ue())},ue=()=>{const f=d();l("change",f)};function he(){return H=[],Be(),t(4,le=0),!0}function Be(){x=!0,k.temp.clearRect(0,0,c,o),k.temp.fillStyle=u==="mask"?"transparent":"#FFFFFF",k.temp.fillRect(0,0,c,o),u==="mask"&&(k.temp_fake.clearRect(0,0,T.temp_fake.width,T.temp_fake.height),k.mask.clearRect(0,0,c,o),k.mask.fillStyle="#000",k.mask.fillRect(0,0,c,o))}let me=({once:f=!1}={})=>{if(ie||x){const I=b.getPointerCoordinates(),M=b.getBrushCoordinates();Ue(k.interface,I,M),ie=!1,x=!1}f||window.requestAnimationFrame(()=>{me()})},Ue=(f,I,M)=>{f.clearRect(0,0,c,o),f.beginPath(),f.fillStyle=r,f.arc(M.x,M.y,h/2,0,Math.PI*2,!0),f.fill(),f.beginPath(),f.fillStyle=Ht,f.arc(M.x,M.y,i,0,Math.PI*2,!0),f.fill()};function d(){return u==="mask"?T.mask.toDataURL("image/jpg"):T.drawing.toDataURL("image/jpg")}function oe(f,I){O[f?"unshift":"push"](()=>{T[I]=f,t(2,T)})}function ht(f){O[f?"unshift":"push"](()=>{q=f,t(3,q)})}function mt(){y=this.offsetWidth,S=this.offsetHeight,t(0,y),t(1,S)}return n.$$set=f=>{"value"in f&&t(10,a=f.value),"value_img"in f&&t(11,s=f.value_img),"mode"in f&&t(12,u=f.mode),"brush_color"in f&&t(13,r=f.brush_color),"brush_radius"in f&&t(9,h=f.brush_radius),"source"in f&&t(14,_=f.source),"width"in f&&t(15,c=f.width),"height"in f&&t(16,o=f.height),"container_height"in f&&t(17,m=f.container_height)},n.$$.update=()=>{n.$$.dirty[0]&2098176&&p&&!a&&he(),n.$$.dirty[0]&4194816&&b&&(ce(),b.setRadius(h*.05)),n.$$.dirty[0]&98304&&(c||o)&&Ce(),n.$$.dirty[0]&512&&(i=h*.075)},[y,S,T,q,le,_e,qe,we,Fe,h,a,s,u,r,_,c,o,m,se,he,d,p,b,oe,ht,mt]}class ft extends Q{constructor(e){super(),G(this,e,Pt,Wt,Y,{value:10,value_img:11,mode:12,brush_color:13,brush_radius:9,source:14,width:15,height:16,container_height:17,undo:18,clear:19,get_image_data:20},null,[-1,-1])}get undo(){return this.$$.ctx[18]}get clear(){return this.$$.ctx[19]}get get_image_data(){return this.$$.ctx[20]}}function Xt(n){let e,t,i,l,a;return t=new Ee({props:{Icon:Mt}}),t.$on("click",n[1]),l=new Ee({props:{Icon:At}}),l.$on("click",n[2]),{c(){e=R("div"),B(t.$$.fragment),i=N(),B(l.$$.fragment),g(e,"class","z-50 top-2 right-2 justify-end flex gap-1 absolute")},m(s,u){C(s,e,u),D(t,e,null),A(e,i),D(l,e,null),a=!0},p:U,i(s){a||(w(t.$$.fragment,s),w(l.$$.fragment,s),a=!0)},o(s){v(t.$$.fragment,s),v(l.$$.fragment,s),a=!1},d(s){s&&z(e),L(t),L(l)}}}function Yt(n){const e=fe();return[e,()=>e("undo"),()=>e("clear")]}class _t extends Q{constructor(e){super(),G(this,e,Yt,Xt,Y,{})}}function xe(n){let e,t,i,l,a;return{c(){e=R("input"),g(e,"class","absolute top-[2px] right-6"),g(e,"type","range"),g(e,"min",t=.5*(n[2]/n[6])),g(e,"max",i=75*(n[2]/n[6]))},m(s,u){C(s,e,u),Le(e,n[0]),l||(a=[W(e,"change",n[10]),W(e,"input",n[10])],l=!0)},p(s,u){u&68&&t!==(t=.5*(s[2]/s[6]))&&g(e,"min",t),u&68&&i!==(i=75*(s[2]/s[6]))&&g(e,"max",i),u&1&&Le(e,s[0])},d(s){s&&z(e),l=!1,st(a)}}}function $e(n){let e,t,i,l;t=new Ee({props:{Icon:Rt}}),t.$on("click",n[11]);let a=n[5]&&et(n);return{c(){e=R("span"),B(t.$$.fragment),i=N(),a&&a.c(),g(e,"class","absolute top-6 right-0")},m(s,u){C(s,e,u),D(t,e,null),A(e,i),a&&a.m(e,null),l=!0},p(s,u){s[5]?a?a.p(s,u):(a=et(s),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(s){l||(w(t.$$.fragment,s),l=!0)},o(s){v(t.$$.fragment,s),l=!1},d(s){s&&z(e),L(t),a&&a.d()}}}function et(n){let e,t,i;return{c(){e=R("input"),g(e,"class","absolute top-[-3px] right-6"),g(e,"type","color")},m(l,a){C(l,e,a),Le(e,n[1]),t||(i=W(e,"input",n[12]),t=!0)},p(l,a){a&2&&Le(e,l[1])},d(l){l&&z(e),t=!1,i()}}}function Jt(n){let e,t,i,l,a,s;i=new Ee({props:{Icon:Dt}}),i.$on("click",n[9]);let u=n[4]&&xe(n),r=n[3]!=="mask"&&$e(n);return{c(){e=R("div"),t=R("span"),B(i.$$.fragment),l=N(),u&&u.c(),a=N(),r&&r.c(),g(t,"class","absolute top-0 right-0"),g(e,"class","z-50 top-10 right-2 justify-end flex gap-1 absolute")},m(h,_){C(h,e,_),A(e,t),D(i,t,null),A(t,l),u&&u.m(t,null),A(e,a),r&&r.m(e,null),s=!0},p(h,[_]){h[4]?u?u.p(h,_):(u=xe(h),u.c(),u.m(t,null)):u&&(u.d(1),u=null),h[3]!=="mask"?r?(r.p(h,_),_&8&&w(r,1)):(r=$e(h),r.c(),w(r,1),r.m(e,null)):r&&(te(),v(r,1,1,()=>{r=null}),ne())},i(h){s||(w(i.$$.fragment,h),w(r),s=!0)},o(h){v(i.$$.fragment,h),v(r),s=!1},d(h){h&&z(e),L(i),u&&u.d(),r&&r.d()}}}function Vt(n,e,t){let i;fe();let l=!1,a=!1,{brush_radius:s=20}=e,{brush_color:u="#000"}=e,{container_height:r}=e,{img_width:h}=e,{img_height:_}=e,{mode:c="other"}=e;const o=()=>t(4,l=!l);function m(){s=bt(this.value),t(0,s)}const p=()=>t(5,a=!a);function y(){u=this.value,t(1,u)}return n.$$set=S=>{"brush_radius"in S&&t(0,s=S.brush_radius),"brush_color"in S&&t(1,u=S.brush_color),"container_height"in S&&t(7,r=S.container_height),"img_width"in S&&t(2,h=S.img_width),"img_height"in S&&t(8,_=S.img_height),"mode"in S&&t(3,c=S.mode)},n.$$.update=()=>{n.$$.dirty&388&&t(6,i=r*(h/_))},[s,u,h,c,l,a,i,r,_,o,m,p,y]}class ct extends Q{constructor(e){super(),G(this,e,Vt,Jt,Y,{brush_radius:0,brush_color:1,container_height:7,img_width:2,img_height:8,mode:3})}}function Zt(n){let e,t;return{c(){e=R("img"),g(e,"class","w-full h-full object-contain"),V(e.src,t=n[0].image||n[0])||g(e,"src",t),g(e,"alt",""),J(e,"scale-x-[-1]",n[4]==="webcam"&&n[10])},m(i,l){C(i,e,l)},p(i,l){l[0]&1&&!V(e.src,t=i[0].image||i[0])&&g(e,"src",t),l[0]&1040&&J(e,"scale-x-[-1]",i[4]==="webcam"&&i[10])},i:U,o:U,d(i){i&&z(e)}}}function Kt(n){let e=n[21],t,i,l,a=tt(n),s=n[15]>0&&nt(n);return{c(){a.c(),t=N(),s&&s.c(),i=ke()},m(u,r){a.m(u,r),C(u,t,r),s&&s.m(u,r),C(u,i,r),l=!0},p(u,r){r[0]&2097152&&Y(e,e=u[21])?(a.d(1),a=tt(u),a.c(),a.m(t.parentNode,t)):a.p(u,r),u[15]>0?s?(s.p(u,r),r[0]&32768&&w(s,1)):(s=nt(u),s.c(),w(s,1),s.m(i.parentNode,i)):s&&(te(),v(s,1,1,()=>{s=null}),ne())},i(u){l||(w(s),l=!0)},o(u){v(s),l=!1},d(u){a.d(u),u&&z(t),s&&s.d(u),u&&z(i)}}}function Qt(n){let e,t,i,l,a;return e=new ot({props:{editable:!0}}),e.$on("edit",n[39]),e.$on("clear",n[24]),{c(){B(e.$$.fragment),t=N(),i=R("img"),g(i,"class","w-full h-full object-contain"),V(i.src,l=n[0])||g(i,"src",l),g(i,"alt",""),J(i,"scale-x-[-1]",n[4]==="webcam"&&n[10])},m(s,u){D(e,s,u),C(s,t,u),C(s,i,u),a=!0},p(s,u){(!a||u[0]&1&&!V(i.src,l=s[0]))&&g(i,"src",l),u[0]&1040&&J(i,"scale-x-[-1]",s[4]==="webcam"&&s[10])},i(s){a||(w(e.$$.fragment,s),a=!0)},o(s){v(e.$$.fragment,s),a=!1},d(s){L(e,s),s&&z(t),s&&z(i)}}}function Gt(n){let e,t,i,l;return e=new Ut({props:{image:n[0]}}),e.$on("crop",n[25]),i=new ot({}),i.$on("clear",n[38]),{c(){B(e.$$.fragment),t=N(),B(i.$$.fragment)},m(a,s){D(e,a,s),C(a,t,s),D(i,a,s),l=!0},p(a,s){const u={};s[0]&1&&(u.image=a[0]),e.$set(u)},i(a){l||(w(e.$$.fragment,a),w(i.$$.fragment,a),l=!0)},o(a){v(e.$$.fragment,a),v(i.$$.fragment,a),l=!1},d(a){L(e,a),a&&z(t),L(i,a)}}}function xt(n){let e,t,i,l;const a=[tn,en],s=[];function u(r,h){return r[4]==="upload"?0:r[4]==="webcam"&&!r[21]?1:-1}return~(e=u(n))&&(t=s[e]=a[e](n)),{c(){t&&t.c(),i=ke()},m(r,h){~e&&s[e].m(r,h),C(r,i,h),l=!0},p(r,h){let _=e;e=u(r),e===_?~e&&s[e].p(r,h):(t&&(te(),v(s[_],1,1,()=>{s[_]=null}),ne()),~e?(t=s[e],t?t.p(r,h):(t=s[e]=a[e](r),t.c()),w(t,1),t.m(i.parentNode,i)):t=null)},i(r){l||(w(t),l=!0)},o(r){v(t),l=!1},d(r){~e&&s[e].d(r),r&&z(i)}}}function $t(n){let e,t,i,l,a,s,u;e=new _t({}),e.$on("undo",n[28]),e.$on("clear",n[29]);let r=n[1]==="color-sketch"&&lt(n);function h(o){n[32](o)}function _(o){n[33](o)}let c={value:n[0],mode:n[12],width:n[15]||n[20],height:n[14]||n[19],container_height:n[16]||n[19]};return n[17]!==void 0&&(c.brush_radius=n[17]),n[22]!==void 0&&(c.brush_color=n[22]),l=new ft({props:c}),O.push(()=>K(l,"brush_radius",h)),O.push(()=>K(l,"brush_color",_)),n[34](l),l.$on("change",n[25]),{c(){B(e.$$.fragment),t=N(),r&&r.c(),i=N(),B(l.$$.fragment)},m(o,m){D(e,o,m),C(o,t,m),r&&r.m(o,m),C(o,i,m),D(l,o,m),u=!0},p(o,m){o[1]==="color-sketch"?r?(r.p(o,m),m[0]&2&&w(r,1)):(r=lt(o),r.c(),w(r,1),r.m(i.parentNode,i)):r&&(te(),v(r,1,1,()=>{r=null}),ne());const p={};m[0]&1&&(p.value=o[0]),m[0]&4096&&(p.mode=o[12]),m[0]&1081344&&(p.width=o[15]||o[20]),m[0]&540672&&(p.height=o[14]||o[19]),m[0]&589824&&(p.container_height=o[16]||o[19]),!a&&m[0]&131072&&(a=!0,p.brush_radius=o[17],Z(()=>a=!1)),!s&&m[0]&4194304&&(s=!0,p.brush_color=o[22],Z(()=>s=!1)),l.$set(p)},i(o){u||(w(e.$$.fragment,o),w(r),w(l.$$.fragment,o),u=!0)},o(o){v(e.$$.fragment,o),v(r),v(l.$$.fragment,o),u=!1},d(o){L(e,o),o&&z(t),r&&r.d(o),o&&z(i),n[34](null),L(l,o)}}}function tt(n){let e,t,i,l;return{c(){e=R("img"),g(e,"class","absolute w-full h-full object-contain"),V(e.src,t=n[21]||n[0]?.image||n[0])||g(e,"src",t),g(e,"alt",""),J(e,"scale-x-[-1]",n[4]==="webcam"&&n[10])},m(a,s){C(a,e,s),n[40](e),i||(l=W(e,"load",n[26]),i=!0)},p(a,s){s[0]&2097153&&!V(e.src,t=a[21]||a[0]?.image||a[0])&&g(e,"src",t),s[0]&1040&&J(e,"scale-x-[-1]",a[4]==="webcam"&&a[10])},d(a){a&&z(e),n[40](null),i=!1,l()}}}function nt(n){let e,t,i,l,a,s,u,r;function h(m){n[42](m)}function _(m){n[43](m)}let c={value:n[0],mode:n[12],width:n[15]||n[20],height:n[14]||n[19],container_height:n[16]||n[19],value_img:n[18],source:n[4]};n[17]!==void 0&&(c.brush_radius=n[17]),n[22]!==void 0&&(c.brush_color=n[22]),e=new ft({props:c}),n[41](e),O.push(()=>K(e,"brush_radius",h)),O.push(()=>K(e,"brush_color",_)),e.$on("change",n[25]),a=new _t({}),a.$on("undo",n[44]),a.$on("clear",n[27]);let o=(n[1]==="color-sketch"||n[1]==="sketch")&&it(n);return{c(){B(e.$$.fragment),l=N(),B(a.$$.fragment),s=N(),o&&o.c(),u=ke()},m(m,p){D(e,m,p),C(m,l,p),D(a,m,p),C(m,s,p),o&&o.m(m,p),C(m,u,p),r=!0},p(m,p){const y={};p[0]&1&&(y.value=m[0]),p[0]&4096&&(y.mode=m[12]),p[0]&1081344&&(y.width=m[15]||m[20]),p[0]&540672&&(y.height=m[14]||m[19]),p[0]&589824&&(y.container_height=m[16]||m[19]),p[0]&262144&&(y.value_img=m[18]),p[0]&16&&(y.source=m[4]),!t&&p[0]&131072&&(t=!0,y.brush_radius=m[17],Z(()=>t=!1)),!i&&p[0]&4194304&&(i=!0,y.brush_color=m[22],Z(()=>i=!1)),e.$set(y),m[1]==="color-sketch"||m[1]==="sketch"?o?(o.p(m,p),p[0]&2&&w(o,1)):(o=it(m),o.c(),w(o,1),o.m(u.parentNode,u)):o&&(te(),v(o,1,1,()=>{o=null}),ne())},i(m){r||(w(e.$$.fragment,m),w(a.$$.fragment,m),w(o),r=!0)},o(m){v(e.$$.fragment,m),v(a.$$.fragment,m),v(o),r=!1},d(m){n[41](null),L(e,m),m&&z(l),L(a,m),m&&z(s),o&&o.d(m),m&&z(u)}}}function it(n){let e,t,i,l;function a(r){n[45](r)}function s(r){n[46](r)}let u={container_height:n[16]||n[19],img_width:n[15]||n[20],img_height:n[14]||n[19],mode:n[12]};return n[17]!==void 0&&(u.brush_radius=n[17]),n[22]!==void 0&&(u.brush_color=n[22]),e=new ct({props:u}),O.push(()=>K(e,"brush_radius",a)),O.push(()=>K(e,"brush_color",s)),{c(){B(e.$$.fragment)},m(r,h){D(e,r,h),l=!0},p(r,h){const _={};h[0]&589824&&(_.container_height=r[16]||r[19]),h[0]&1081344&&(_.img_width=r[15]||r[20]),h[0]&540672&&(_.img_height=r[14]||r[19]),h[0]&4096&&(_.mode=r[12]),!t&&h[0]&131072&&(t=!0,_.brush_radius=r[17],Z(()=>t=!1)),!i&&h[0]&4194304&&(i=!0,_.brush_color=r[22],Z(()=>i=!1)),e.$set(_)},i(r){l||(w(e.$$.fragment,r),l=!0)},o(r){v(e.$$.fragment,r),l=!1},d(r){L(e,r)}}}function en(n){let e,t;return e=new Tt({props:{streaming:n[8],pending:n[9],mirror_webcam:n[10]}}),e.$on("capture",n[36]),e.$on("stream",n[25]),e.$on("error",n[37]),{c(){B(e.$$.fragment)},m(i,l){D(e,i,l),t=!0},p(i,l){const a={};l[0]&256&&(a.streaming=i[8]),l[0]&512&&(a.pending=i[9]),l[0]&1024&&(a.mirror_webcam=i[10]),e.$set(a)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){L(e,i)}}}function tn(n){let e,t,i;function l(s){n[35](s)}let a={filetype:"image/x-png,image/gif,image/jpeg",include_file_metadata:!1,$$slots:{default:[nn]},$$scope:{ctx:n}};return n[11]!==void 0&&(a.dragging=n[11]),e=new jt({props:a}),O.push(()=>K(e,"dragging",l)),e.$on("load",n[23]),{c(){B(e.$$.fragment)},m(s,u){D(e,s,u),i=!0},p(s,u){const r={};u[0]&224|u[1]&262144&&(r.$$scope={dirty:u,ctx:s}),!t&&u[0]&2048&&(t=!0,r.dragging=s[11],Z(()=>t=!1)),e.$set(r)},i(s){i||(w(e.$$.fragment,s),i=!0)},o(s){v(e.$$.fragment,s),i=!1},d(s){L(e,s)}}}function nn(n){let e,t,i,l,a,s,u,r,h;return{c(){e=R("div"),t=de(n[5]),i=N(),l=R("span"),a=de("- "),s=de(n[6]),u=de(" -"),r=N(),h=de(n[7]),g(l,"class","text-gray-300"),g(e,"class","flex flex-col")},m(_,c){C(_,e,c),A(e,t),A(e,i),A(e,l),A(l,a),A(l,s),A(l,u),A(e,r),A(e,h)},p(_,c){c[0]&32&&We(t,_[5]),c[0]&64&&We(s,_[6]),c[0]&128&&We(h,_[7])},d(_){_&&z(e)}}}function lt(n){let e,t,i,l;function a(r){n[30](r)}function s(r){n[31](r)}let u={container_height:n[16]||n[19],img_width:n[15]||n[20],img_height:n[14]||n[19]};return n[17]!==void 0&&(u.brush_radius=n[17]),n[22]!==void 0&&(u.brush_color=n[22]),e=new ct({props:u}),O.push(()=>K(e,"brush_radius",a)),O.push(()=>K(e,"brush_color",s)),{c(){B(e.$$.fragment)},m(r,h){D(e,r,h),l=!0},p(r,h){const _={};h[0]&589824&&(_.container_height=r[16]||r[19]),h[0]&1081344&&(_.img_width=r[15]||r[20]),h[0]&540672&&(_.img_height=r[14]||r[19]),!t&&h[0]&131072&&(t=!0,_.brush_radius=r[17],Z(()=>t=!1)),!i&&h[0]&4194304&&(i=!0,_.brush_color=r[22],Z(()=>i=!1)),e.$set(_)},i(r){l||(w(e.$$.fragment,r),l=!0)},o(r){v(e.$$.fragment,r),l=!1},d(r){L(e,r)}}}function ln(n){let e,t,i,l,a,s,u;e=new ut({props:{show_label:n[3],Icon:n[4]==="canvas"?Ye:Re,label:n[2]||(n[4]==="canvas"?"Sketch":"Image")}});const r=[$t,xt,Gt,Qt,Kt,Zt],h=[];function _(c,o){return c[4]==="canvas"?0:c[0]===null&&!c[21]||c[8]?1:c[1]==="select"?2:c[1]==="editor"?3:(c[1]==="sketch"||c[1]==="color-sketch")&&(c[0]!==null||c[21])?4:5}return l=_(n),a=h[l]=r[l](n),{c(){B(e.$$.fragment),t=N(),i=R("div"),a.c(),g(i,"data-testid","image"),He(()=>n[47].call(i)),J(i,"bg-gray-200",n[0]),J(i,"h-60",n[4]!=="webcam"||n[1]==="sketch"||n[1]==="color-sketch")},m(c,o){D(e,c,o),C(c,t,o),C(c,i,o),h[l].m(i,null),s=at(i,n[47].bind(i)),u=!0},p(c,o){const m={};o[0]&8&&(m.show_label=c[3]),o[0]&16&&(m.Icon=c[4]==="canvas"?Ye:Re),o[0]&20&&(m.label=c[2]||(c[4]==="canvas"?"Sketch":"Image")),e.$set(m);let p=l;l=_(c),l===p?h[l].p(c,o):(te(),v(h[p],1,1,()=>{h[p]=null}),ne(),a=h[l],a?a.p(c,o):(a=h[l]=r[l](c),a.c()),w(a,1),a.m(i,null)),o[0]&1&&J(i,"bg-gray-200",c[0]),o[0]&18&&J(i,"h-60",c[4]!=="webcam"||c[1]==="sketch"||c[1]==="color-sketch")},i(c){u||(w(e.$$.fragment,c),w(a),u=!0)},o(c){v(e.$$.fragment,c),v(a),u=!1},d(c){L(e,c),c&&z(t),c&&z(i),h[l].d(),s()}}}function rn(n,e,t){let i,{value:l}=e,{label:a=void 0}=e,{show_label:s}=e,{source:u="upload"}=e,{tool:r="editor"}=e,{drop_text:h="Drop an image file"}=e,{or_text:_="or"}=e,{upload_text:c="click to upload"}=e,{streaming:o=!1}=e,{pending:m=!1}=e,{mirror_webcam:p}=e,y;l&&(u==="upload"||u==="webcam")&&r==="sketch"&&(l={image:l,mask:null});function S({detail:d}){r==="color-sketch"?t(21,se=d):t(0,l=(u==="upload"||u==="webcam")&&r==="sketch"?{image:d,mask:null}:d)}function _e({detail:d}){t(0,l=null),t(21,se=void 0),k("clear")}async function T({detail:d},oe){q==="mask"?u==="webcam"&&oe?t(0,l={image:d,mask:null}):t(0,l={image:typeof l=="string"?l:l?.image||null,mask:d}):(u==="upload"||u==="webcam")&&r==="sketch"?t(0,l={image:d,mask:null}):t(0,l=d),await De(),k(o?"stream":"edit")}const k=fe();let E=!1;function H(d){const oe=d.composedPath()[0];t(15,$=oe.naturalWidth),t(14,x=oe.naturalHeight),t(16,ee=oe.getBoundingClientRect().height)}async function ie(){y.clear(),await De(),t(0,l=null),t(21,se=void 0)}let x=0,$=0,ee=0,b=20,q,re,le,ce,se;const pe=()=>y.undo(),qe=()=>y.clear();function we(d){b=d,t(17,b)}function Fe(d){i=d,t(22,i),t(12,q),t(4,u),t(1,r)}function ve(d){b=d,t(17,b)}function ye(d){i=d,t(22,i),t(12,q),t(4,u),t(1,r)}function Ie(d){O[d?"unshift":"push"](()=>{y=d,t(13,y)})}function Ce(d){E=d,t(11,E)}const ae=d=>r==="color-sketch"?S(d):T(d,!0);function ze(d){be.call(this,n,d)}const Me=d=>(_e(d),t(1,r="editor")),Te=()=>t(1,r="select");function Ae(d){O[d?"unshift":"push"](()=>{re=d,t(18,re)})}function je(d){O[d?"unshift":"push"](()=>{y=d,t(13,y)})}function Se(d){b=d,t(17,b)}function ue(d){i=d,t(22,i),t(12,q),t(4,u),t(1,r)}const he=()=>y.undo();function Be(d){b=d,t(17,b)}function me(d){i=d,t(22,i),t(12,q),t(4,u),t(1,r)}function Ue(){le=this.offsetHeight,ce=this.offsetWidth,t(19,le),t(20,ce)}return n.$$set=d=>{"value"in d&&t(0,l=d.value),"label"in d&&t(2,a=d.label),"show_label"in d&&t(3,s=d.show_label),"source"in d&&t(4,u=d.source),"tool"in d&&t(1,r=d.tool),"drop_text"in d&&t(5,h=d.drop_text),"or_text"in d&&t(6,_=d.or_text),"upload_text"in d&&t(7,c=d.upload_text),"streaming"in d&&t(8,o=d.streaming),"pending"in d&&t(9,m=d.pending),"mirror_webcam"in d&&t(10,p=d.mirror_webcam)},n.$$.update=()=>{n.$$.dirty[0]&1&&k("change",l),n.$$.dirty[0]&2048&&k("drag",E),n.$$.dirty[0]&18&&(u==="canvas"&&r==="sketch"?t(12,q="bw-sketch"):r==="color-sketch"?t(12,q="color-sketch"):(u==="upload"||u==="webcam")&&r==="sketch"?t(12,q="mask"):t(12,q="editor")),n.$$.dirty[0]&4096&&t(22,i=q=="mask"?"#000000":"#000"),n.$$.dirty[0]&1&&(l===null||l.image===null&&l.mask===null)&&t(21,se=void 0)},[l,r,a,s,u,h,_,c,o,m,p,E,q,y,x,$,ee,b,re,le,ce,se,i,S,_e,T,H,ie,pe,qe,we,Fe,ve,ye,Ie,Ce,ae,ze,Me,Te,Ae,je,Se,ue,he,Be,me,Ue]}class sn extends Q{constructor(e){super(),G(this,e,rn,ln,Y,{value:0,label:2,show_label:3,source:4,tool:1,drop_text:5,or_text:6,upload_text:7,streaming:8,pending:9,mirror_webcam:10},null,[-1,-1])}}function an(n){let e,t;return{c(){e=R("img"),g(e,"class","w-full h-full object-contain"),V(e.src,t=n[0])||g(e,"src",t),g(e,"alt","")},m(i,l){C(i,e,l)},p(i,l){l&1&&!V(e.src,t=i[0])&&g(e,"src",t)},i:U,o:U,d(i){i&&z(e)}}}function un(n){let e,t,i,l;return i=new Re({}),{c(){e=R("div"),t=R("div"),B(i.$$.fragment),g(t,"class","h-5 dark:text-white opacity-50"),g(e,"class","h-full min-h-[15rem] flex justify-center items-center")},m(a,s){C(a,e,s),A(e,t),D(i,t,null),l=!0},p:U,i(a){l||(w(i.$$.fragment,a),l=!0)},o(a){v(i.$$.fragment,a),l=!1},d(a){a&&z(e),L(i)}}}function on(n){let e,t,i,l,a,s;e=new ut({props:{show_label:n[2],Icon:Re,label:n[1]||"Image"}});const u=[un,an],r=[];function h(_,c){return _[0]===null?0:1}return i=h(n),l=r[i]=u[i](n),{c(){B(e.$$.fragment),t=N(),l.c(),a=ke()},m(_,c){D(e,_,c),C(_,t,c),r[i].m(_,c),C(_,a,c),s=!0},p(_,[c]){const o={};c&4&&(o.show_label=_[2]),c&2&&(o.label=_[1]||"Image"),e.$set(o);let m=i;i=h(_),i===m?r[i].p(_,c):(te(),v(r[m],1,1,()=>{r[m]=null}),ne(),l=r[i],l?l.p(_,c):(l=r[i]=u[i](_),l.c()),w(l,1),l.m(a.parentNode,a))},i(_){s||(w(e.$$.fragment,_),w(l),s=!0)},o(_){v(e.$$.fragment,_),v(l),s=!1},d(_){L(e,_),_&&z(t),r[i].d(_),_&&z(a)}}}function fn(n,e,t){let{value:i}=e,{label:l=void 0}=e,{show_label:a}=e;const s=fe();return n.$$set=u=>{"value"in u&&t(0,i=u.value),"label"in u&&t(1,l=u.label),"show_label"in u&&t(2,a=u.show_label)},n.$$.update=()=>{n.$$.dirty&1&&i&&s("change",i)},[i,l,a]}class _n extends Q{constructor(e){super(),G(this,e,fn,on,Y,{value:0,label:1,show_label:2})}}function cn(n){let e,t,i;function l(s){n[15](s)}let a={source:n[4],tool:n[5],label:n[6],show_label:n[7],pending:n[9],streaming:n[8],drop_text:n[14]("interface.drop_image"),or_text:n[14]("or"),upload_text:n[14]("interface.click_to_upload"),mirror_webcam:n[11]};return n[0]!==void 0&&(a.value=n[0]),e=new sn({props:a}),O.push(()=>K(e,"value",l)),e.$on("edit",n[16]),e.$on("clear",n[17]),e.$on("change",n[18]),e.$on("stream",n[19]),e.$on("drag",n[20]),e.$on("error",n[21]),{c(){B(e.$$.fragment)},m(s,u){D(e,s,u),i=!0},p(s,u){const r={};u&16&&(r.source=s[4]),u&32&&(r.tool=s[5]),u&64&&(r.label=s[6]),u&128&&(r.show_label=s[7]),u&512&&(r.pending=s[9]),u&256&&(r.streaming=s[8]),u&16384&&(r.drop_text=s[14]("interface.drop_image")),u&16384&&(r.or_text=s[14]("or")),u&16384&&(r.upload_text=s[14]("interface.click_to_upload")),u&2048&&(r.mirror_webcam=s[11]),!t&&u&1&&(t=!0,r.value=s[0],Z(()=>t=!1)),e.$set(r)},i(s){i||(w(e.$$.fragment,s),i=!0)},o(s){v(e.$$.fragment,s),i=!1},d(s){L(e,s)}}}function hn(n){let e,t;return e=new _n({props:{value:n[0],label:n[6],show_label:n[7]}}),{c(){B(e.$$.fragment)},m(i,l){D(e,i,l),t=!0},p(i,l){const a={};l&1&&(a.value=i[0]),l&64&&(a.label=i[6]),l&128&&(a.show_label=i[7]),e.$set(a)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){L(e,i)}}}function mn(n){let e,t,i,l,a,s;const u=[n[1]];let r={};for(let o=0;o<u.length;o+=1)r=wt(r,u[o]);e=new vt({props:r});const h=[hn,cn],_=[];function c(o,m){return o[12]==="static"?0:1}return i=c(n),l=_[i]=h[i](n),{c(){B(e.$$.fragment),t=N(),l.c(),a=ke()},m(o,m){D(e,o,m),C(o,t,m),_[i].m(o,m),C(o,a,m),s=!0},p(o,m){const p=m&2?yt(u,[It(o[1])]):{};e.$set(p);let y=i;i=c(o),i===y?_[i].p(o,m):(te(),v(_[y],1,1,()=>{_[y]=null}),ne(),l=_[i],l?l.p(o,m):(l=_[i]=h[i](o),l.c()),w(l,1),l.m(a.parentNode,a))},i(o){s||(w(e.$$.fragment,o),w(l),s=!0)},o(o){v(e.$$.fragment,o),v(l),s=!1},d(o){L(e,o),o&&z(t),_[i].d(o),o&&z(a)}}}function gn(n){let e,t;return e=new St({props:{visible:n[3],variant:n[12]==="dynamic"&&n[0]===null&&n[4]==="upload"?"dashed":"solid",color:n[13]?"green":"grey",padding:!1,elem_id:n[2],style:{height:n[10].height,width:n[10].width},$$slots:{default:[mn]},$$scope:{ctx:n}}}),{c(){B(e.$$.fragment)},m(i,l){D(e,i,l),t=!0},p(i,[l]){const a={};l&8&&(a.visible=i[3]),l&4113&&(a.variant=i[12]==="dynamic"&&i[0]===null&&i[4]==="upload"?"dashed":"solid"),l&8192&&(a.color=i[13]?"green":"grey"),l&4&&(a.elem_id=i[2]),l&1024&&(a.style={height:i[10].height,width:i[10].width}),l&8420339&&(a.$$scope={dirty:l,ctx:i}),e.$set(a)},i(i){t||(w(e.$$.fragment,i),t=!0)},o(i){v(e.$$.fragment,i),t=!1},d(i){L(e,i)}}}function dn(n,e,t){let i;kt(n,pt,b=>t(14,i=b));let{elem_id:l=""}=e,{visible:a=!0}=e,{value:s=null}=e,{source:u="upload"}=e,{tool:r="editor"}=e,{label:h}=e,{show_label:_}=e,{streaming:c}=e,{pending:o}=e,{style:m={}}=e,{mirror_webcam:p}=e,{loading_status:y}=e,{mode:S}=e;const _e=fe();let T;function k(b){s=b,t(0,s)}function E(b){be.call(this,n,b)}function H(b){be.call(this,n,b)}function ie(b){be.call(this,n,b)}function x(b){be.call(this,n,b)}const $=({detail:b})=>t(13,T=b),ee=({detail:b})=>{t(1,y=y||{}),t(1,y.status="error",y),t(1,y.message=b,y)};return n.$$set=b=>{"elem_id"in b&&t(2,l=b.elem_id),"visible"in b&&t(3,a=b.visible),"value"in b&&t(0,s=b.value),"source"in b&&t(4,u=b.source),"tool"in b&&t(5,r=b.tool),"label"in b&&t(6,h=b.label),"show_label"in b&&t(7,_=b.show_label),"streaming"in b&&t(8,c=b.streaming),"pending"in b&&t(9,o=b.pending),"style"in b&&t(10,m=b.style),"mirror_webcam"in b&&t(11,p=b.mirror_webcam),"loading_status"in b&&t(1,y=b.loading_status),"mode"in b&&t(12,S=b.mode)},n.$$.update=()=>{n.$$.dirty&1&&t(0,s=s||null),n.$$.dirty&1&&_e("change")},[s,y,l,a,u,r,h,_,c,o,m,p,S,T,i,k,E,H,ie,x,$,ee]}class bn extends Q{constructor(e){super(),G(this,e,dn,gn,Y,{elem_id:2,visible:3,value:0,source:4,tool:5,label:6,show_label:7,streaming:8,pending:9,style:10,mirror_webcam:11,loading_status:1,mode:12})}}var Mn=bn;const Tn=["static","dynamic"];export{Mn as Component,Sn as ExampleComponent,Tn as modes};
