{"version":3,"sources":["pages/RunDetail/RunDetailSettingsTab/RunNameAndDescriptionCard.tsx","pages/RunDetail/RunDetailSettingsTab/RunDetailSettingsTab.tsx","components/ConfirmModal/ConfirmModal.tsx"],"names":["RunNameAndDescriptionCard","runHash","defaultName","defaultDescription","isArchived","formik","useFormik","initialValues","name","description","onSubmit","_","noop","validationSchema","yup","required","values","errors","touched","setFieldValue","setFieldTouched","onChange","e","fieldName","target","value","then","React","useEffect","analytics","ANALYTICS_EVENT_KEYS","runDetails","tabs","settings","tabView","ErrorBoundary","className","component","weight","size","tint","Button","onClick","runDetailAppModel","editRunNameAndDescription","disabled","isEmpty","variant","color","TextField","error","helperText","label","multiline","type","memo","RunDetailSettingsTab","history","useHistory","useState","openDeleteModal","setOpenDeleteModal","title","btnTooltip","btnText","onAction","archiveRun","btnProps","classNames","RunDetailSettingsTab__actionCardsCnt__btn__archive","RunDetailSettingsTab__actionCardsCnt__btn__unarchive","ConfirmModal","open","onCancel","deleteRun","push","text","icon","statusType","confirmBtnText","props","onClose","aria-labelledby","aria-describedby","PaperProps","elevation","withOnlyIcon","id","children","cancelBtnText","autoFocus","defaultProps","displayName"],"mappings":"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","file":"static/js/RunDetailSettingsTab.js?version=ff7b9abb8c9a8684ea23","sourcesContent":["import React, { memo } from 'react';\nimport * as yup from 'yup';\nimport _ from 'lodash-es';\nimport { useFormik } from 'formik';\n\nimport { Button, TextField } from '@material-ui/core';\n\nimport { Text } from 'components/kit';\nimport ErrorBoundary from 'components/ErrorBoundary/ErrorBoundary';\n\nimport { ANALYTICS_EVENT_KEYS } from 'config/analytics/analyticsKeysMap';\n\nimport runDetailAppModel from 'services/models/runs/runDetailAppModel';\nimport * as analytics from 'services/analytics';\n\nimport { IRunNameAndDescriptionCardProps } from './types';\n\nimport './RunDetailSettingsTab.scss';\n\nfunction RunNameAndDescriptionCard({\n  runHash,\n  defaultName,\n  defaultDescription,\n  isArchived,\n}: IRunNameAndDescriptionCardProps): React.FunctionComponentElement<React.ReactNode> {\n  const formik = useFormik({\n    initialValues: {\n      name: defaultName ?? '',\n      description: defaultDescription ?? '',\n    },\n    onSubmit: _.noop,\n    validationSchema: yup.object({\n      name: yup.string().required('Name is a required field'),\n    }),\n  });\n\n  const { values, errors, touched, setFieldValue, setFieldTouched } = formik;\n\n  function onChange(e: React.ChangeEvent<any>, fieldName: string) {\n    setFieldValue(fieldName, e?.target?.value, true).then(() => {\n      setFieldTouched(fieldName, true);\n    });\n  }\n\n  React.useEffect(() => {\n    analytics.pageView(ANALYTICS_EVENT_KEYS.runDetails.tabs.settings.tabView);\n  }, []);\n\n  function onSave() {\n    runDetailAppModel.editRunNameAndDescription(\n      runHash,\n      values.name,\n      values.description,\n      isArchived,\n    );\n  }\n\n  return (\n    <ErrorBoundary>\n      <div className='NameAndDescriptionEditCard'>\n        <div className='NameAndDescriptionEditCard__header'>\n          <Text component='h4' weight={600} size={14} tint={100}>\n            Run Properties\n          </Text>\n          <Button\n            onClick={onSave}\n            disabled={\n              !_.isEmpty(errors) ||\n              (values.name === defaultName &&\n                values.description === defaultDescription)\n            }\n            variant='contained'\n            color='primary'\n          >\n            Save\n          </Button>\n        </div>\n        <div className='NameAndDescriptionEditCard__content'>\n          <div className='NameAndDescriptionEditCard__content__nameBox'>\n            <TextField\n              variant='outlined'\n              className='TextField__OutLined__Medium NameAndDescriptionEditCard__content__nameBox__nameInput'\n              value={values.name}\n              onChange={(e) => onChange(e, 'name')}\n              error={!!(touched.name && errors.name)}\n              helperText={touched.name && errors.name}\n              label='Name'\n            />\n          </div>\n          <div className='NameAndDescriptionEditCard__content__descriptionBox'>\n            <TextField\n              variant='outlined'\n              multiline\n              label='Description'\n              type='textarea'\n              className='NameAndDescriptionEditCard__content__descriptionBox__descriptionInput'\n              value={values.description}\n              onChange={(e) => onChange(e, 'description')}\n              error={!!(touched.description && errors.description)}\n              helperText={touched.description && errors.description}\n            />\n          </div>\n        </div>\n      </div>\n    </ErrorBoundary>\n  );\n}\n\nexport default memo(RunNameAndDescriptionCard);\n","import React, { memo } from 'react';\nimport classNames from 'classnames';\nimport { useHistory } from 'react-router-dom';\n\nimport ConfirmModal from 'components/ConfirmModal/ConfirmModal';\nimport { ActionCard, Icon } from 'components/kit';\nimport ErrorBoundary from 'components/ErrorBoundary/ErrorBoundary';\n\nimport { ANALYTICS_EVENT_KEYS } from 'config/analytics/analyticsKeysMap';\n\nimport runDetailAppModel from 'services/models/runs/runDetailAppModel';\nimport * as analytics from 'services/analytics';\n\nimport RunNameAndDescriptionCard from './RunNameAndDescriptionCard';\nimport { IRunDetailSettingsTabProps } from './types';\n\nimport './RunDetailSettingsTab.scss';\n\nfunction RunDetailSettingsTab({\n  runHash,\n  isArchived,\n  defaultName,\n  defaultDescription,\n}: IRunDetailSettingsTabProps): React.FunctionComponentElement<React.ReactNode> {\n  const history = useHistory();\n  const [openDeleteModal, setOpenDeleteModal] = React.useState<boolean>(false);\n\n  function onRunArchive() {\n    analytics.trackEvent(\n      ANALYTICS_EVENT_KEYS.runDetails.tabs.settings.archiveRun,\n    );\n    runDetailAppModel.archiveRun(runHash, !isArchived);\n  }\n\n  function onRunDelete() {\n    analytics.trackEvent(\n      ANALYTICS_EVENT_KEYS.runDetails.tabs.settings.deleteRun,\n    );\n    runDetailAppModel.deleteRun(runHash, () => {\n      history.push('/runs');\n    });\n  }\n\n  function handleDeleteModalOpen() {\n    setOpenDeleteModal(true);\n  }\n\n  function handleDeleteModalClose() {\n    setOpenDeleteModal(false);\n  }\n\n  React.useEffect(() => {\n    analytics.pageView(ANALYTICS_EVENT_KEYS.runDetails.tabs.settings.tabView);\n  }, []);\n  return (\n    <ErrorBoundary>\n      <div className='RunDetailSettingsTab'>\n        <div className='RunDetailSettingsTab__actionCardsCnt'>\n          <RunNameAndDescriptionCard\n            defaultName={defaultName ?? ''}\n            defaultDescription={defaultDescription ?? ''}\n            runHash={runHash}\n            isArchived={isArchived}\n          />\n          <ActionCard\n            title={isArchived ? 'Unarchive Run' : 'Archive Run'}\n            description={\n              isArchived\n                ? 'Unarchive runs will appear in search both on Dashboard and Explore.'\n                : 'Archived runs will not appear in search both on Dashboard and Explore.'\n            }\n            btnTooltip={isArchived ? 'Unarchive' : 'Archive'}\n            btnText={isArchived ? 'Unarchive' : 'Archive'}\n            onAction={onRunArchive}\n            btnProps={{\n              variant: 'outlined',\n              className: classNames({\n                RunDetailSettingsTab__actionCardsCnt__btn__archive: !isArchived,\n                RunDetailSettingsTab__actionCardsCnt__btn__unarchive:\n                  isArchived,\n              }),\n            }}\n          />\n\n          <ActionCard\n            title='Delete Run'\n            description='Once you delete a run, there is no going back. Please be certain.'\n            btnTooltip='Delete Run'\n            btnText='Delete'\n            onAction={handleDeleteModalOpen}\n            btnProps={{\n              variant: 'contained',\n              className: 'RunDetailSettingsTab__actionCardsCnt__btn__delete',\n            }}\n          />\n        </div>\n        <ConfirmModal\n          open={openDeleteModal}\n          onCancel={handleDeleteModalClose}\n          onSubmit={onRunDelete}\n          text='Are you sure you want to delete this run?'\n          icon={<Icon name='delete' />}\n          title='Delete run'\n          statusType='error'\n          confirmBtnText='Delete'\n        />\n      </div>\n    </ErrorBoundary>\n  );\n}\n\nexport default memo(RunDetailSettingsTab);\n","import React from 'react';\n\nimport { Dialog } from '@material-ui/core';\n\nimport { Button, Text, Icon } from 'components/kit';\nimport ErrorBoundary from 'components/ErrorBoundary/ErrorBoundary';\n\nimport { IConfirmModalProps } from 'types/components/ConfirmModal/ConfirmModal';\n\nimport './ConfirmModal.scss';\n\nfunction ConfirmModal(\n  props: IConfirmModalProps,\n): React.FunctionComponentElement<React.ReactNode> {\n  return (\n    <ErrorBoundary>\n      <Dialog\n        open={props.open}\n        onClose={props.onCancel}\n        aria-labelledby='dialog-title'\n        aria-describedby='dialog-description'\n        PaperProps={{\n          elevation: 10,\n        }}\n        className={`ConfirmModal ConfirmModal__${props.statusType}`}\n      >\n        <div className='ConfirmModal__Body'>\n          <Button\n            size='small'\n            className='ConfirmModal__Close__Icon'\n            color='secondary'\n            withOnlyIcon\n            onClick={props.onCancel}\n          >\n            <Icon name='close' />\n          </Button>\n\n          <div className='ConfirmModal__Title__Container'>\n            <div className='ConfirmModal__Icon'>{props.icon}</div>\n            {props.title && (\n              <Text size={16} tint={100} component='h4' weight={600}>\n                {props.title}\n              </Text>\n            )}\n          </div>\n\n          <div>\n            {props.description && (\n              <Text\n                className='ConfirmModal__description'\n                weight={400}\n                component='p'\n                id='dialog-description'\n              >\n                {props.description}\n              </Text>\n            )}\n\n            <div>\n              {props.text && (\n                <Text\n                  className='ConfirmModal__text'\n                  weight={400}\n                  component='p'\n                  size={14}\n                  id='dialog-description'\n                >\n                  {props.text || ''}\n                </Text>\n              )}\n              {props.children && props.children}\n            </div>\n          </div>\n        </div>\n\n        <div className='ConfirmModal__Footer'>\n          <Button\n            onClick={props.onCancel}\n            className='ConfirmModal__CancelButton'\n          >\n            {props.cancelBtnText}\n          </Button>\n          <Button\n            onClick={props.onSubmit}\n            color='primary'\n            variant='contained'\n            className='ConfirmModal__ConfirmButton'\n            autoFocus\n          >\n            {props.confirmBtnText}\n          </Button>\n        </div>\n      </Dialog>\n    </ErrorBoundary>\n  );\n}\n\nConfirmModal.defaultProps = {\n  confirmBtnText: 'Confirm',\n  cancelBtnText: 'Cancel',\n  statusType: 'info',\n};\n\nConfirmModal.displayName = 'ConfirmModal';\n\nexport default React.memo<IConfirmModalProps>(ConfirmModal);\n"],"sourceRoot":""}