"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6237],{3171:(e,t,o)=>{o.r(t),o.d(t,{default:()=>$});var s=o(6252),r=o(9963);const i={class:"card"},l={class:"card-body"},n=(0,s._)("h1",null,"Permission Information",-1),a=(0,s._)("hr",null,null,-1),p={key:0,class:"alert alert-danger"},d={class:"row"},u=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Permission Set Details"),(0,s._)("p",{class:"text-instructions"},"Please supply a unique name for the permission set.")],-1),m={class:"col-md-8"},c=(0,s._)("label",null,"Permission Set Name",-1),y=(0,s._)("hr",null,null,-1),h={class:"row"},_=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Administration Permissions"),(0,s._)("p",{class:"text-instructions"}," The following are administration permissions. These should be only applied to permission sets where they are only granted to administrators. ")],-1),v={class:"col-md-8"},M=(0,s._)("hr",null,null,-1),f={class:"row"},g=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Bug Permissions"),(0,s._)("p",{class:"text-instructions"})],-1),b={class:"col-md-8"},S=(0,s._)("hr",null,null,-1),C={class:"row"},k=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Customers and Organisations")],-1),P={class:"col-md-8"},U=(0,s._)("hr",null,null,-1),w={class:"row"},L=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Object Permissions")],-1),R={class:"col-md-8"},q=(0,s._)("hr",null,null,-1),T={class:"row"},V=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Extra Permissions"),(0,s._)("p",{class:"text-instructions"},' The following permissions are added permissions on top of any read only. For example, if a read only user requires the ability to upload documentation, then you will need to enable the "Document" permissions here. ')],-1),I={class:"col-md-8"},B={key:1},E={key:2,class:"row submit-row"},W={class:"col-md-12"};var j=o(9669),O=o.n(j),A=o(3577);const G={class:"row"},x={name:"SinglePermissionProperties",components:{NSelect:o(9860).Z},props:{property:{type:String,default:""},propertyLabel:{type:String,default:""},propertyValue:{Type:Number,default:0},listOfChoices:{type:Array,default:()=>[]}},data(){return{propertyModel:this.propertyValue,fixListOfChoices:[]}},watch:{propertyModel:function(){null===this.propertyModel&&(this.propertyModel=0),this.$emit("update_property_value",{property:this.property,value:this.propertyModel})}},methods:{getLabel:function(e){const t=this.listOfChoices.filter((t=>t[0]===e));return 0===t.length?"":t[0][1]}},mounted(){this.fixListOfChoices=this.listOfChoices.map((e=>({label:e[1],value:e[0]})))}};var D=o(3744);const H=(0,D.Z)(x,[["render",function(e,t,o,r,i,l){const n=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",G,[(0,s._)("label",null,(0,A.toDisplayString)(o.propertyLabel),1),(0,s.Wm)(n,{options:i.fixListOfChoices,value:i.propertyModel,"onUpdate:value":t[0]||(t[0]=e=>i.propertyModel=e),class:"form-group"},null,8,["options","value"])])}]]);var N=o(3058),F=o(8416);const Z={name:"PermissionInformation",components:{SinglePermissionProperties:H},props:{permissionBoolean:{type:Array,default:()=>[]},permissionLevel:{type:Array,default:()=>[]},permissionSetResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"}},data(){return{permissionSetNameModel:this.permissionSetResults[0].fields.permission_set_name,administrationAssignUserToGroupModel:this.permissionSetResults[0].fields.administration_assign_user_to_group,administrationCreateGroupModel:this.permissionSetResults[0].fields.administration_create_group,administrationCreatePermissionSetModel:this.permissionSetResults[0].fields.administration_create_permission_set,administrationCreateUserModel:this.permissionSetResults[0].fields.administration_create_user,bugClientModel:this.permissionSetResults[0].fields.bug_client,customerModel:this.permissionSetResults[0].fields.customer,kanbanModel:this.permissionSetResults[0].fields.kanban_board,kanbanCardModel:this.permissionSetResults[0].fields.kanban_card,organisationModel:this.permissionSetResults[0].fields.organisation,projectModel:this.permissionSetResults[0].fields.project,requestForChangeModel:this.permissionSetResults[0].fields.request_for_change,requirementModel:this.permissionSetResults[0].fields.requirement,taskModel:this.permissionSetResults[0].fields.task,documentModel:this.permissionSetResults[0].fields.document,kanbanCommentModel:this.permissionSetResults[0].fields.kanban_comment,projectHistoryModel:this.permissionSetResults[0].fields.project_history,taskHistoryModel:this.permissionSetResults[0].fields.task_history}},mixins:[N.Z,F.Z],methods:{saveChanges:function(){const e=new FormData;e.set("permission_set_id",this.permissionSetResults[0].pk),e.set("permission_set_name",this.permissionSetNameModel),e.set("administration_assign_user_to_group",this.administrationAssignUserToGroupModel),e.set("administration_create_group",this.administrationCreateGroupModel),e.set("administration_create_permission_set",this.administrationCreatePermissionSetModel),e.set("administration_create_user",this.administrationCreateUserModel),e.set("bug_client",this.bugClientModel),e.set("customer",this.customerModel),e.set("kanban_board",this.kanbanModel),e.set("kanban_card",this.kanbanCardModel),e.set("organisation",this.organisationModel),e.set("project",this.projectModel),e.set("requirement",this.requirementModel),e.set("request_for_change",this.requestForChangeModel),e.set("task",this.taskModel),e.set("document",this.documentModel),e.set("kanban_comment",this.kanbanCommentModel),e.set("project_history",this.projectHistoryModel),e.set("task_history",this.taskHistoryModel),this.showLoadingModal("permission set"),O().post(`${this.rootUrl}permission_set_information/${this.permissionSetResults[0].pk}/save/`,e).then((e=>{this.closeLoadingModal()})).catch((e=>{this.showErrorModal(e,"Permission Set","")}))},updatePropertyValue:function(e){this[e.property]=e.value}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl})}},$=(0,D.Z)(Z,[["render",function(e,t,o,j,O,A){const G=(0,s.up)("single-permission-properties");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",l,[n,a,1===this.permissionSetResults[0].pk?((0,s.wg)(),(0,s.iD)("div",p,"Can not edit administration permission set.")):(0,s.kq)("v-if",!0),(0,s.kq)(" BASIC INFORMATION "),(0,s._)("div",d,[u,(0,s._)("div",m,[c,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>O.permissionSetNameModel=e),class:"form-control"},null,512),[[r.vModelText,O.permissionSetNameModel]])])]),y,(0,s.kq)(" ADMINISTRATION PERMISSIONS "),(0,s._)("div",h,[_,(0,s._)("div",v,[(0,s.Wm)(G,{property:"administrationAssignUserToGroupModel","property-label":"Assign User To Group Model","property-value":O.administrationAssignUserToGroupModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[1]||(t[1]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(G,{property:"administrationCreateGroupModel","property-label":"Create Groups","property-value":O.administrationCreateGroupModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[2]||(t[2]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(G,{property:"administrationCreatePermissionSetModel","property-label":"Create Permission Sets","property-value":O.administrationCreatePermissionSetModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[3]||(t[3]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(G,{property:"administrationCreateUserModel","property-label":"Create Users","property-value":O.administrationCreateUserModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[4]||(t[4]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),M,(0,s.kq)(" BUGS "),(0,s._)("div",f,[g,(0,s._)("div",b,[(0,s.Wm)(G,{property:"bugClientModel","property-label":"Configure bug clients","property-value":O.bugClientModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[5]||(t[5]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),S,(0,s.kq)(" Customers and Organisations "),(0,s._)("div",C,[k,(0,s._)("div",P,[(0,s.Wm)(G,{property:"customerModel","property-label":"Customers","property-value":O.customerModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[6]||(t[6]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(G,{property:"organisationModel","property-label":"Organisations","property-value":O.organisationModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[7]||(t[7]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),U,(0,s.kq)(" Object Permissions "),(0,s._)("div",w,[L,(0,s._)("div",R,[(0,s.Wm)(G,{property:"kanbanModel","property-label":"Kanban Boards","property-value":O.kanbanModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[8]||(t[8]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(G,{property:"kanbanCardModel","property-label":"Kanban Cards","property-value":O.kanbanCardModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[9]||(t[9]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(G,{property:"projectModel","property-label":"Projects","property-value":O.projectModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[10]||(t[10]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(G,{property:"taskModel","property-label":"Tasks","property-value":O.taskModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[11]||(t[11]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(G,{property:"requestForChangeModel","property-label":"Request for Change","property-value":O.requestForChangeModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[12]||(t[12]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(G,{property:"requirementModel","property-label":"Requirements","property-value":O.requirementModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[13]||(t[13]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),q,(0,s.kq)(" Extra Permissions "),(0,s._)("div",T,[V,(0,s._)("div",I,[(0,s.Wm)(G,{property:"documentModel","property-label":"Grants upload ability","property-value":O.documentModel,"list-of-choices":o.permissionBoolean,onUpdate_property_value:t[14]||(t[14]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(G,{property:"kanbanCommentModel","property-label":"Grants comments on Kanban Boards","property-value":O.kanbanCommentModel,"list-of-choices":o.permissionBoolean,onUpdate_property_value:t[15]||(t[15]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(G,{property:"projectHistoryModel","property-label":"Grants comments on Projects","property-value":O.projectHistoryModel,"list-of-choices":o.permissionBoolean,onUpdate_property_value:t[16]||(t[16]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(G,{property:"taskHistoryModel","property-label":"Grants comments on Tasks","property-value":O.taskHistoryModel,"list-of-choices":o.permissionBoolean,onUpdate_property_value:t[17]||(t[17]=e=>A.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),(0,s.kq)(" Save Changes "),(0,s.kq)(" Don't show if we are looking at admin "),1!==this.permissionSetResults[0].pk?((0,s.wg)(),(0,s.iD)("hr",B)):(0,s.kq)("v-if",!0),1!==this.permissionSetResults[0].pk?((0,s.wg)(),(0,s.iD)("div",E,[(0,s._)("div",W,[(0,s._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[18]||(t[18]=(...e)=>A.saveChanges&&A.saveChanges(...e))},"Save Permission Set")])])):(0,s.kq)("v-if",!0)])])}]])},3058:(e,t,o)=>{o.d(t,{Z:()=>r});var s=o(9909);const r={methods:{showErrorModal:function(e,t,o){new s.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new s.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new s.u_(document.getElementById("errorModal")).show()}}}},8416:(e,t,o)=>{o.d(t,{Z:()=>r});var s=o(9909);const r={methods:{closeLoadingModal:function(){let e=new s.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{e.hide()}),1e3)},showLoadingModal:function(e){new s.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${e} details`}}}}}]);