"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[645],{7325:(t,e,a)=>{a.d(e,{Z:()=>b});var s=a(6252),l=a(3577);const n={class:"row"},i={class:"col-md-4"},o=(0,s._)("strong",null,"Between Dates",-1),d={class:"text-instructions"},r={class:"col-md-4"},c={class:"form-group"},u={key:0,class:"error"},h={class:"col-md-4"},p={class:"form-group"},m={key:0,class:"error"};var f=a(9974),g=a(3766),_=a(2587),k=a(431);const v={name:"BetweenDates",setup:()=>({v$:(0,g.ZP)()}),components:{NDatePicker:f.Z},mixins:[k.Z],props:{destination:{type:String,default:""},endDateModel:{type:Number,default:()=>{let t=new Date;return t.setHours(16),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),new Date(t.setDate(t.getDate()+14)),t.getTime()}},noBackDating:{type:Boolean,default:!0},startDateModel:{type:Number,default:()=>{let t=new Date;return t.setHours(9),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()}}},validations:{localEndDateModel:{required:_.C1},localStartDateModel:{required:_.C1}},data(){return{localEndDateModel:this.endDateModel,localStartDateModel:this.startDateModel}},methods:{emitDates:function(){this.$emit("update_dates",{start_date:this.localStartDateModel,end_date:this.localEndDateModel})},endDateDisabled:function(t){let e=!1;return this.noBackDating||(e=this.disableDate(t)),t<=this.startDateModel-864e5||e},startDateDisabled:function(t){let e=!1;return this.noBackDating||(e=this.disableDate(t)),t>this.endDateModel||e}},watch:{localEndDateModel:function(){this.localEndDateModel<this.localStartDateModel&&(this.localEndDateModel=this.localStartDateModel()),this.emitDates()},localStartDateModel:function(){this.localEndDateModel<this.localStartDateModel&&(this.localStartDateModel=this.localEndDateModel()),this.emitDates()}},mounted(){this.emitDates()}},b=(0,a(3744).Z)(v,[["render",function(t,e,a,f,g,_){const k=(0,s.up)("n-date-picker");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",i,[o,(0,s._)("p",d," Choose the start and end date of the "+(0,l.toDisplayString)(a.destination)+". Please note the end date can not be earlier than the start date. They can be equal. ",1)]),(0,s._)("div",r,[(0,s._)("div",c,[(0,s._)("label",null,[(0,s.Uk)((0,l.toDisplayString)(a.destination)+" Start Date: ",1),f.v$.localStartDateModel.$error.length>0?((0,s.wg)(),(0,s.iD)("span",u," Please select a date.")):(0,s.kq)("v-if",!0)]),(0,s.Wm)(k,{type:"datetime",value:g.localStartDateModel,"onUpdate:value":e[0]||(e[0]=t=>g.localStartDateModel=t),class:"form-control","is-date-disabled":_.startDateDisabled,"is-time-disabled":_.startDateDisabled},null,8,["value","is-date-disabled","is-time-disabled"])])]),(0,s._)("div",h,[(0,s._)("div",p,[(0,s._)("label",null,[(0,s.Uk)((0,l.toDisplayString)(a.destination)+" End Date: ",1),f.v$.localEndDateModel.$error.length>0?((0,s.wg)(),(0,s.iD)("span",m," Please select a date.")):(0,s.kq)("v-if",!0)]),(0,s.Wm)(k,{type:"datetime",value:g.localEndDateModel,"onUpdate:value":e[1]||(e[1]=t=>g.localEndDateModel=t),class:"form-control","is-date-disabled":_.endDateDisabled,"is-time-disabled":_.endDateDisabled},null,8,["value","is-date-disabled","is-time-disabled"])])])])}]])},1241:(t,e,a)=>{a.r(e),a.d(e,{default:()=>ue});var s=a(6252);const l={class:"card"},n={class:"card-body"},i=(0,s._)("ul",{class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},[(0,s.kq)(" GROUPS AND USERS "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"group-and-users-tab","data-bs-toggle":"tab","data-bs-target":"#group-and-users",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Group and Users")]),(0,s.kq)(" RISK "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-risk-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-risk",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Risk")]),(0,s.kq)(" IMPLEMENTATION "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-implementation-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-implementation",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Implementation")]),(0,s.kq)(" BACKOUT PLAN "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-backout-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-backout",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Backout Plan")]),(0,s.kq)(" TEST PLAN "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link",id:"rfc-test-plan-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-test",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Test Plan")]),(0,s.kq)(" RUN SHEET "),(0,s._)("li",{class:"nav-item",role:"presentation"},[(0,s._)("button",{class:"nav-link active",id:"rfc-run-sheet-tab","data-bs-toggle":"tab","data-bs-target":"#rfc-run-sheet",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Run Sheet")])],-1),o=(0,s._)("hr",null,null,-1),d={class:"tab-content",id:"misc_module_content"},r={class:"tab-pane fade",id:"group-and-users",role:"tabpanel","aria-labelledby":"contact-tab"},c={class:"tab-pane fade",id:"rfc-risk",role:"tabpanel","aria-labelledby":"home-tab"},u={key:0},h={key:1,class:"row submit-row"},p={class:"col-md-12"},m={class:"tab-pane fade",id:"rfc-implementation",role:"tabpanel","aria-labelledby":"home-tab"},f={key:0},g={key:1,class:"row submit-row"},_={class:"col-md-12"},k={class:"tab-pane fade",id:"rfc-backout",role:"tabpanel","aria-labelledby":"home-tab"},v={key:0},b={key:1,class:"row submit-row"},D={class:"col-md-12"},y={class:"tab-pane fade",id:"rfc-test",role:"tabpanel","aria-labelledby":"home-tab"},w={key:0},M={key:1,class:"row submit-row"},T={class:"col-md-12"},S={class:"tab-pane fade active show",id:"rfc-run-sheet",role:"tabpanel","aria-labelledby":"home-tab"};var R=a(2898),U=a(2320),I=a(2984),q=a(3577);const C={class:"row"},L=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Run Sheet List"),(0,s._)("p",{class:"text-instructions"},[(0,s.Uk)(" The run sheet will specify specific tasks for each user to implement. Each run item can be specified to; "),(0,s._)("ul",null,[(0,s._)("li",null,"Block other run items"),(0,s._)("li",null,"Block out downtime")])])],-1),E={class:"col-md-8"},P={key:0,class:"table"},N=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("td",{style:{width:"20%"}},"Timings"),(0,s._)("td",{style:{width:"55%"}},"Title"),(0,s._)("td",{style:{width:"25%"}},"Assigned Users")])],-1),B=(0,s._)("div",null,"Start Time:",-1),$={class:"small-text"},x=(0,s._)("div",{class:"spacer"},null,-1),A=(0,s._)("div",null,"End Time:",-1),O={class:"small-text"},Z=["href"],F=(0,s._)("div",null,"Assigned User:",-1),V={class:"small-text"},W=(0,s._)("div",{class:"spacer"},null,-1),j=(0,s._)("div",null,"QA User:",-1),H={class:"small-text"},G=(0,s._)("div",{class:"spacer"},null,-1),K=(0,s._)("div",null,"Status:",-1),Q={key:0,class:"small-text"},Y={key:1},z=["onClick"],J=["onClick"],X={key:2,href:"javascript:void(0)",class:"btn btn-success change-task-button"},tt={key:3,href:"javascript:void(0)",class:"btn btn-danger change-task-button"},et={key:1,class:"alert alert-primary"},at={key:0},st={key:1,class:"row submit-row"},lt={class:"col-md-12"},nt={key:2,class:"row submit-row"},it={class:"col-md-12"};var ot=a(9909),dt=a(9963);const rt={class:"modal fade",id:"newRunItemModal",tabindex:"-1","aria-labelledby":"newRunItemModalLabel","aria-hidden":"true"},ct={class:"modal-dialog modal-xl modal-fullscreen-xl-down"},ut={class:"modal-content"},ht=(0,s._)("div",{class:"modal-header"},[(0,s._)("h2",{class:"modal-title",id:"newRunItemModalLabel"},"New Change Task"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newRunItemCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})])],-1),pt={class:"modal-body"},mt={class:"row"},ft=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Change Task Title"),(0,s._)("p",{class:"text-instructions"}," Please write a short title of the description for this task. i.e Backup of Database ")],-1),gt={class:"col-md-8"},_t={class:"form-group"},kt=(0,s._)("label",null,"Change Title:",-1),vt=(0,s._)("hr",null,null,-1),bt=(0,s._)("hr",null,null,-1),Dt={class:"row"},yt=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Implementation & QA User"),(0,s._)("p",{class:"text-instructions"}," Please indicate which user will be implementing the work, and the user who will QA. ")],-1),wt={class:"col-md-8"},Mt={class:"row"},Tt={class:"col-md-6"},St={class:"form-group"},Rt=(0,s._)("label",null,"Implementation User",-1),Ut={class:"col-md-6"},It={class:"form-group"},qt=(0,s._)("label",null,"QA User",-1),Ct=(0,s._)("hr",null,null,-1),Lt={class:"row"},Et=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Description"),(0,s._)("p",{class:"text-instructions"}," Write a detail description of this particular task. ")],-1),Pt={class:"col-md-8"},Nt=(0,s._)("label",null,"Change Task Description (Optional):",-1),Bt=(0,s._)("hr",null,null,-1),$t={class:"row"},xt=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Misc"),(0,s._)("p",{class:"text-instructions"},' Please fill in the stakeholders for this particular change task. Default value will be "Stakeholders". '),(0,s._)("p",{class:"text-instructions"},' To state if there is downtime, please click the "No Downtime" to change it\'s statue. ')],-1),At={class:"col-md-8"},Ot={class:"form-group"},Zt=(0,s._)("label",null,"Stakeholders:",-1),Ft=(0,s._)("br",null,null,-1),Vt={class:"btn-group",role:"group","aria-label":"Basic checkbox toggle button group"},Wt={class:"btn btn-outline-primary",for:"isDowntime"},jt={class:"modal-footer"},Ht=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);var Gt=a(7267),Kt=a(7325),Qt=a(9860),Yt=a(3058),zt=a(4250);const Jt=a(9669),Xt={name:"RfcNewRunItem",components:{BetweenDates:Kt.Z,editor:Gt.Z,NSelect:Qt.Z},props:{locationId:{type:Number,default:0},userList:{type:Array,default:()=>[]}},mixins:[Yt.Z],data:()=>({assignedUserModel:"",changeDescriptionModel:"",changeEndDateModel:"",changeIsDowntimeModel:!1,changeStakeholderModel:"Stakeholder(s)",changeStartDateModel:"",changeTitleModel:"",qaUserModel:"",userListFixed:[]}),computed:{...(0,zt.Se)({rootUrl:"getRootUrl"})},methods:{isDowntime:function(){return this.changeIsDowntimeModel?"Downtime Scheduled":"No Downtime"},submitChangeTask:function(t){t.preventDefault();var e=parseInt(this.changeEndDateModel)-parseInt(this.changeStartDateModel);const a=new FormData;a.set("request_for_change",this.locationId.toString()),a.set("change_task_title",this.changeTitleModel),a.set("change_task_description",this.changeDescriptionModel),a.set("change_task_start_date",new Date(this.changeStartDateModel).toISOString()),a.set("change_task_end_date",new Date(this.changeEndDateModel).toISOString()),a.set("change_task_seconds",e.toString()),a.set("change_task_assigned_user",this.assignedUserModel),a.set("change_task_qa_user",this.qaUserModel),a.set("change_task_required_by",this.changeStakeholderModel),a.set("is_downtime",this.changeIsDowntimeModel),Jt.post(`${this.rootUrl}rfc_information/${this.locationId}/new_change_task/`,a).then((t=>{this.$emit("update_change_task_list",t.data),this.changeDescriptionModel="",this.changeIsDowntimeModel=!1,this.changeStakeholderModel="Stakeholder(s)",this.changeTitleModel="",document.getElementById("newRunItemCloseButton").click()})).catch((t=>{this.showErrorModal(t,"Change Task")}))},updateDates:function(t){this.changeStartDateModel=t.start_date,this.changeEndDateModel=t.end_date}},mounted(){this.userListFixed=this.userList.map((t=>({label:`${t.username}: ${t.first_name} ${t.last_name}`,value:t.id})))}};var te=a(3744);const ee=(0,te.Z)(Xt,[["render",function(t,e,a,l,n,i){const o=(0,s.up)("between-dates"),d=(0,s.up)("n-select"),r=(0,s.up)("editor");return(0,s.wg)(),(0,s.iD)("div",rt,[(0,s._)("div",ct,[(0,s._)("div",ut,[ht,(0,s._)("div",pt,[(0,s.kq)(" CHANGE TASK TITLE "),(0,s._)("div",mt,[ft,(0,s._)("div",gt,[(0,s._)("div",_t,[kt,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=e=>t.changeTitleModel=e)},null,512),[[dt.vModelText,t.changeTitleModel]])])])]),(0,s.kq)(" START DATE & END DATE "),vt,(0,s.Wm)(o,{destination:"Change Task",onUpdate_dates:e[1]||(e[1]=t=>i.updateDates(t)),"no-back-dating":!1}),(0,s.kq)(" IMPLEMENTATION USER & QA USER "),bt,(0,s._)("div",Dt,[yt,(0,s._)("div",wt,[(0,s._)("div",Mt,[(0,s._)("div",Tt,[(0,s._)("div",St,[Rt,(0,s.Wm)(d,{options:t.userListFixed,value:t.assignedUserModel,"onUpdate:value":e[2]||(e[2]=e=>t.assignedUserModel=e)},null,8,["options","value"])])]),(0,s._)("div",Ut,[(0,s._)("div",It,[qt,(0,s.Wm)(d,{value:t.qaUserModel,"onUpdate:value":e[3]||(e[3]=e=>t.qaUserModel=e),options:t.userListFixed},null,8,["value","options"])])])])])]),(0,s.kq)(" DESCRIPTION OPTIONAL "),Ct,(0,s._)("div",Lt,[Et,(0,s._)("div",Pt,[Nt,(0,s.Wm)(r,{init:{height:300,menubar:!1,plugins:["lists","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,modelValue:t.changeDescriptionModel,"onUpdate:modelValue":e[4]||(e[4]=e=>t.changeDescriptionModel=e)},null,8,["modelValue"])])]),(0,s.kq)(" MISC "),Bt,(0,s._)("div",$t,[xt,(0,s._)("div",At,[(0,s._)("div",Ot,[Zt,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=e=>t.changeStakeholderModel=e)},null,512),[[dt.vModelText,t.changeStakeholderModel]])]),Ft,(0,s._)("div",Vt,[(0,s.wy)((0,s._)("input",{type:"checkbox",id:"isDowntime",class:"btn-check",autocomplete:"off","onUpdate:modelValue":e[6]||(e[6]=e=>t.changeIsDowntimeModel=e)},null,512),[[dt.vModelCheckbox,t.changeIsDowntimeModel]]),(0,s._)("label",Wt,(0,q.toDisplayString)(i.isDowntime()),1)])])])]),(0,s._)("div",jt,[Ht,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[7]||(e[7]=t=>i.submitChangeTask(t))}," Add Change Task ")])])])])}]]);var ae=a(431);const se=a(9669),le={name:"RfcRunSheetList",components:{RfcNewRunItem:ee},props:{isReadOnly:{type:Boolean,default:!1},locationId:{type:Number,default:0},rfcId:{type:Number,default:0},rfcStatus:{type:Number,default:0},userList:{type:Array,default:()=>[]}},mixins:[ae.Z,Yt.Z],data:()=>({changeTaskList:[]}),computed:{...(0,zt.Se)({userLevel:"getUserLevel",rootUrl:"getRootUrl"}),isCompleted:function(){return 0===this.changeTaskList.filter((t=>{const e=t.fields.change_task_status;return 5!==e&&6!==e})).length&&(3===this.rfcStatus||4===this.rfcStatus)}},methods:{addNewChangeItem:function(){new ot.u_(document.getElementById("newRunItemModal")).show()},closeRfc:function(){const t=new FormData;t.set("rfc_status",5),se.post(`${this.rootUrl}rfc_information/${this.rfcId}/update_status/`,t).then((t=>{window.location.reload(!0)})).catch((t=>{this.showErrorModal(t,"request_for_change")}))},getRunSheetList:function(){se.post(`${this.rootUrl}rfc_information/${this.locationId}/change_task_list/`).then((t=>{this.changeTaskList=t.data,this.$store.commit({type:"updateChangeTaskCount",changeTaskCount:t.data.length})})).catch((t=>{this.showErrorModal(t,"request_for_change")}))},getStatus:function(t){switch(t){case 1:return"Draft";case 2:return"Waiting for approval";case 3:return"Waiting to start";case 4:return"Task Started";case 5:return"Task Finished";case 6:return"Task FAILED";default:return"---"}},getUserName:function(t){var e=this.userList.filter((e=>e.id==t));return 0==e.length?"---":`${e[0].username}: ${e[0].first_name} ${e[0].last_name}`},updateChangeTaskList:function(t){this.changeTaskList=t,this.$store.commit({type:"updateChangeTaskCount",changeTaskCount:t.length})},updateChangeTaskStatus:function(t,e){const a=new FormData;a.set("change_task_status",e),se.post(`${this.rootUrl}change_task_update_status/${t}/`,a).then((a=>{this.changeTaskList=this.changeTaskList.map((a=>a.pk==t?(a.fields.change_task_status=e,a):a))})).catch((t=>{this.showErrorModal(t,"request_for_change")}))}},mounted(){this.getRunSheetList()}},ne=(0,te.Z)(le,[["render",function(t,e,a,l,n,i){const o=(0,s.up)("rfc-new-run-item");return(0,s.wg)(),(0,s.iD)("div",C,[L,(0,s._)("div",E,[t.changeTaskList.length>0?((0,s.wg)(),(0,s.iD)("table",P,[N,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.changeTaskList,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.pk},[(0,s._)("td",null,[B,(0,s._)("div",$,(0,q.toDisplayString)(t.getNiceDate(e.fields.change_task_start_date)),1),x,A,(0,s._)("div",O,(0,q.toDisplayString)(t.getNiceDate(e.fields.change_task_end_date)),1)]),(0,s._)("td",null,[(0,s._)("a",{href:`${t.rootUrl}change_task_information/${e.pk}/`},(0,q.toDisplayString)(e.fields.change_task_title),9,Z)]),(0,s._)("td",null,[F,(0,s._)("div",V,(0,q.toDisplayString)(i.getUserName(e.fields.change_task_assigned_user)),1),W,j,(0,s._)("div",H,(0,q.toDisplayString)(i.getUserName(e.fields.change_task_qa_user)),1),G,K,4!==a.rfcStatus?((0,s.wg)(),(0,s.iD)("div",Q,(0,q.toDisplayString)(i.getStatus(e.fields.change_task_status)),1)):((0,s.wg)(),(0,s.iD)("div",Y,[(0,s.kq)(" START BUTTON "),3==e.fields.change_task_status&&t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary change-task-button",onClick:t=>i.updateChangeTaskStatus(e.pk,4)},"Start Task",8,z)):(0,s.kq)("v-if",!0),(0,s.kq)(" FINISH BUTTON "),4==e.fields.change_task_status&&t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:1,href:"javascript:void(0)",class:"btn btn-warning change-task-button",onClick:t=>i.updateChangeTaskStatus(e.pk,5)},"Finish Task",8,J)):(0,s.kq)("v-if",!0),(0,s.kq)(" SUCCESS BUTTON "),5==e.fields.change_task_status&&t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",X,"Successful")):(0,s.kq)("v-if",!0),(0,s.kq)(" FAILED BUTTON "),6==e.fields.change_task_status&&t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",tt,"Failed")):(0,s.kq)("v-if",!0)]))])])))),128))])])):(0,s.kq)("v-if",!0),0==t.changeTaskList.length?((0,s.wg)(),(0,s.iD)("div",et," Currently there are no Change Tasks associated with this Request for Change. Please add some by clicking on the button below. ")):(0,s.kq)("v-if",!0)]),(0,s.kq)(" ADD NEW CHANGE TASK TO RUN SHEET "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",at)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",st,[(0,s._)("div",lt,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>i.addNewChangeItem&&i.addNewChangeItem(...t))},"New Change Item")):(0,s.kq)("v-if",!0)])])),(0,s.kq)(" If ALL Change Tasks have been completed - you can close the RFC "),i.isCompleted?((0,s.wg)(),(0,s.iD)("div",nt,[(0,s._)("div",it,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-warning save-changes",onClick:e[1]||(e[1]=(...t)=>i.closeRfc&&i.closeRfc(...t))},"Close Request for Change")):(0,s.kq)("v-if",!0)])])):(0,s.kq)("v-if",!0),(0,s.kq)(" Modal "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.j4)(o,{key:3,"location-id":a.locationId,"user-list":a.userList,onUpdate_change_task_list:e[2]||(e[2]=t=>i.updateChangeTaskList(t))},null,8,["location-id","user-list"]))])}]]);var ie=a(7156),oe=a(6367),de=a(8416);const re=a(9669),ce={name:"RfcModules",components:{GroupsAndUsersModule:oe.Z,RfcBackoutPlan:R.Z,RfcImplementationPlan:U.Z,RfcRisk:I.Z,RfcRunSheetList:ne,RfcTestPlan:ie.Z},props:{locationId:{type:Number,default:0},destination:{type:String,default:"request_for_change"},isReadOnly:{type:Boolean,default:!1},rfcResults:{type:Array,default:[]},userList:{type:Array,default:()=>[]}},mixins:[Yt.Z,de.Z],data:()=>({rfcData:{rfcBackoutPlan:"",rfcImpactModel:{},rfcImplementationPlanModel:"",rfcPriorityModel:{},rfcRiskModel:{},rfcRiskSummaryModel:"",rfcTestPlanModel:"",rfcTypeModel:{}},validationData:{tab_2:!0,tab_3:!0,tab_4:!0,tab_5:!0}}),computed:{...(0,zt.Se)({rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{sendData:function(t,e){this.showLoadingModal("Project"),re.post(e,t).then((t=>{this.closeLoadingModal()})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateBackoutPlan:function(){if(!1===this.validationData.tab_4)return void this.showErrorModal("Please fill out all data","Backout Plan","");const t=new FormData;t.set("text_input",this.rfcData.rfcBackoutPlan),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/backout/`)},updateImplementation:function(){if(!1===this.validationData.tab_3)return void this.showErrorModal("Please fill out all data","Implementation","");const t=new FormData;t.set("text_input",this.rfcData.rfcImplementationPlanModel),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/implementation/`)},updateRisk:function(){if(!1===this.validationData.tab_2)return void this.showErrorModal("Please fill out all data","Risk","");const t=new FormData;t.set("priority_of_change",this.rfcData.rfcPriorityModel),t.set("risk_of_change",this.rfcData.rfcRiskModel),t.set("impact_of_change",this.rfcData.rfcImpactModel),t.set("text_input",this.rfcData.rfcRiskSummaryModel),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/risk/`)},updateValidation:function(t){this.validationData[t.tab]=t.value},updateTestPlan:function(){if(!1===this.validationData.tab_5)return void this.showErrorModal("Please fill out all data","Test Plan","");const t=new FormData;t.set("text_input",this.rfcData.rfcTestPlanModel),this.sendData(t,`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/test/`)},updateValues:function(t){this.rfcData[t.modelName]=t.modelValue}},mounted(){this.$store.commit({type:"updateDestination",destination:this.destination,locationId:this.locationId})}},ue=(0,te.Z)(ce,[["render",function(t,e,a,R,U,I){const q=(0,s.up)("groups-and-users-module"),C=(0,s.up)("rfc-risk"),L=(0,s.up)("rfc-implementation-plan"),E=(0,s.up)("rfc-backout-plan"),P=(0,s.up)("rfc-test-plan"),N=(0,s.up)("rfc-run-sheet-list");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",n,[i,o,(0,s._)("div",d,[(0,s._)("div",r,[(0,s.Wm)(q,{"location-id":a.locationId,destination:a.destination},null,8,["location-id","destination"])]),(0,s._)("div",c,[(0,s.Wm)(C,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[0]||(e[0]=t=>I.updateValidation(t)),onUpdate_values:e[1]||(e[1]=t=>I.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",u)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",p,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[2]||(e[2]=(...t)=>I.updateRisk&&I.updateRisk(...t))},"Update Risks")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",m,[(0,s.Wm)(L,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[3]||(e[3]=t=>I.updateValidation(t)),onUpdate_values:e[4]||(e[4]=t=>I.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",f)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",_,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[5]||(e[5]=(...t)=>I.updateImplementation&&I.updateImplementation(...t))},"Update Implementation Plan")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",k,[(0,s.Wm)(E,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[6]||(e[6]=t=>I.updateValidation(t)),onUpdate_values:e[7]||(e[7]=t=>I.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",v)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",b,[(0,s._)("div",D,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[8]||(e[8]=(...t)=>I.updateBackoutPlan&&I.updateBackoutPlan(...t))},"Update Backout Plan")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",y,[(0,s.Wm)(P,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_validation:e[9]||(e[9]=t=>I.updateValidation(t)),onUpdate_values:e[10]||(e[10]=t=>I.updateValues(t))},null,8,["rfc-results","is-read-only"]),(0,s.kq)(" Update Button "),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("hr",w)),a.isReadOnly?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("div",M,[(0,s._)("div",T,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[11]||(e[11]=(...t)=>I.updateTestPlan&&I.updateTestPlan(...t))},"Update Test Plan")):(0,s.kq)("v-if",!0)])]))]),(0,s._)("div",S,[(0,s.Wm)(N,{"is-read-only":a.isReadOnly,"location-id":a.locationId,"user-list":a.userList,"rfc-id":a.rfcResults[0].pk,"rfc-status":a.rfcResults[0].fields.rfc_status,onUpdate_values:e[12]||(e[12]=t=>I.updateValues(t))},null,8,["is-read-only","location-id","user-list","rfc-id","rfc-status"])])])])])}]])},8416:(t,e,a)=>{a.d(e,{Z:()=>l});var s=a(9909);const l={methods:{closeLoadingModal:function(){let t=new s.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{t.hide()}),1e3)},showLoadingModal:function(t){new s.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${t} details`}}}}}]);