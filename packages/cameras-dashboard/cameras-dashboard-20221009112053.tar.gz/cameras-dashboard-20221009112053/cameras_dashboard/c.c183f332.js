import{e,i as s,J as t,a as l,dB as r,u as n,dC as o,s as i,O as a}from"./main-d07cb663.js";const u=(e,s,t)=>{const l=new Map;for(let r=s;r<=t;r++)l.set(e[r],r);return l},f=e(class extends s{constructor(e){if(super(e),e.type!==t.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,s,t){let l;void 0===t?t=s:void 0!==s&&(l=s);const r=[],n=[];let o=0;for(const s of e)r[o]=l?l(s,o):o,n[o]=t(s,o),o++;return{values:n,keys:r}}render(e,s,t){return this.dt(e,s,t).values}update(e,[s,t,f]){var c;const d=l(e),{values:h,keys:v}=this.dt(s,t,f);if(!Array.isArray(d))return this.at=v,h;const p=null!==(c=this.at)&&void 0!==c?c:this.at=[],y=[];let x,g,m=0,b=d.length-1,k=0,w=h.length-1;for(;m<=b&&k<=w;)if(null===d[m])m++;else if(null===d[b])b--;else if(p[m]===v[k])y[k]=r(d[m],h[k]),m++,k++;else if(p[b]===v[w])y[w]=r(d[b],h[w]),b--,w--;else if(p[m]===v[w])y[w]=r(d[m],h[w]),n(e,y[w+1],d[m]),m++,w--;else if(p[b]===v[k])y[k]=r(d[b],h[k]),n(e,d[m],d[b]),b--,k++;else if(void 0===x&&(x=u(v,k,w),g=u(p,m,b)),x.has(p[m]))if(x.has(p[b])){const s=g.get(v[k]),t=void 0!==s?d[s]:null;if(null===t){const s=n(e,d[m]);r(s,h[k]),y[k]=s}else y[k]=r(t,h[k]),n(e,d[m],t),d[s]=null;k++}else o(d[b]),b--;else o(d[m]),m++;for(;k<=w;){const s=n(e,y[w+1]);r(s,h[k]),y[k++]=s}for(;m<=b;){const e=d[m++];null!==e&&o(e)}return this.at=v,i(e,y),a}});export{f as c};
