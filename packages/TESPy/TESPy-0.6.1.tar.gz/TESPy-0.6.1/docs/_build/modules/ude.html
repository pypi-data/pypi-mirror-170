<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Benchmarks" href="../benchmarks.html" /><link rel="prev" title="Fluid properties" href="fluid_properties.html" />

    <meta name="generator" content="sphinx-5.1.1, furo 2022.06.21"/>
        <title>User defined equations - TESPy 0.6.1 - Leidenfrost&#39;s Library documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">TESPy 0.6.1 - Leidenfrost's Library documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/./images/logo_tespy_mid.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/./images/logo_tespy_mid_darkmode.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">TESPy 0.6.1 - Leidenfrost's Library documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Thermal Engineering Systems in Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation and setup</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../basics.html">Modeling Basic Systems</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/heat_pump.html">Heat Pump</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/rankine_cycle.html">Rankine Cycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/gas_turbine.html">Gas Turbine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/district_heating.html">District Heating Network</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials.html">Advanced Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/heat_pump_steps.html">Build a Heat Pump Stepwise</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/starting_values.html">How to Generate Stable Starting Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/heat_pump_exergy.html">Exergy Analysis of a Ground-Coupled Heat Pump</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/pygmo_optimization.html">Thermal Power Plant Efficiency Optimization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Example Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../regular_meeting.html">TESPy community</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../modules.html">TESPy modules</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="networks.html">Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="networks.html#network-reader">Network reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="components.html#component-groups-subystems">Component Groups: Subystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="connections.html">Connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="characteristics.html">Characteristics</a></li>
<li class="toctree-l2"><a class="reference internal" href="fluid_properties.html">Fluid properties</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">User defined equations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api.html">API Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/components.html">tespy.components module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/connections.html">tespy.connections module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/data.html">tespy.data module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/networks.html">tespy.networks module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/tools.html">tespy.tools module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new.html">What’s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zliterature.html">Literature</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced/exergy.html">Exergy analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contribute to TESPy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/what.html">What can I contribute?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/how.html">How can I contribute?</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="user-defined-equations">
<span id="tespy-ude-label"></span><h1>User defined equations<a class="headerlink" href="#user-defined-equations" title="Permalink to this heading">#</a></h1>
<p>User defined functions provide a powerful tool to the user as they enable
the definition of generic and individual equations that can be applied to your
TESPy model. In order to implement this functionality in your model you will
use the <a class="reference internal" href="../api/tools.html#tespy.tools.helpers.UserDefinedEquation" title="tespy.tools.helpers.UserDefinedEquation"><code class="xref py py-class docutils literal notranslate"><span class="pre">tespy.tools.helpers.UserDefinedEquation</span></code></a>. The API
documentation provides you with an interesting example application, too.</p>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this heading">#</a></h2>
<p>For an easy start, let’s consider two different streams. The mass flow of both
streams should be coupled within the model. There is already a possibility
covering simple relations, i.e. applying value referencing with the
<a class="reference internal" href="../api/connections.html#tespy.connections.connection.Ref" title="tespy.connections.connection.Ref"><code class="xref py py-class docutils literal notranslate"><span class="pre">tespy.connections.connection.Ref</span></code></a> class. This class allows to
formulate simple linear relations:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[0 = \dot{m}_1 - \left(\dot{m}_2 \cdot a + b\right)\]</div>
</div>
<p>Instead of this simple application, other relations could be useful. For
example, the mass flow of our first stream should be quadratic to the mass
flow of the second stream.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[0 = \dot{m}_1 - \dot{m}_2^2\]</div>
</div>
<p>In order to apply this relation, we need to import the
<a class="reference internal" href="../api/tools.html#tespy.tools.helpers.UserDefinedEquation" title="tespy.tools.helpers.UserDefinedEquation"><code class="xref py py-class docutils literal notranslate"><span class="pre">tespy.tools.helpers.UserDefinedEquation</span></code></a> class into our model an
create an instance with the respective data. First, we set up the TESPy model.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tespy.networks</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">tespy.components</span> <span class="kn">import</span> <span class="n">Sink</span><span class="p">,</span> <span class="n">Source</span>
<span class="kn">from</span> <span class="nn">tespy.connections</span> <span class="kn">import</span> <span class="n">Connection</span>
<span class="kn">from</span> <span class="nn">tespy.tools.helpers</span> <span class="kn">import</span> <span class="n">UserDefinedEquation</span>

<span class="n">fluids</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;water&#39;</span><span class="p">]</span>

<span class="n">nw</span> <span class="o">=</span> <span class="n">Network</span><span class="p">(</span><span class="n">fluids</span><span class="o">=</span><span class="n">fluids</span><span class="p">)</span>
<span class="n">nw</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">p_unit</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">T_unit</span><span class="o">=</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="n">h_unit</span><span class="o">=</span><span class="s1">&#39;kJ / kg&#39;</span><span class="p">)</span>

<span class="n">so1</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="s1">&#39;source 1&#39;</span><span class="p">)</span>
<span class="n">so2</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="s1">&#39;source 2&#39;</span><span class="p">)</span>
<span class="n">si1</span> <span class="o">=</span> <span class="n">Sink</span><span class="p">(</span><span class="s1">&#39;sink 1&#39;</span><span class="p">)</span>
<span class="n">si2</span> <span class="o">=</span> <span class="n">Sink</span><span class="p">(</span><span class="s1">&#39;sink 2&#39;</span><span class="p">)</span>

<span class="n">c1</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">so1</span><span class="p">,</span> <span class="s1">&#39;out1&#39;</span><span class="p">,</span> <span class="n">si1</span><span class="p">,</span> <span class="s1">&#39;in1&#39;</span><span class="p">)</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">so2</span><span class="p">,</span> <span class="s1">&#39;out1&#39;</span><span class="p">,</span> <span class="n">si2</span><span class="p">,</span> <span class="s1">&#39;in1&#39;</span><span class="p">)</span>

<span class="n">nw</span><span class="o">.</span><span class="n">add_conns</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">)</span>

<span class="n">c1</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">fluid</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;water&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">c2</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">fluid</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;water&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">p</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>In the model both streams are well defined regarding pressure, enthalpy and
fluid composition. The second stream’s mass flow is defined through
specification of the volumetric flow, we are missing the mass flow of the
connection <code class="code docutils literal notranslate"><span class="pre">c1</span></code>. As described, its value should be quadratic to the
(still unknown) mass flow of <code class="code docutils literal notranslate"><span class="pre">c2</span></code>. First, we now need to define the
equation in a function which returns the residual value of the equation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_ude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">val_SI</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">val_SI</span> <span class="o">**</span> <span class="mi">2</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The function must only take one parameter, i.e. the UserDefinedEquation
class instance. The <strong>name of the parameter is arbitrary</strong>. We will use
<code class="code docutils literal notranslate"><span class="pre">self</span></code> in this example. It serves to access some important parameters
of the equation:</p>
<ul class="simple">
<li><p>connections required in the equation</p></li>
<li><p>Jacobian matrix to place the partial derivatives</p></li>
<li><p>automatic numerical derivatives</p></li>
<li><p>other (external) parameters (e.g. the CharLine in the API docs example of
<a class="reference internal" href="../api/tools.html#tespy.tools.helpers.UserDefinedEquation" title="tespy.tools.helpers.UserDefinedEquation"><code class="xref py py-class docutils literal notranslate"><span class="pre">tespy.tools.helpers.UserDefinedEquation</span></code></a>)</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is only possible to use the SI-values of the connection variables as
these values are updated in every iteration. The values in the network’s
specified unit system are only updated after a simulation.</p>
</div>
<p>The second step is to define the derivatives with respect to all primary
variables of the network, i.e. mass flow, pressure, enthalpy and fluid
composition of every connection. The derivatives have to be passed to the
Jacobian. In order to do this, we create a function that updates the values
inside the Jacobian of the <code class="code docutils literal notranslate"><span class="pre">UserDefinedEquation</span></code> and returns it:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">self.jacobian</span></code> is a dictionary containing numpy arrays for every
connection required by the <code class="code docutils literal notranslate"><span class="pre">UserDefinedEquation</span></code>.</p></li>
<li><p>derivatives to <strong>mass flow</strong> are placed in the first element of the numpy
array (<strong>index 0</strong>)</p></li>
<li><p>derivatives to <strong>pressure</strong> are placed in the second element of the numpy
array (<strong>index 1</strong>)</p></li>
<li><p>derivatives to <strong>enthalpy</strong> are placed in the third element of the numpy
array (<strong>index 2</strong>)</p></li>
<li><p>derivatives to <strong>fluid composition</strong> are placed in the remaining elements
beginning at the fourth element of the numpy array (<strong>indices 3:</strong>)</p></li>
</ul>
<p>If we calculate the derivatives of our equation, it is easy to find, that only
derivatives to mass flow are not zero.</p>
<ul class="simple">
<li><p>The derivative to mass flow of connection <code class="code docutils literal notranslate"><span class="pre">c1</span></code> is equal to <span class="math notranslate nohighlight">\(1\)</span></p></li>
<li><p>The derivative to mass flow of connection <code class="code docutils literal notranslate"><span class="pre">c2</span></code> is equal to
<span class="math notranslate nohighlight">\(2 \cdot \dot{m}_2\)</span>.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_ude_deriv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">val_SI</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span>
</pre></div>
</div>
<p>Now we can create our instance of the <code class="code docutils literal notranslate"><span class="pre">UserDefinedEquation</span></code> and add it to
the network. The class requires four mandatory arguments to be passed:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">label</span></code> of type String.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">func</span></code> which is the function holding the equation to be applied.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">deriv</span></code> which is the function holding the calculation of the Jacobian.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">conns</span></code> which is a list of the connections required by the equation.
The order of the connections specified in the list is equal to the accessing
order in the equation and derivative calculation.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">params</span></code> (optional keyword argument) which is a dictionary holding
additional data required in the equation or derivative calculation.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ude</span> <span class="o">=</span> <span class="n">UserDefinedEquation</span><span class="p">(</span><span class="s1">&#39;my ude&#39;</span><span class="p">,</span> <span class="n">my_ude</span><span class="p">,</span> <span class="n">my_ude_deriv</span><span class="p">,</span> <span class="p">[</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">])</span>
<span class="n">nw</span><span class="o">.</span><span class="n">add_ude</span><span class="p">(</span><span class="n">ude</span><span class="p">)</span>
<span class="n">nw</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="s1">&#39;design&#39;</span><span class="p">)</span>
<span class="n">nw</span><span class="o">.</span><span class="n">print_results</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="more-examples">
<h2>More examples<a class="headerlink" href="#more-examples" title="Permalink to this heading">#</a></h2>
<p>After warm-up let’s create some more complex examples, e.g. the
square root of the temperature of the second stream should be equal to the
the logarithmic value of the pressure squared divided by the mass flow of the
first stream.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[0 = \sqrt{T_2} - \ln\left(\frac{p_1^2}{\dot{m}_1}\right)\]</div>
</div>
<p>In order to access the temperature within the iteration process, we need to
calculate it with the respective method. We can import it from the
<a class="reference internal" href="../api/tools.html#module-tespy.tools.fluid_properties" title="tespy.tools.fluid_properties"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tespy.tools.fluid_properties</span></code></a> module. Additionally, import numpy for
the logarithmic value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tespy.tools.fluid_properties</span> <span class="kn">import</span> <span class="n">T_mix_ph</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">my_ude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">T_mix_ph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_flow</span><span class="p">())</span> <span class="o">**</span> <span class="mf">0.5</span> <span class="o">-</span>
        <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">val_SI</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">val_SI</span><span class="p">)))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We use the absolute value inside of the logarithm expression to avoid
ValueErrors within the solution process as the mass flow is not restricted
to positive values.</p>
</div>
<p>The derivatives can be determined analytically for the pressure and mass flow
of the first stream easily. For the temperature value, you can use the
predefined fluid property functions <code class="code docutils literal notranslate"><span class="pre">dT_mix_dph</span></code> and <code class="code docutils literal notranslate"><span class="pre">dT_mix_pdh</span></code>
respectively to calculate the partial derivatives.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tespy.tools.fluid_properties</span> <span class="kn">import</span> <span class="n">dT_mix_dph</span>
<span class="kn">from</span> <span class="nn">tespy.tools.fluid_properties</span> <span class="kn">import</span> <span class="n">dT_mix_pdh</span>

<span class="k">def</span> <span class="nf">my_ude_deriv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">m</span><span class="o">.</span><span class="n">val_SI</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">val_SI</span>
    <span class="n">T</span> <span class="o">=</span> <span class="n">T_mix_ph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_flow</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">dT_mix_dph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_flow</span><span class="p">())</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">/</span> <span class="p">(</span><span class="n">T</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">dT_mix_pdh</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_flow</span><span class="p">())</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">/</span> <span class="p">(</span><span class="n">T</span> <span class="o">**</span> <span class="mf">0.5</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span>
</pre></div>
</div>
<p>But, what if the analytical derivative is not available? You can make use of
generic numerical derivatives using the inbuilt method <code class="code docutils literal notranslate"><span class="pre">numeric_deriv</span></code>.
The methods expects the variable <code class="code docutils literal notranslate"><span class="pre">'m'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'p'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'h'</span></code> or
<code class="code docutils literal notranslate"><span class="pre">'fluid'</span></code> (fluid composition) to derive the function to as well as the
respective connection index from the list of connections. The “lazy” solution
for the above derivatives would therefore look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_ude_deriv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">numeric_deriv</span><span class="p">(</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">numeric_deriv</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">numeric_deriv</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">numeric_deriv</span><span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span>
</pre></div>
</div>
<p>Obviously, the downside is a slower performance of the solver, as for every
<code class="code docutils literal notranslate"><span class="pre">numeric_deriv</span></code> call the function will be evaluated fully twice
(central finite difference).</p>
<p>Last, we want to consider an example using additional parameters in the
UserDefinedEquation, where <span class="math notranslate nohighlight">\(a\)</span> might be a factor between 0 and 1 and
<span class="math notranslate nohighlight">\(b\)</span> is the steam mass fraction (also, between 0 and 1). The difference of
the enthalpy between the two streams multiplied with factor a should be equal
to the difference of the enthalpy of stream two and the enthalpy of saturated
gas at the pressure of stream 1. The definition of the UserDefinedEquation
instance must therefore be changed as below.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[0 = a \cdot \left(h_2 - h_1 \right) -
\left(h_2 - h\left(p_1, x=b \right)\right)\]</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tespy.tools.fluid_properties</span> <span class="kn">import</span> <span class="n">h_mix_pQ</span>
<span class="kn">from</span> <span class="nn">tespy.tools.fluid_properties</span> <span class="kn">import</span> <span class="n">dh_mix_dpQ</span>

<span class="k">def</span> <span class="nf">my_ude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">a</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">h</span><span class="o">.</span><span class="n">val_SI</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">h</span><span class="o">.</span><span class="n">val_SI</span><span class="p">)</span> <span class="o">-</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">h</span><span class="o">.</span><span class="n">val_SI</span> <span class="o">-</span> <span class="n">h_mix_pQ</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_flow</span><span class="p">(),</span> <span class="n">b</span><span class="p">)))</span>

<span class="k">def</span> <span class="nf">my_ude_deriv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
    <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">dh_mix_dpQ</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_flow</span><span class="p">(),</span> <span class="n">b</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">a</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">conns</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">jacobian</span>

<span class="n">ude</span> <span class="o">=</span> <span class="n">UserDefinedEquation</span><span class="p">(</span>
    <span class="s1">&#39;my ude&#39;</span><span class="p">,</span> <span class="n">my_ude</span><span class="p">,</span> <span class="n">my_ude_deriv</span><span class="p">,</span> <span class="p">[</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
</pre></div>
</div>
<p>One more example (using a CharLine for datapoint interpolation) can be found in
the API documentation of class
<a class="reference internal" href="../api/tools.html#tespy.tools.helpers.UserDefinedEquation" title="tespy.tools.helpers.UserDefinedEquation"><code class="xref py py-class docutils literal notranslate"><span class="pre">tespy.tools.helpers.UserDefinedEquation</span></code></a>.</p>
</div>
<div class="section" id="document-your-equations">
<h2>Document your equations<a class="headerlink" href="#document-your-equations" title="Permalink to this heading">#</a></h2>
<p>For the automatic documentation of your models just pass the <code class="code docutils literal notranslate"><span class="pre">latex</span></code>
keyword on creation of the UserDefinedEquation instance. It should contain the
latex equation string. For example, the last equation from above:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">latex</span> <span class="o">=</span> <span class="p">(</span>
    <span class="sa">r</span><span class="s1">&#39;0 = a \cdot \left(h_2 - h_1 \right) - &#39;</span>
    <span class="sa">r</span><span class="s1">&#39;\left(h_2 - h\left(p_1, x=b \right)\right)&#39;</span><span class="p">)</span>

<span class="n">ude</span> <span class="o">=</span> <span class="n">UserDefinedEquation</span><span class="p">(</span>
    <span class="s1">&#39;my ude&#39;</span><span class="p">,</span> <span class="n">my_ude</span><span class="p">,</span> <span class="n">my_ude_deriv</span><span class="p">,</span> <span class="p">[</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
    <span class="n">latex</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;equation&#39;</span><span class="p">:</span> <span class="n">latex</span><span class="p">})</span>
</pre></div>
</div>
<p>The documentation will also create figures of <code class="code docutils literal notranslate"><span class="pre">CharLine</span></code> and
<code class="code docutils literal notranslate"><span class="pre">CharMap</span></code> objects provided. To add these, adjust the code like this.
Provide the <code class="code docutils literal notranslate"><span class="pre">CharLine</span></code> and <code class="code docutils literal notranslate"><span class="pre">CharMap</span></code> objects within a list.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ude</span> <span class="o">=</span> <span class="n">UserDefinedEquation</span><span class="p">(</span>
    <span class="s1">&#39;my ude&#39;</span><span class="p">,</span> <span class="n">my_ude</span><span class="p">,</span> <span class="n">my_ude_deriv</span><span class="p">,</span> <span class="p">[</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
    <span class="n">latex</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;equation&#39;</span><span class="p">:</span> <span class="n">latex</span><span class="p">,</span>
        <span class="s1">&#39;lines&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">charline1</span><span class="p">,</span> <span class="n">charline2</span><span class="p">],</span>
        <span class="s1">&#39;maps&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">map1</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../benchmarks.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Benchmarks</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="fluid_properties.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Fluid properties</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Francesco Witte
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Oct 02, 2022</div>
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">User defined equations</a><ul>
<li><a class="reference internal" href="#getting-started">Getting started</a></li>
<li><a class="reference internal" href="#more-examples">More examples</a></li>
<li><a class="reference internal" href="#document-your-equations">Document your equations</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>