<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Example Applications" href="../examples.html" /><link rel="prev" title="Exergy Analysis of a Ground-Coupled Heat Pump" href="heat_pump_exergy.html" />

    <meta name="generator" content="sphinx-5.1.1, furo 2022.06.21"/>
        <title>Thermal Power Plant Efficiency Optimization - TESPy 0.6.1 - Leidenfrost&#39;s Library documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">TESPy 0.6.1 - Leidenfrost's Library documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/./images/logo_tespy_mid.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/./images/logo_tespy_mid_darkmode.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">TESPy 0.6.1 - Leidenfrost's Library documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Thermal Engineering Systems in Python</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation and setup</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../basics.html">Modeling Basic Systems</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../basics/intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/heat_pump.html">Heat Pump</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/rankine_cycle.html">Rankine Cycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/gas_turbine.html">Gas Turbine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/district_heating.html">District Heating Network</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../tutorials.html">Advanced Tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="heat_pump_steps.html">Build a Heat Pump Stepwise</a></li>
<li class="toctree-l2"><a class="reference internal" href="starting_values.html">How to Generate Stable Starting Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="heat_pump_exergy.html">Exergy Analysis of a Ground-Coupled Heat Pump</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Thermal Power Plant Efficiency Optimization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Example Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../regular_meeting.html">TESPy community</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../modules.html">TESPy modules</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../modules/networks.html">Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/networks.html#network-reader">Network reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/components.html#component-groups-subystems">Component Groups: Subystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/connections.html">Connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/characteristics.html">Characteristics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/fluid_properties.html">Fluid properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modules/ude.html">User defined equations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api.html">API Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/components.html">tespy.components module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/connections.html">tespy.connections module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/data.html">tespy.data module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/networks.html">tespy.networks module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/tools.html">tespy.tools module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new.html">Whatâ€™s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zliterature.html">Literature</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced/exergy.html">Exergy analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contribute to TESPy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/what.html">What can I contribute?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/how.html">How can I contribute?</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="thermal-power-plant-efficiency-optimization">
<span id="tespy-tutorial-pygmo-optimization-label"></span><h1>Thermal Power Plant Efficiency Optimization<a class="headerlink" href="#thermal-power-plant-efficiency-optimization" title="Permalink to this heading">#</a></h1>
<div class="section" id="task">
<h2>Task<a class="headerlink" href="#task" title="Permalink to this heading">#</a></h2>
<p>Designing a power plant meets multiple different tasks, such as finding the
optimal fresh steam temperature and pressure to reduce exhaust steam water
content, or the optimization of extraction pressures to maximize cycle
efficiency and many more.</p>
<p>In case of a rather simple power plant topologies the task of finding
optimized values for e.g. extraction pressures is still manageable without any
optimization tool. As the topology becomes more complex and boundary
conditions come into play the usage of additional tools is recommended. The
following tutorial is intended to show the usage of PyGMO in combination with
TESPy to <strong>maximize the cycle efficiency of a power plant with two</strong>
<strong>extractions.</strong></p>
<p>You can download the code here:
<a class="reference download internal" download="" href="../_downloads/7b8a34a21600c149dcfd89d2e12632ee/optimization_example.py"><code class="xref download docutils literal notranslate"><span class="pre">optimization_example.py</span></code></a></p>
<div class="only-light figure align-center" id="id2">
<img alt="Topology of the power plant" src="../_images/flowsheet3.svg" /><p class="caption"><span class="caption-text">Figure: Topology of the power plant</span><a class="headerlink" href="#id2" title="Permalink to this image">#</a></p>
</div>
<div class="only-dark figure align-center" id="id3">
<img alt="Topology of the power plant" src="../_images/flowsheet_darkmode3.svg" /><p class="caption"><span class="caption-text">Figure: Topology of the power plant</span><a class="headerlink" href="#id3" title="Permalink to this image">#</a></p>
</div>
</div>
<div class="section" id="what-is-pygmo">
<h2>What is PyGMO?<a class="headerlink" href="#what-is-pygmo" title="Permalink to this heading">#</a></h2>
<p>PyGMO (Python Parallel Global Multiobjective Optimizer, <span id="id1">[<a class="reference internal" href="../zliterature.html#id15" title="Francesco Biscani and Dario Izzo. A parallel global multiobjective framework for optimization: pagmo. Journal of Open Source Software, 5(53):2338, 2020. doi:10.21105/joss.02338.">3</a>]</span>)
is a library that provides a large number of evolutionary optimization
algorithms. PyGMO can be used to solve constrained, unconstrained, single
objective and multi objective problems.</p>
<div class="section" id="evolutionary-algorithms">
<h3>Evolutionary Algorithms<a class="headerlink" href="#evolutionary-algorithms" title="Permalink to this heading">#</a></h3>
<p>Evolutionary Algorithms (EA) are optimization algorithms inspired by biological
evolution. In a given population the algorithm uses the so called fitness
function to determine the quality of the solutions to each individual (set of
decision variables) problem. The best possible solution of the population is
called champion. Via mutation, recombination and selection your population
evolves to find better solutions.</p>
<p>EA will never find an exact solution to your problem. They can only give an
approximation for the real optimum.</p>
</div>
<div class="section" id="install-pygmo">
<h3>Install PyGMO<a class="headerlink" href="#install-pygmo" title="Permalink to this heading">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
conda</label><div class="sd-tab-content docutils">
<p>With the conda package manager PyGMO is available for Linux, OSX and
Windows thanks to the infrastructure of
<a class="reference external" href="https://conda-forge.org/">conda-forge</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install -c conda-forge pygmo
</pre></div>
</div>
<p>Windows user can perform an installation from source as an alternative
to conda. For further information on this process we recommend the
<a class="reference external" href="https://esa.github.io/pygmo2/install.html#installation-from-source">PyGMO installation</a>
accordingly.</p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
pip (Linux only!)</label><div class="sd-tab-content docutils">
<p>On Linux you also have the option to use the
<a class="reference external" href="https://pip.pypa.io/en/stable/">pip</a> package installer:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install pygmo
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="creating-your-tespy-model">
<h2>Creating your TESPy-Model<a class="headerlink" href="#creating-your-tespy-model" title="Permalink to this heading">#</a></h2>
<p>To use the API, you need to define a class holding a TESPy network. The
initialization of the class should build the network and run an initial
simulation. Furthermore, you have to define methods</p>
<ul class="simple">
<li><p>to get component or connection parameters of the plant <code class="code docutils literal notranslate"><span class="pre">get_param</span></code>,</p></li>
<li><p>to run a new simulation for every new input from PyGMO <code class="code docutils literal notranslate"><span class="pre">solve_model</span></code>
and</p></li>
<li><p>to return the objective value <code class="code docutils literal notranslate"><span class="pre">get_objective</span></code>.</p></li>
</ul>
<p>First, we set up the class with the TESPy network.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Display source code for the PowerPlant class<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pygmo</span> <span class="k">as</span> <span class="nn">pg</span>

<span class="kn">from</span> <span class="nn">tespy.components</span> <span class="kn">import</span> <span class="n">CycleCloser</span>
<span class="kn">from</span> <span class="nn">tespy.components</span> <span class="kn">import</span> <span class="n">Sink</span>
<span class="kn">from</span> <span class="nn">tespy.components</span> <span class="kn">import</span> <span class="n">Source</span>
<span class="kn">from</span> <span class="nn">tespy.components</span> <span class="kn">import</span> <span class="n">Condenser</span>
<span class="kn">from</span> <span class="nn">tespy.components</span> <span class="kn">import</span> <span class="n">Desuperheater</span>
<span class="kn">from</span> <span class="nn">tespy.components</span> <span class="kn">import</span> <span class="n">HeatExchangerSimple</span>
<span class="kn">from</span> <span class="nn">tespy.components</span> <span class="kn">import</span> <span class="n">Merge</span>
<span class="kn">from</span> <span class="nn">tespy.components</span> <span class="kn">import</span> <span class="n">Splitter</span>
<span class="kn">from</span> <span class="nn">tespy.components</span> <span class="kn">import</span> <span class="n">Valve</span>
<span class="kn">from</span> <span class="nn">tespy.components</span> <span class="kn">import</span> <span class="n">Pump</span>
<span class="kn">from</span> <span class="nn">tespy.components</span> <span class="kn">import</span> <span class="n">Turbine</span>
<span class="kn">from</span> <span class="nn">tespy.connections</span> <span class="kn">import</span> <span class="n">Bus</span>
<span class="kn">from</span> <span class="nn">tespy.connections</span> <span class="kn">import</span> <span class="n">Connection</span>
<span class="kn">from</span> <span class="nn">tespy.networks</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="kn">from</span> <span class="nn">tespy.tools.optimization</span> <span class="kn">import</span> <span class="n">OptimizationProblem</span>


<span class="k">class</span> <span class="nc">SamplePlant</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Class template for TESPy model usage in optimization module.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nw</span> <span class="o">=</span> <span class="n">Network</span><span class="p">(</span><span class="n">fluids</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;water&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span>
            <span class="n">p_unit</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">T_unit</span><span class="o">=</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="n">h_unit</span><span class="o">=</span><span class="s2">&quot;kJ / kg&quot;</span><span class="p">,</span> <span class="n">iterinfo</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="c1"># components</span>
        <span class="c1"># main cycle</span>
        <span class="n">sg</span> <span class="o">=</span> <span class="n">HeatExchangerSimple</span><span class="p">(</span><span class="s2">&quot;steam generator&quot;</span><span class="p">)</span>
        <span class="n">cc</span> <span class="o">=</span> <span class="n">CycleCloser</span><span class="p">(</span><span class="s2">&quot;cycle closer&quot;</span><span class="p">)</span>
        <span class="n">hpt</span> <span class="o">=</span> <span class="n">Turbine</span><span class="p">(</span><span class="s2">&quot;high pressure turbine&quot;</span><span class="p">)</span>
        <span class="n">sp1</span> <span class="o">=</span> <span class="n">Splitter</span><span class="p">(</span><span class="s2">&quot;splitter 1&quot;</span><span class="p">,</span> <span class="n">num_out</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">mpt</span> <span class="o">=</span> <span class="n">Turbine</span><span class="p">(</span><span class="s2">&quot;mid pressure turbine&quot;</span><span class="p">)</span>
        <span class="n">sp2</span> <span class="o">=</span> <span class="n">Splitter</span><span class="p">(</span><span class="s2">&quot;splitter 2&quot;</span><span class="p">,</span> <span class="n">num_out</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">lpt</span> <span class="o">=</span> <span class="n">Turbine</span><span class="p">(</span><span class="s2">&quot;low pressure turbine&quot;</span><span class="p">)</span>
        <span class="n">con</span> <span class="o">=</span> <span class="n">Condenser</span><span class="p">(</span><span class="s2">&quot;condenser&quot;</span><span class="p">)</span>
        <span class="n">pu1</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">(</span><span class="s2">&quot;feed water pump&quot;</span><span class="p">)</span>
        <span class="n">fwh1</span> <span class="o">=</span> <span class="n">Condenser</span><span class="p">(</span><span class="s2">&quot;feed water preheater 1&quot;</span><span class="p">)</span>
        <span class="n">fwh2</span> <span class="o">=</span> <span class="n">Condenser</span><span class="p">(</span><span class="s2">&quot;feed water preheater 2&quot;</span><span class="p">)</span>
        <span class="n">dsh</span> <span class="o">=</span> <span class="n">Desuperheater</span><span class="p">(</span><span class="s2">&quot;desuperheater&quot;</span><span class="p">)</span>
        <span class="n">me2</span> <span class="o">=</span> <span class="n">Merge</span><span class="p">(</span><span class="s2">&quot;merge2&quot;</span><span class="p">,</span> <span class="n">num_in</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">pu2</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">(</span><span class="s2">&quot;feed water pump 2&quot;</span><span class="p">)</span>
        <span class="n">pu3</span> <span class="o">=</span> <span class="n">Pump</span><span class="p">(</span><span class="s2">&quot;feed water pump 3&quot;</span><span class="p">)</span>
        <span class="n">me</span> <span class="o">=</span> <span class="n">Merge</span><span class="p">(</span><span class="s2">&quot;merge&quot;</span><span class="p">,</span> <span class="n">num_in</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># cooling water</span>
        <span class="n">cwi</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="s2">&quot;cooling water source&quot;</span><span class="p">)</span>
        <span class="n">cwo</span> <span class="o">=</span> <span class="n">Sink</span><span class="p">(</span><span class="s2">&quot;cooling water sink&quot;</span><span class="p">)</span>

        <span class="c1"># connections</span>
        <span class="c1"># main cycle</span>
        <span class="n">c0</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">sg</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">cc</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
        <span class="n">c1</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">cc</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">hpt</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="n">c2</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">hpt</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">sp1</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="p">)</span>
        <span class="n">c3</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">sp1</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">mpt</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
        <span class="n">c4</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">mpt</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">sp2</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;4&quot;</span><span class="p">)</span>
        <span class="n">c5</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">sp2</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">lpt</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;5&quot;</span><span class="p">)</span>
        <span class="n">c6</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">lpt</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;6&quot;</span><span class="p">)</span>
        <span class="n">c7</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">pu1</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;7&quot;</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>
        <span class="n">c8</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">pu1</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">fwh1</span><span class="p">,</span> <span class="s2">&quot;in2&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;8&quot;</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>
        <span class="n">c9</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">fwh1</span><span class="p">,</span> <span class="s2">&quot;out2&quot;</span><span class="p">,</span> <span class="n">me</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;9&quot;</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>
        <span class="n">c10</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">me</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">fwh2</span><span class="p">,</span> <span class="s2">&quot;in2&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>
        <span class="n">c11</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">fwh2</span><span class="p">,</span> <span class="s2">&quot;out2&quot;</span><span class="p">,</span> <span class="n">dsh</span><span class="p">,</span> <span class="s2">&quot;in2&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;11&quot;</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>
        <span class="n">c12</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">dsh</span><span class="p">,</span> <span class="s2">&quot;out2&quot;</span><span class="p">,</span> <span class="n">me2</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;12&quot;</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>
        <span class="n">c13</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">me2</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">sg</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;13&quot;</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s2">&quot;l&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">add_conns</span><span class="p">(</span>
            <span class="n">c0</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">,</span> <span class="n">c4</span><span class="p">,</span> <span class="n">c5</span><span class="p">,</span> <span class="n">c6</span><span class="p">,</span> <span class="n">c7</span><span class="p">,</span> <span class="n">c8</span><span class="p">,</span> <span class="n">c9</span><span class="p">,</span> <span class="n">c10</span><span class="p">,</span> <span class="n">c11</span><span class="p">,</span> <span class="n">c12</span><span class="p">,</span> <span class="n">c13</span>
        <span class="p">)</span>

        <span class="c1"># preheating</span>
        <span class="n">c21</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">sp1</span><span class="p">,</span> <span class="s2">&quot;out2&quot;</span><span class="p">,</span> <span class="n">dsh</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;21&quot;</span><span class="p">)</span>
        <span class="n">c22</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">dsh</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">fwh2</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;22&quot;</span><span class="p">)</span>
        <span class="n">c23</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">fwh2</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">pu2</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;23&quot;</span><span class="p">)</span>
        <span class="n">c24</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">pu2</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">me2</span><span class="p">,</span> <span class="s2">&quot;in2&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;24&quot;</span><span class="p">)</span>

        <span class="n">c31</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">sp2</span><span class="p">,</span> <span class="s2">&quot;out2&quot;</span><span class="p">,</span> <span class="n">fwh1</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;31&quot;</span><span class="p">)</span>
        <span class="n">c32</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">fwh1</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">pu3</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;32&quot;</span><span class="p">)</span>
        <span class="n">c33</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">pu3</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">me</span><span class="p">,</span> <span class="s2">&quot;in2&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;33&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">add_conns</span><span class="p">(</span>
            <span class="n">c21</span><span class="p">,</span> <span class="n">c22</span><span class="p">,</span> <span class="n">c23</span><span class="p">,</span> <span class="n">c24</span><span class="p">,</span>
            <span class="n">c31</span><span class="p">,</span> <span class="n">c32</span><span class="p">,</span> <span class="n">c33</span>
        <span class="p">)</span>

        <span class="c1"># cooling water</span>
        <span class="n">c41</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">cwi</span><span class="p">,</span> <span class="s2">&quot;out1&quot;</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="s2">&quot;in2&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;41&quot;</span><span class="p">)</span>
        <span class="n">c42</span> <span class="o">=</span> <span class="n">Connection</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="s2">&quot;out2&quot;</span><span class="p">,</span> <span class="n">cwo</span><span class="p">,</span> <span class="s2">&quot;in1&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;42&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">add_conns</span><span class="p">(</span><span class="n">c41</span><span class="p">,</span> <span class="n">c42</span><span class="p">)</span>

        <span class="c1"># busses</span>
        <span class="c1"># power bus</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">power</span> <span class="o">=</span> <span class="n">Bus</span><span class="p">(</span><span class="s2">&quot;power&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">power</span><span class="o">.</span><span class="n">add_comps</span><span class="p">(</span>
            <span class="p">{</span><span class="s2">&quot;comp&quot;</span><span class="p">:</span> <span class="n">hpt</span><span class="p">,</span> <span class="s2">&quot;char&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;comp&quot;</span><span class="p">:</span> <span class="n">mpt</span><span class="p">,</span> <span class="s2">&quot;char&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;comp&quot;</span><span class="p">:</span> <span class="n">lpt</span><span class="p">,</span> <span class="s2">&quot;char&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;comp&quot;</span><span class="p">:</span> <span class="n">pu1</span><span class="p">,</span> <span class="s2">&quot;char&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;comp&quot;</span><span class="p">:</span> <span class="n">pu2</span><span class="p">,</span> <span class="s2">&quot;char&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;comp&quot;</span><span class="p">:</span> <span class="n">pu3</span><span class="p">,</span> <span class="s2">&quot;char&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">}</span>
        <span class="p">)</span>

        <span class="c1"># heating bus</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">heat</span> <span class="o">=</span> <span class="n">Bus</span><span class="p">(</span><span class="s2">&quot;heat&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">heat</span><span class="o">.</span><span class="n">add_comps</span><span class="p">({</span><span class="s2">&quot;comp&quot;</span><span class="p">:</span> <span class="n">sg</span><span class="p">,</span> <span class="s2">&quot;char&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">add_busses</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">power</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">heat</span><span class="p">)</span>

        <span class="c1"># parametrization</span>
        <span class="c1"># components</span>
        <span class="n">hpt</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">eta_s</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
        <span class="n">mpt</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">eta_s</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
        <span class="n">lpt</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">eta_s</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>

        <span class="n">pu1</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">eta_s</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
        <span class="n">pu2</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">eta_s</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
        <span class="n">pu3</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">eta_s</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

        <span class="n">sg</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">pr</span><span class="o">=</span><span class="mf">0.92</span><span class="p">)</span>

        <span class="n">con</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">pr1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pr2</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">ttd_u</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">fwh1</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">pr1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pr2</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">ttd_u</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">fwh2</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">pr1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pr2</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">ttd_u</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">dsh</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">pr1</span><span class="o">=</span><span class="mf">0.99</span><span class="p">,</span> <span class="n">pr2</span><span class="o">=</span><span class="mf">0.99</span><span class="p">)</span>

        <span class="n">c1</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">m</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">T</span><span class="o">=</span><span class="mi">650</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">fluid</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;water&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">c2</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">c4</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

        <span class="n">c41</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">fluid</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;water&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">c42</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="mi">28</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="s2">&quot;design&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stable</span> <span class="o">=</span> <span class="s2">&quot;_stable&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solved</span> <span class="o">=</span> <span class="kc">True</span>

</pre></div>
</div>
</div>
</details><p>Next, we add the methods <code class="code docutils literal notranslate"><span class="pre">get_param</span></code>, <code class="code docutils literal notranslate"><span class="pre">solve_model</span></code> and
<code class="code docutils literal notranslate"><span class="pre">get_objective</span></code>. On top of that, we add a setter working in a similar
way as the getter. The objective is to maximize thermal efficiency as defined
in the equation below.</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\eta_\mathrm{th}=\frac{|\sum P|}{\dot{Q}_{sg}}\]</div>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>The sense of optimization is always minimization, therefore you need to
define your objective functions in the appropriate way: We return the
reciprocal value of the efficiency for this reason.</p>
</div>
<p>We also have to make sure, only the results of physically feasible solutions
are returned. In case we have infeasible solutions, we can simply return
<code class="code docutils literal notranslate"><span class="pre">np.nan</span></code>. An infeasible solution is obtained in case the power of a
turbine is positive, the power of a pump is negative or the heat exchanged
in any of the preheaters is positive. We also check, if the calculation does
converge.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Display source code for the class methods<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
    <span class="k">def</span> <span class="nf">get_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the value of a parameter in the network&quot;s unit system.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        obj : str</span>
<span class="sd">            Object to get parameter for (Components/Connections).</span>

<span class="sd">        label : str</span>
<span class="sd">            Label of the object in the TESPy model.</span>

<span class="sd">        parameter : str</span>
<span class="sd">            Name of the parameter of the object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        value : float</span>
<span class="sd">            Value of the parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="s2">&quot;Components&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">get_comp</span><span class="p">(</span><span class="n">label</span><span class="p">)</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span><span class="o">.</span><span class="n">val</span>
        <span class="k">elif</span> <span class="n">obj</span> <span class="o">==</span> <span class="s2">&quot;Connections&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">get_conn</span><span class="p">(</span><span class="n">label</span><span class="p">)</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span><span class="o">.</span><span class="n">val</span>

    <span class="k">def</span> <span class="nf">set_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="k">if</span> <span class="s2">&quot;Connections&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">c</span><span class="p">,</span> <span class="n">params</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;Connections&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">get_conn</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;Components&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">c</span><span class="p">,</span> <span class="n">params</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;Components&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">get_comp</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">set_attr</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">solve_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Solve the TESPy model given the the input parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">solved</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="s2">&quot;design&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">res</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mf">1e-3</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">lin_dep</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="s2">&quot;design&quot;</span><span class="p">,</span> <span class="n">init_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">init_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stable</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># might need more checks here!</span>
                <span class="k">if</span> <span class="p">(</span>
                        <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s2">&quot;Condenser&quot;</span><span class="p">][</span><span class="s2">&quot;Q&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s2">&quot;Desuperheater&quot;</span><span class="p">][</span><span class="s2">&quot;Q&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s2">&quot;Turbine&quot;</span><span class="p">][</span><span class="s2">&quot;P&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s2">&quot;Pump&quot;</span><span class="p">][</span><span class="s2">&quot;P&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">solved</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">solved</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">lin_dep</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="s2">&quot;design&quot;</span><span class="p">,</span> <span class="n">init_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">init_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stable</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the current objective function evaluation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        objective : str</span>
<span class="sd">            Name of the objective function.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        objective_value : float</span>
<span class="sd">            Evaluation of the objective function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">solved</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">objective</span> <span class="o">==</span> <span class="s2">&quot;efficiency&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">busses</span><span class="p">[</span><span class="s2">&quot;power&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="o">.</span><span class="n">val</span> <span class="o">/</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">nw</span><span class="o">.</span><span class="n">busses</span><span class="p">[</span><span class="s2">&quot;heat&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">P</span><span class="o">.</span><span class="n">val</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Objective </span><span class="si">{</span><span class="n">objective</span><span class="si">}</span><span class="s2"> not implemented.&quot;</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

</pre></div>
</div>
</div>
</details><p>After this, we import the
<a class="reference internal" href="../api/tools.html#tespy.tools.optimization.OptimizationProblem" title="tespy.tools.optimization.OptimizationProblem"><code class="xref py py-class docutils literal notranslate"><span class="pre">tespy.tools.optimization.OptimizationProblem</span></code></a> class and create an
instance of our self defined class, which we pass to an instance of the
OptimizationProblem class. We also have to pass</p>
<ul class="simple">
<li><p>the variables to optimize,</p></li>
<li><p>the constraints to consider and</p></li>
<li><p>the objective function name (you could define multiple in the
<code class="code docutils literal notranslate"><span class="pre">get_objective</span></code> method if you wanted).</p></li>
</ul>
<p>We set one inequality constraint, namely that the pressure of the first
extraction has to be higher than the pressure at the second one:</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[p_{e,1} &gt; p_{e,2}\]</div>
</div>
<p>To do this, we can set a lower limit for the pressure at connection 2 and
reference the pressure at connection 4 as seen in the code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
<span class="n">plant</span> <span class="o">=</span> <span class="n">SamplePlant</span><span class="p">()</span>
<span class="n">plant</span><span class="o">.</span><span class="n">get_objective</span><span class="p">(</span><span class="s2">&quot;efficiency&quot;</span><span class="p">)</span>
<span class="n">variables</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;Connections&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">}},</span>
        <span class="s2">&quot;4&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">}}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">constraints</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;lower limits&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;Connections&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="s2">&quot;ref1&quot;</span><span class="p">}</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s2">&quot;ref1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Connections&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">optimize</span> <span class="o">=</span> <span class="n">OptimizationProblem</span><span class="p">(</span>
    <span class="n">plant</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">constraints</span><span class="p">,</span> <span class="n">objective</span><span class="o">=</span><span class="s2">&quot;efficiency&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Before we can run the optimization, we only need to select an appropriate
algorithm. After that we can start the optimization run. For more information
on algorithms available in the PyGMO framework and their individual
specifications please refer to the respective section in their online
documentation:
<a class="reference external" href="https://esa.github.io/pagmo2/overview.html#list-of-algorithms">list of algorithms</a>.
Create an initial population and then specify the number of individuals, the
number of generations and call the
<a class="reference internal" href="../api/tools.html#tespy.tools.optimization.OptimizationProblem.run" title="tespy.tools.optimization.OptimizationProblem.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">tespy.tools.optimization.OptimizationProblem.run()</span></code></a> method of your
<code class="code docutils literal notranslate"><span class="pre">OptimizationProblem</span></code> instance passing the algorithm, the population and
the number of individuals and generations.</p>
</div>
<div class="section" id="run-pygmo-optimization">
<h2>Run PyGMO-Optimization<a class="headerlink" href="#run-pygmo-optimization" title="Permalink to this heading">#</a></h2>
<p>The following code then simply runs the PyGMO optimization.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">num_ind</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">num_gen</span> <span class="o">=</span> <span class="mi">100</span>

<span class="c1"># for algorithm selection and parametrization please consider the pygmo</span>
<span class="c1"># documentation! The number of generations indicated in the algorithm is</span>
<span class="c1"># the number of evolutions we undertake within each generation defined in</span>
<span class="c1"># num_gen</span>
<span class="n">algo</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">algorithm</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">ihs</span><span class="p">(</span><span class="n">gen</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">))</span>
<span class="c1"># create starting population</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">pg</span><span class="o">.</span><span class="n">population</span><span class="p">(</span><span class="n">pg</span><span class="o">.</span><span class="n">problem</span><span class="p">(</span><span class="n">optimize</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="n">num_ind</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

<span class="n">optimize</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">algo</span><span class="p">,</span> <span class="n">pop</span><span class="p">,</span> <span class="n">num_ind</span><span class="p">,</span> <span class="n">num_gen</span><span class="p">)</span>
</pre></div>
</div>
<p>In our run, we got:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Efficiency: <span class="m">44</span>.82 %
Extraction <span class="m">1</span>: <span class="m">25</span>.4756 bar
Extraction <span class="m">2</span>: <span class="m">2</span>.5428 bar
</pre></div>
</div>
<div class="only-light figure align-center" id="id4">
<img alt="Scatter plot for all individuals during the optimization" src="../_images/pygmo_optimization.svg" /><p class="caption"><span class="caption-text">Figure: Scatter plot for all individuals during the optimization</span><a class="headerlink" href="#id4" title="Permalink to this image">#</a></p>
</div>
<div class="only-dark figure align-center" id="id5">
<img alt="Scatter plot for all individuals during the optimization" src="../_images/pygmo_optimization_darkmode.svg" /><p class="caption"><span class="caption-text">Figure: Scatter plot for all individuals during the optimization</span><a class="headerlink" href="#id5" title="Permalink to this image">#</a></p>
</div>
<p>Finally, you can access the individuals in each of the generations and you
can have a look at you population. For more info on the population API please
visit the pygmo documentation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># To access the results</span>
<span class="nb">print</span><span class="p">(</span><span class="n">optimize</span><span class="o">.</span><span class="n">individuals</span><span class="p">)</span>
<span class="c1"># check pygmo documentation to see, what you can get from the population</span>
<span class="n">pop</span>
<span class="c1"># plot the results</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>


<span class="c1"># make text reasonably sized</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;font&quot;</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">18</span><span class="p">})</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="n">filter_valid_constraint</span> <span class="o">=</span> <span class="n">optimize</span><span class="o">.</span><span class="n">individuals</span><span class="p">[</span><span class="s2">&quot;valid&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
<span class="n">filter_valid_result</span> <span class="o">=</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">optimize</span><span class="o">.</span><span class="n">individuals</span><span class="p">[</span><span class="s2">&quot;efficiency&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">optimize</span><span class="o">.</span><span class="n">individuals</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">filter_valid_constraint</span> <span class="o">&amp;</span> <span class="n">filter_valid_result</span><span class="p">]</span>

<span class="n">sc</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Connections-2-p&quot;</span><span class="p">],</span>
    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;Connections-4-p&quot;</span><span class="p">],</span>
    <span class="n">c</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;efficiency&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
    <span class="n">s</span><span class="o">=</span><span class="mi">100</span>
<span class="p">)</span>
<span class="n">cbar</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">sc</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s2">&quot;Thermal efficiency in %&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_axisbelow</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Pressure at connection 2 in bar&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Pressure at connection 4 in bar&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s2">&quot;pygmo_optimization.svg&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;efficiency&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;efficiency&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()])</span>
</pre></div>
</div>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../examples.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Example Applications</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="heat_pump_exergy.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Exergy Analysis of a Ground-Coupled Heat Pump</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Francesco Witte
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on Oct 02, 2022</div>
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Thermal Power Plant Efficiency Optimization</a><ul>
<li><a class="reference internal" href="#task">Task</a></li>
<li><a class="reference internal" href="#what-is-pygmo">What is PyGMO?</a><ul>
<li><a class="reference internal" href="#evolutionary-algorithms">Evolutionary Algorithms</a></li>
<li><a class="reference internal" href="#install-pygmo">Install PyGMO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-your-tespy-model">Creating your TESPy-Model</a></li>
<li><a class="reference internal" href="#run-pygmo-optimization">Run PyGMO-Optimization</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>