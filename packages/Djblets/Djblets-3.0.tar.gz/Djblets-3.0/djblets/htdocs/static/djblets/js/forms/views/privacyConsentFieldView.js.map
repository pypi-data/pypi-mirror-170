{"version":3,"file":"privacyConsentFieldView.js","names":["Djblets","Forms","PrivacyConsentFieldView","Backbone","View","extend","events","initialize","options","$choices","$","$allowChoice","find","$blockChoice","_$allowInput","children","_$allowLabel","_$blockInput","_$blockLabel","render","_onConsentChanged","allowed","is","blocked","$el","toggleClass","text","allowedText","allowText","blockedText","blockText"],"sources":["../../../../../../static/djblets/js/forms/views/privacyConsentFieldView.es6.js"],"sourcesContent":["/**\n * Manages the display of a consent field.\n *\n * This helps style consent fields to better represent the current choice\n * made, altering labels and colors. It provides no functionality beyond\n * enhancing the look of the field beyond what can be done in CSS.\n */\nDjblets.Forms.PrivacyConsentFieldView = Backbone.View.extend({\n    events: {\n        'change input': '_onConsentChanged',\n    },\n\n    /**\n     * Initialize the view.\n     *\n     * Args:\n     *     options (object):\n     *         Options for the view.\n     *\n     * Option Args:\n     *     allowText (string):\n     *         Text to use for the allow action.\n     *\n     *     allowedText (string):\n     *         Text to use when the allow action is selected.\n     *\n     *     blockText (string):\n     *         Text to use for the block action.\n     *\n     *     blockedText (string):\n     *         Text to use when the block action is selected.\n     */\n    initialize(options) {\n        this.options = options;\n\n        const $choices = this.$('.privacy-consent-field-choices');\n        const $allowChoice =\n            $choices.find('.privacy-consent-field-choice-allow');\n        const $blockChoice =\n            $choices.find('.privacy-consent-field-choice-block');\n\n        this._$allowInput = $allowChoice.children('input');\n        this._$allowLabel = $allowChoice.children('label');\n        this._$blockInput = $blockChoice.children('input');\n        this._$blockLabel = $blockChoice.children('label');\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     Djblets.Forms.PrivacyConsentFieldView:\n     *     This view, for chaining.\n     */\n    render() {\n        this._onConsentChanged();\n\n        return this;\n    },\n\n    /**\n     * Handler for when the consent choice has changed.\n     *\n     * This will toggle classes on the field's element to reflect the\n     * current consent choice, and update the labels.\n     */\n    _onConsentChanged() {\n        const allowed = this._$allowInput.is(':checked');\n        const blocked = this._$blockInput.is(':checked');\n\n        this.$el.toggleClass('privacy-consent-field-allow', allowed);\n        this.$el.toggleClass('privacy-consent-field-block', blocked);\n\n        this._$allowLabel.text(allowed\n                               ? this.options.allowedText\n                               : this.options.allowText);\n        this._$blockLabel.text(blocked\n                               ? this.options.blockedText\n                               : this.options.blockText);\n    },\n});\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,OAAO,CAACC,KAAR,CAAcC,uBAAd,GAAwCC,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB;EACzDC,MAAM,EAAE;IACJ,gBAAgB;EADZ,CADiD;;EAKzD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,UAAU,CAACC,OAAD,EAAU;IAChB,KAAKA,OAAL,GAAeA,OAAf;IAEA,MAAMC,QAAQ,GAAG,KAAKC,CAAL,CAAO,gCAAP,CAAjB;IACA,MAAMC,YAAY,GACdF,QAAQ,CAACG,IAAT,CAAc,qCAAd,CADJ;IAEA,MAAMC,YAAY,GACdJ,QAAQ,CAACG,IAAT,CAAc,qCAAd,CADJ;IAGA,KAAKE,YAAL,GAAoBH,YAAY,CAACI,QAAb,CAAsB,OAAtB,CAApB;IACA,KAAKC,YAAL,GAAoBL,YAAY,CAACI,QAAb,CAAsB,OAAtB,CAApB;IACA,KAAKE,YAAL,GAAoBJ,YAAY,CAACE,QAAb,CAAsB,OAAtB,CAApB;IACA,KAAKG,YAAL,GAAoBL,YAAY,CAACE,QAAb,CAAsB,OAAtB,CAApB;EACH,CAtCwD;;EAwCzD;AACJ;AACA;AACA;AACA;AACA;AACA;EACII,MAAM,GAAG;IACL,KAAKC,iBAAL;;IAEA,OAAO,IAAP;EACH,CAnDwD;;EAqDzD;AACJ;AACA;AACA;AACA;AACA;EACIA,iBAAiB,GAAG;IAChB,MAAMC,OAAO,GAAG,KAAKP,YAAL,CAAkBQ,EAAlB,CAAqB,UAArB,CAAhB;;IACA,MAAMC,OAAO,GAAG,KAAKN,YAAL,CAAkBK,EAAlB,CAAqB,UAArB,CAAhB;;IAEA,KAAKE,GAAL,CAASC,WAAT,CAAqB,6BAArB,EAAoDJ,OAApD;IACA,KAAKG,GAAL,CAASC,WAAT,CAAqB,6BAArB,EAAoDF,OAApD;;IAEA,KAAKP,YAAL,CAAkBU,IAAlB,CAAuBL,OAAO,GACL,KAAKb,OAAL,CAAamB,WADR,GAEL,KAAKnB,OAAL,CAAaoB,SAFtC;;IAGA,KAAKV,YAAL,CAAkBQ,IAAlB,CAAuBH,OAAO,GACL,KAAKf,OAAL,CAAaqB,WADR,GAEL,KAAKrB,OAAL,CAAasB,SAFtC;EAGH;;AAxEwD,CAArB,CAAxC"}