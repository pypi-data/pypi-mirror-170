{"version":3,"file":"conditionSetViewTests.js","names":["suite","makeValueField","html","model","className","data","fieldHTML","view","setupConditionSetView","conditionsData","conditionsTemplate","_","template","join","conditionSetView","Djblets","Forms","ConditionSetView","el","$","ConditionSet","fieldName","choicesData","id","name","valueField","operators","useValue","parse","render","describe","it","choiceID","operatorID","value","valid","$rows","expect","length","toBe","$lastID","val","$row","eq","$choice","find","children","$operator","$value","$input","parent","prop","attr","error","$error","spyOn","and","callThrough","click","addNewCondition","toHaveBeenCalled","conditions","condition","at","destroy","trigger","get","conditionSet","$valueWrapper","beforeEach","set","choices","choice"],"sources":["../../../../../../../static/djblets/js/forms/views/tests/conditionSetViewTests.es6.js"],"sourcesContent":["suite('djblets/forms/views/ConditionValueFormFieldView', function() {\n    function makeValueField(html) {\n        return {\n            model: {\n                className: 'Djblets.Forms.ConditionValueField',\n                data: {\n                    fieldHTML: html\n                }\n            },\n            view: {\n                className: 'Djblets.Forms.ConditionValueFormFieldView'\n            }\n        };\n    }\n\n    function setupConditionSetView(conditionsData) {\n        const conditionsTemplate = _.template([\n            '<div class=\"conditions-field\">\\n',\n            ' <input type=\"hidden\" name=\"my_conditions_last_id\" />\\n',\n            ' <div class=\"conditions-field-mode\"></div>\\n',\n            ' <div class=\"conditions-field-rows-container\">\\n',\n            '  <ul class=\"conditions-field-rows\"></ul>\\n',\n            '  <a href=\"#\" class=\"conditions-field-add-condition\"></a>\\n',\n            ' </div>\\n',\n            '</div>'\n        ].join(''));\n\n        const conditionSetView = new Djblets.Forms.ConditionSetView({\n            el: $(conditionsTemplate()),\n            model: new Djblets.Forms.ConditionSet({\n                fieldName: 'my_conditions',\n                choicesData: [\n                    {\n                        id: 'my-choice-1',\n                        name: 'My Choice 1',\n                        valueField: makeValueField('<input type=\"text\" />'),\n                        operators: [\n                            {\n                                id: 'my-op-1',\n                                name: 'My Op 1',\n                                useValue: true\n                            },\n                            {\n                                id: 'my-op-2',\n                                name: 'My Op 2',\n                                useValue: true,\n                                valueField: makeValueField('<input type=\"number\" />')\n                            }\n                        ]\n                    },\n                    {\n                        id: 'my-choice-2',\n                        name: 'My Choice 2',\n                        valueField: makeValueField('<input type=\"email\" />'),\n                        operators: [\n                            {\n                                id: 'my-op-3',\n                                name: 'My Op 3',\n                                useValue: true\n                            },\n                            {\n                                id: 'my-op-4',\n                                name: 'My Op 4',\n                                useValue: true\n                            }\n                        ]\n                    }\n                ],\n                conditionsData: conditionsData\n            }, {\n                parse: true\n            })\n        });\n\n        conditionSetView.render();\n\n        return conditionSetView;\n    }\n\n    describe('Rendering', function() {\n        it('Loaded rows', function() {\n            const conditionSetView = setupConditionSetView([\n                {\n                    choiceID: 'my-choice-1',\n                    operatorID: 'my-op-1',\n                    value: '<test>',\n                    valid: true\n                },\n                {\n                    choiceID: 'my-choice-2',\n                    operatorID: 'my-op-4',\n                    value: 42,\n                    valid: true\n                }\n            ]);\n\n            const $rows = conditionSetView.$('.conditions-field-row');\n            expect($rows.length).toBe(2);\n\n            const $lastID =\n                conditionSetView.$('input[name=my_conditions_last_id]');\n            expect($lastID.val()).toBe('1');\n\n            /* Check the first row. */\n            let $row = $rows.eq(0);\n            let $choice = $row.find('.conditions-field-choice');\n            expect($choice.html()).toBe([\n                '<select name=\"my_conditions_choice[0]\">',\n                '<option value=\"my-choice-1\">My Choice 1</option>',\n                '<option value=\"my-choice-2\">My Choice 2</option>',\n                '</select>'\n            ].join(''));\n            expect($choice.children('select').val()).toBe('my-choice-1');\n\n            let $operator = $row.find('.conditions-field-operator');\n            expect($operator.html()).toBe([\n                '<select name=\"my_conditions_operator[0]\">',\n                '<option value=\"my-op-1\">My Op 1</option>',\n                '<option value=\"my-op-2\">My Op 2</option>',\n                '</select>'\n            ].join(''));\n            expect($operator.children('select').val()).toBe('my-op-1');\n\n            let $value = $row.find('.conditions-field-value');\n            let $input = $value.find('input');\n            expect($input.parent().prop('tagName')).toBe('SPAN');\n            expect($input.attr('type')).toBe('text');\n            expect($input.attr('name')).toBe('my_conditions_value[0]');\n            expect($input.val()).toBe('<test>');\n\n            /* Check the second row. */\n            $row = $rows.eq(1);\n            $choice = $row.find('.conditions-field-choice');\n            expect($choice.html()).toBe([\n                '<select name=\"my_conditions_choice[1]\">',\n                '<option value=\"my-choice-1\">My Choice 1</option>',\n                '<option value=\"my-choice-2\">My Choice 2</option>',\n                '</select>'\n            ].join(''));\n            expect($choice.children('select').val()).toBe('my-choice-2');\n\n            $operator = $row.find('.conditions-field-operator');\n            expect($operator.html()).toBe([\n                '<select name=\"my_conditions_operator[1]\">',\n                '<option value=\"my-op-3\">My Op 3</option>',\n                '<option value=\"my-op-4\">My Op 4</option>',\n                '</select>'\n            ].join(''));\n            expect($operator.children('select').val()).toBe('my-op-4');\n\n            $value = $row.find('.conditions-field-value');\n            $input = $value.find('input');\n            expect($input.parent().prop('tagName')).toBe('SPAN');\n            expect($input.attr('type')).toBe('email');\n            expect($input.attr('name')).toBe('my_conditions_value[1]');\n            expect($input.val()).toBe('42');\n        });\n\n        it('Loaded rows with errors', function() {\n            const conditionSetView = setupConditionSetView([\n                {\n                    choiceID: 'my-choice-1',\n                    operatorID: 'my-op-1',\n                    value: '<test>',\n                    error: 'This is an <error>.',\n                    valid: true\n                }\n            ]);\n\n            const $rows = conditionSetView.$('.conditions-field-row');\n            expect($rows.length).toBe(1);\n\n            const $lastID =\n                conditionSetView.$('input[name=my_conditions_last_id]');\n            expect($lastID.val()).toBe('0');\n\n            const $row = $rows.eq(0);\n            const $error = $row.find('.error-list li');\n            expect($error.length).toBe(1);\n            expect($error.html()).toBe('This is an &lt;error&gt;.');\n        });\n    });\n\n    describe('Actions', function() {\n        it('Add a new condition', function() {\n            const conditionSetView = setupConditionSetView();\n\n            let $rows = conditionSetView.$('.conditions-field-row');\n            expect($rows.length).toBe(0);\n\n            const $lastID =\n                conditionSetView.$('input[name=my_conditions_last_id]');\n            expect($lastID.val()).toBe('');\n\n            spyOn(conditionSetView.model, 'addNewCondition').and.callThrough();\n            conditionSetView.$('.conditions-field-add-condition').click();\n            expect(conditionSetView.model.addNewCondition).toHaveBeenCalled();\n\n            $rows = conditionSetView.$('.conditions-field-row');\n            expect($rows.length).toBe(1);\n            expect($lastID.val()).toBe('0');\n\n            const $row = $rows.eq(0);\n            const $choice = $row.find('.conditions-field-choice');\n            expect($choice.html()).toBe([\n                '<select name=\"my_conditions_choice[0]\">',\n                '<option value=\"my-choice-1\">My Choice 1</option>',\n                '<option value=\"my-choice-2\">My Choice 2</option>',\n                '</select>'\n            ].join(''));\n            expect($choice.children('select').val()).toBe('my-choice-1');\n\n            const $operator = $row.find('.conditions-field-operator');\n            expect($operator.html()).toBe([\n                '<select name=\"my_conditions_operator[0]\">',\n                '<option value=\"my-op-1\">My Op 1</option>',\n                '<option value=\"my-op-2\">My Op 2</option>',\n                '</select>'\n            ].join(''));\n            expect($operator.children('select').val()).toBe('my-op-1');\n\n            const $value = $row.find('.conditions-field-value');\n            const $input = $value.find('input');\n            expect($input.parent().prop('tagName')).toBe('SPAN');\n            expect($input.attr('type')).toBe('text');\n            expect($input.attr('name')).toBe('my_conditions_value[0]');\n            expect($input.val()).toBe('');\n        });\n\n        it('Delete a condition', function() {\n            const conditionSetView = setupConditionSetView([\n                {\n                    choiceID: 'my-choice-1',\n                    operatorID: 'my-op-1',\n                    value: '<test>',\n                    valid: true\n                }\n            ]);\n\n            let $rows = conditionSetView.$('.conditions-field-row');\n            expect(conditionSetView.model.conditions.length).toBe(1);\n            expect($rows.length).toBe(1);\n\n            const $lastID =\n                conditionSetView.$('input[name=my_conditions_last_id]');\n            expect($lastID.val()).toBe('0');\n\n            const condition = conditionSetView.model.conditions.at(0);\n\n            spyOn(condition, 'destroy').and.callThrough();\n            $rows.eq(0).find('.conditions-field-row-delete').click();\n            expect(condition.destroy).toHaveBeenCalled();\n\n            $rows = conditionSetView.$('.conditions-field-row');\n            expect(conditionSetView.model.conditions.length).toBe(0);\n            expect($rows.length).toBe(0);\n\n            /*\n             * The last ID remains the same during deletions. It's not a row\n             * counter.\n             */\n            expect($lastID.val()).toBe('0');\n        });\n\n        it('Changing a choice updates model', function() {\n            const conditionSetView = setupConditionSetView([\n                {\n                    choiceID: 'my-choice-1',\n                    operatorID: 'my-op-1',\n                    value: '<test>',\n                    valid: true\n                }\n            ]);\n\n            const $rows = conditionSetView.$('.conditions-field-row');\n            const condition = conditionSetView.model.conditions.at(0);\n\n            $rows.eq(0).find('.conditions-field-choice select')\n                .val('my-choice-2')\n                .trigger('change');\n\n            expect(condition.get('choice').id).toBe('my-choice-2');\n        });\n\n        it('Changing an operator updates model', function() {\n            const conditionSetView = setupConditionSetView([\n                {\n                    choiceID: 'my-choice-1',\n                    operatorID: 'my-op-1',\n                    value: '<test>',\n                    valid: true\n                }\n            ]);\n\n            const $rows = conditionSetView.$('.conditions-field-row');\n            const condition = conditionSetView.model.conditions.at(0);\n\n            $rows.eq(0).find('.conditions-field-operator select')\n                .val('my-op-2')\n                .trigger('change');\n\n            expect(condition.get('operator').id).toBe('my-op-2');\n        });\n    });\n\n    describe('Model events', function() {\n        let conditionSetView,\n            conditionSet,\n            condition,\n            $row,\n            $choice,\n            $operator,\n            $valueWrapper;\n\n        beforeEach(function() {\n            conditionSetView = setupConditionSetView([\n                {\n                    choiceID: 'my-choice-1',\n                    operatorID: 'my-op-1',\n                    value: '<test>',\n                    valid: true\n                }\n            ]);\n\n            conditionSet = conditionSetView.model;\n\n            condition = conditionSet.conditions.at(0);\n            $row = conditionSetView.$('.conditions-field-row').eq(0);\n            $choice = $row.find('.conditions-field-choice select');\n            $operator = $row.find('.conditions-field-operator select');\n            $valueWrapper = $row.find('.conditions-field-value');\n\n            const $input = $valueWrapper.find('input');\n            expect($input.attr('type')).toBe('text');\n            expect($input.val()).toBe('<test>');\n        });\n\n        describe('Choice changed', function() {\n            it('Updates UI state', function() {\n                condition.set('choice',\n                              conditionSet.choices.get('my-choice-2'));\n\n                expect($choice.val()).toBe('my-choice-2');\n                expect($operator.val()).toBe('my-op-3');\n\n                const $input = $valueWrapper.find('input');\n                expect($input.attr('type')).toBe('email');\n                expect($input.val()).toBe('');\n            });\n        });\n\n        describe('Operator changed', function() {\n            it('Updates UI state', function() {\n                const choice = conditionSet.choices.get('my-choice-1');\n                condition.set('operator', choice.operators.get('my-op-2'));\n\n                expect($choice.val()).toBe('my-choice-1');\n                expect($operator.val()).toBe('my-op-2');\n\n                const $input = $valueWrapper.find('input');\n                expect($input.attr('type')).toBe('number');\n                expect($input.val()).toBe('');\n            });\n\n            it('Retains value if valueField remains', function() {\n                const choice = conditionSet.choices.get('my-choice-2');\n\n                /* Set the initial conditions. */\n                condition.set('choice', choice);\n                $valueWrapper.find('input').val('42');\n                expect($operator.val()).toBe('my-op-3');\n\n                /* Trigger the operator change. */\n                condition.set('operator', choice.operators.get('my-op-4'));\n\n                expect($valueWrapper.find('input').val()).toBe('42');\n            });\n        });\n\n        describe('Value changed', function() {\n            it('Updated UI state', function() {\n                condition.set('value', 'new-value');\n\n                expect($valueWrapper.find('input').val()).toBe('new-value');\n            });\n        });\n    });\n});\n"],"mappings":"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"}